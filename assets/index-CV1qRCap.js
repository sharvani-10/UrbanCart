import{r as Km,a as Gm,R as M,b,t as uu,c as Qm,u as fs,L as he,d as Bi,e as Ym,f as Xm,B as Jm,g as Zm,h as nt,N as nd,P as eg}from"./vendor-C_sy3WAC.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var Wo={exports:{}},Lr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hu;function tg(){if(hu)return Lr;hu=1;var n=Km(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(l,c,d){var f,m={},v=null,T=null;d!==void 0&&(v=""+d),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(T=c.ref);for(f in c)r.call(c,f)&&!i.hasOwnProperty(f)&&(m[f]=c[f]);if(l&&l.defaultProps)for(f in c=l.defaultProps,c)m[f]===void 0&&(m[f]=c[f]);return{$$typeof:e,type:l,key:v,ref:T,props:m,_owner:s.current}}return Lr.Fragment=t,Lr.jsx=a,Lr.jsxs=a,Lr}var du;function ng(){return du||(du=1,Wo.exports=tg()),Wo.exports}var h=ng(),qs={},fu;function rg(){if(fu)return qs;fu=1;var n=Gm();return qs.createRoot=n.createRoot,qs.hydrateRoot=n.hydrateRoot,qs}var sg=rg(),rd={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},pu=M.createContext&&M.createContext(rd),ig=["attr","size","title"];function og(n,e){if(n==null)return{};var t=ag(n,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function ag(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function hi(){return hi=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hi.apply(this,arguments)}function mu(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function di(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mu(Object(t),!0).forEach(function(r){lg(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):mu(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function lg(n,e,t){return e=cg(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cg(n){var e=ug(n,"string");return typeof e=="symbol"?e:e+""}function ug(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function sd(n){return n&&n.map((e,t)=>M.createElement(e.tag,di({key:t},e.attr),sd(e.child)))}function ln(n){return e=>M.createElement(hg,hi({attr:di({},n.attr)},e),sd(n.child))}function hg(n){var e=t=>{var{attr:r,size:s,title:i}=n,a=og(n,ig),l=s||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),M.createElement("svg",hi({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,a,{className:c,style:di(di({color:n.color||t.color},t.style),n.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&M.createElement("title",null,i),n.children)};return pu!==void 0?M.createElement(pu.Consumer,null,t=>e(t)):e(rd)}function dg(n){return ln({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.473 11a4.5 4.5 0 0 0-8.72-.99A3 3 0 0 0 3 16h8.5a2.5 2.5 0 0 0 0-5z"},child:[]},{tag:"path",attr:{d:"M10.5 1.5a.5.5 0 0 0-1 0v1a.5.5 0 0 0 1 0zm3.743 1.964a.5.5 0 1 0-.707-.707l-.708.707a.5.5 0 0 0 .708.708zm-7.779-.707a.5.5 0 0 0-.707.707l.707.708a.5.5 0 1 0 .708-.708zm1.734 3.374a2 2 0 1 1 3.296 2.198q.3.423.516.898a3 3 0 1 0-4.84-3.225q.529.017 1.028.129m4.484 4.074c.6.215 1.125.59 1.522 1.072a.5.5 0 0 0 .039-.742l-.707-.707a.5.5 0 0 0-.854.377M14.5 6.5a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1z"},child:[]}]})(n)}function fg(n){return ln({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(n)}function id(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=id(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function ot(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=id(n))&&(r&&(r+=" "),r+=e);return r}var pg=Object.defineProperty,mg=(n,e,t)=>e in n?pg(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ko=(n,e,t)=>(mg(n,typeof e!="symbol"?e+"":e,t),t);let gg=class{constructor(){Ko(this,"current",this.detect()),Ko(this,"handoffState","pending"),Ko(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},An=new gg;function zi(n){return An.isServer?null:n instanceof Node?n.ownerDocument:n!=null&&n.hasOwnProperty("current")&&n.current instanceof Node?n.current.ownerDocument:document}function qi(n){typeof queueMicrotask=="function"?queueMicrotask(n):Promise.resolve().then(n).catch(e=>setTimeout(()=>{throw e}))}function cn(){let n=[],e={addEventListener(t,r,s,i){return t.addEventListener(r,s,i),e.add(()=>t.removeEventListener(r,s,i))},requestAnimationFrame(...t){let r=requestAnimationFrame(...t);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...t){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...t))},setTimeout(...t){let r=setTimeout(...t);return e.add(()=>clearTimeout(r))},microTask(...t){let r={current:!0};return qi(()=>{r.current&&t[0]()}),e.add(()=>{r.current=!1})},style(t,r,s){let i=t.style.getPropertyValue(r);return Object.assign(t.style,{[r]:s}),this.add(()=>{Object.assign(t.style,{[r]:i})})},group(t){let r=cn();return t(r),this.add(()=>r.dispose())},add(t){return n.includes(t)||n.push(t),()=>{let r=n.indexOf(t);if(r>=0)for(let s of n.splice(r,1))s()}},dispose(){for(let t of n.splice(0))t()}};return e}function Ja(){let[n]=b.useState(cn);return b.useEffect(()=>()=>n.dispose(),[n]),n}let $e=(n,e)=>{An.isServer?b.useEffect(n,e):b.useLayoutEffect(n,e)};function jn(n){let e=b.useRef(n);return $e(()=>{e.current=n},[n]),e}let fe=function(n){let e=jn(n);return M.useCallback((...t)=>e.current(...t),[e])},yg=b.createContext(void 0);function _g(){return b.useContext(yg)}function ha(...n){return Array.from(new Set(n.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function en(n,e,...t){if(n in e){let s=e[n];return typeof s=="function"?s(...t):s}let r=new Error(`Tried to handle "${n}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,en),r}var fi=(n=>(n[n.None=0]="None",n[n.RenderStrategy=1]="RenderStrategy",n[n.Static=2]="Static",n))(fi||{}),Gt=(n=>(n[n.Unmount=0]="Unmount",n[n.Hidden=1]="Hidden",n))(Gt||{});function Je(){let n=wg();return b.useCallback(e=>vg({mergeRefs:n,...e}),[n])}function vg({ourProps:n,theirProps:e,slot:t,defaultTag:r,features:s,visible:i=!0,name:a,mergeRefs:l}){l=l??Eg;let c=od(e,n);if(i)return Hs(c,t,r,a,l);let d=s??0;if(d&2){let{static:f=!1,...m}=c;if(f)return Hs(m,t,r,a,l)}if(d&1){let{unmount:f=!0,...m}=c;return en(f?0:1,{0(){return null},1(){return Hs({...m,hidden:!0,style:{display:"none"}},t,r,a,l)}})}return Hs(c,t,r,a,l)}function Hs(n,e={},t,r,s){let{as:i=t,children:a,refName:l="ref",...c}=Go(n,["unmount","static"]),d=n.ref!==void 0?{[l]:n.ref}:{},f=typeof a=="function"?a(e):a;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(e)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let m={};if(e){let v=!1,T=[];for(let[C,P]of Object.entries(e))typeof P=="boolean"&&(v=!0),P===!0&&T.push(C.replace(/([A-Z])/g,R=>`-${R.toLowerCase()}`));if(v){m["data-headlessui-state"]=T.join(" ");for(let C of T)m[`data-${C}`]=""}}if(i===b.Fragment&&(Object.keys(wn(c)).length>0||Object.keys(wn(m)).length>0))if(!b.isValidElement(f)||Array.isArray(f)&&f.length>1){if(Object.keys(wn(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(wn(c)).concat(Object.keys(wn(m))).map(v=>`  - ${v}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(v=>`  - ${v}`).join(`
`)].join(`
`))}else{let v=f.props,T=v==null?void 0:v.className,C=typeof T=="function"?(...V)=>ha(T(...V),c.className):ha(T,c.className),P=C?{className:C}:{},R=od(f.props,wn(Go(c,["ref"])));for(let V in m)V in R&&delete m[V];return b.cloneElement(f,Object.assign({},R,m,d,{ref:s(Tg(f),d.ref)},P))}return b.createElement(i,Object.assign({},Go(c,["ref"]),i!==b.Fragment&&d,i!==b.Fragment&&m),f)}function wg(){let n=b.useRef([]),e=b.useCallback(t=>{for(let r of n.current)r!=null&&(typeof r=="function"?r(t):r.current=t)},[]);return(...t)=>{if(!t.every(r=>r==null))return n.current=t,e}}function Eg(...n){return n.every(e=>e==null)?void 0:e=>{for(let t of n)t!=null&&(typeof t=="function"?t(e):t.current=e)}}function od(...n){if(n.length===0)return{};if(n.length===1)return n[0];let e={},t={};for(let r of n)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(t[s]!=null||(t[s]=[]),t[s].push(r[s])):e[s]=r[s];if(e.disabled||e["aria-disabled"])for(let r in t)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(t[r]=[s=>{var i;return(i=s==null?void 0:s.preventDefault)==null?void 0:i.call(s)}]);for(let r in t)Object.assign(e,{[r](s,...i){let a=t[r];for(let l of a){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;l(s,...i)}}});return e}function He(n){var e;return Object.assign(b.forwardRef(n),{displayName:(e=n.displayName)!=null?e:n.name})}function wn(n){let e=Object.assign({},n);for(let t in e)e[t]===void 0&&delete e[t];return e}function Go(n,e=[]){let t=Object.assign({},n);for(let r of e)r in t&&delete t[r];return t}function Tg(n){return M.version.split(".")[0]>="19"?n.props.ref:n.ref}let bg="span";var pi=(n=>(n[n.None=1]="None",n[n.Focusable=2]="Focusable",n[n.Hidden=4]="Hidden",n))(pi||{});function xg(n,e){var t;let{features:r=1,...s}=n,i={ref:e,"aria-hidden":(r&2)===2?!0:(t=s["aria-hidden"])!=null?t:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Je()({ourProps:i,theirProps:s,slot:{},defaultTag:bg,name:"Hidden"})}let da=He(xg),ad=Symbol();function Ig(n,e=!0){return Object.assign(n,{[ad]:e})}function _t(...n){let e=b.useRef(n);b.useEffect(()=>{e.current=n},[n]);let t=fe(r=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return n.every(r=>r==null||(r==null?void 0:r[ad]))?void 0:t}let Za=b.createContext(null);Za.displayName="DescriptionContext";function ld(){let n=b.useContext(Za);if(n===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,ld),e}return n}function Ag(){let[n,e]=b.useState([]);return[n.length>0?n.join(" "):void 0,b.useMemo(()=>function(t){let r=fe(i=>(e(a=>[...a,i]),()=>e(a=>{let l=a.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),s=b.useMemo(()=>({register:r,slot:t.slot,name:t.name,props:t.props,value:t.value}),[r,t.slot,t.name,t.props,t.value]);return M.createElement(Za.Provider,{value:s},t.children)},[e])]}let Cg="p";function Rg(n,e){let t=b.useId(),r=_g(),{id:s=`headlessui-description-${t}`,...i}=n,a=ld(),l=_t(e);$e(()=>a.register(s),[s,a.register]);let c=r||!1,d=b.useMemo(()=>({...a.slot,disabled:c}),[a.slot,c]),f={ref:l,...a.props,id:s};return Je()({ourProps:f,theirProps:i,slot:d,defaultTag:Cg,name:a.name||"Description"})}let kg=He(Rg),Pg=Object.assign(kg,{});var cd=(n=>(n.Space=" ",n.Enter="Enter",n.Escape="Escape",n.Backspace="Backspace",n.Delete="Delete",n.ArrowLeft="ArrowLeft",n.ArrowUp="ArrowUp",n.ArrowRight="ArrowRight",n.ArrowDown="ArrowDown",n.Home="Home",n.End="End",n.PageUp="PageUp",n.PageDown="PageDown",n.Tab="Tab",n))(cd||{});let Sg=b.createContext(()=>{});function Ng({value:n,children:e}){return M.createElement(Sg.Provider,{value:n},e)}let Dg=class extends Map{constructor(e){super(),this.factory=e}get(e){let t=super.get(e);return t===void 0&&(t=this.factory(e),this.set(e,t)),t}};function ud(n,e){let t=n(),r=new Set;return{getSnapshot(){return t},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...i){let a=e[s].call(t,...i);a&&(t=a,r.forEach(l=>l()))}}}function hd(n){return b.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getSnapshot)}let Og=new Dg(()=>ud(()=>[],{ADD(n){return this.includes(n)?this:[...this,n]},REMOVE(n){let e=this.indexOf(n);if(e===-1)return this;let t=this.slice();return t.splice(e,1),t}}));function dr(n,e){let t=Og.get(e),r=b.useId(),s=hd(t);if($e(()=>{if(n)return t.dispatch("ADD",r),()=>t.dispatch("REMOVE",r)},[t,n]),!n)return!1;let i=s.indexOf(r),a=s.length;return i===-1&&(i=a,a+=1),i===a-1}let fa=new Map,Hr=new Map;function gu(n){var e;let t=(e=Hr.get(n))!=null?e:0;return Hr.set(n,t+1),t!==0?()=>yu(n):(fa.set(n,{"aria-hidden":n.getAttribute("aria-hidden"),inert:n.inert}),n.setAttribute("aria-hidden","true"),n.inert=!0,()=>yu(n))}function yu(n){var e;let t=(e=Hr.get(n))!=null?e:1;if(t===1?Hr.delete(n):Hr.set(n,t-1),t!==1)return;let r=fa.get(n);r&&(r["aria-hidden"]===null?n.removeAttribute("aria-hidden"):n.setAttribute("aria-hidden",r["aria-hidden"]),n.inert=r.inert,fa.delete(n))}function Lg(n,{allowed:e,disallowed:t}={}){let r=dr(n,"inert-others");$e(()=>{var s,i;if(!r)return;let a=cn();for(let c of(s=t==null?void 0:t())!=null?s:[])c&&a.add(gu(c));let l=(i=e==null?void 0:e())!=null?i:[];for(let c of l){if(!c)continue;let d=zi(c);if(!d)continue;let f=c.parentElement;for(;f&&f!==d.body;){for(let m of f.children)l.some(v=>m.contains(v))||a.add(gu(m));f=f.parentElement}}return a.dispose},[r,e,t])}function jg(n,e,t){let r=jn(s=>{let i=s.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&t()});b.useEffect(()=>{if(!n)return;let s=e===null?null:e instanceof HTMLElement?e:e.current;if(!s)return;let i=cn();if(typeof ResizeObserver<"u"){let a=new ResizeObserver(()=>r.current(s));a.observe(s),i.add(()=>a.disconnect())}if(typeof IntersectionObserver<"u"){let a=new IntersectionObserver(()=>r.current(s));a.observe(s),i.add(()=>a.disconnect())}return()=>i.dispose()},[e,r,n])}let mi=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(n=>`${n}:not([tabindex='-1'])`).join(","),Vg=["[data-autofocus]"].map(n=>`${n}:not([tabindex='-1'])`).join(",");var bt=(n=>(n[n.First=1]="First",n[n.Previous=2]="Previous",n[n.Next=4]="Next",n[n.Last=8]="Last",n[n.WrapAround=16]="WrapAround",n[n.NoScroll=32]="NoScroll",n[n.AutoFocus=64]="AutoFocus",n))(bt||{}),pa=(n=>(n[n.Error=0]="Error",n[n.Overflow=1]="Overflow",n[n.Success=2]="Success",n[n.Underflow=3]="Underflow",n))(pa||{}),Mg=(n=>(n[n.Previous=-1]="Previous",n[n.Next=1]="Next",n))(Mg||{});function Fg(n=document.body){return n==null?[]:Array.from(n.querySelectorAll(mi)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}function Ug(n=document.body){return n==null?[]:Array.from(n.querySelectorAll(Vg)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}var dd=(n=>(n[n.Strict=0]="Strict",n[n.Loose=1]="Loose",n))(dd||{});function $g(n,e=0){var t;return n===((t=zi(n))==null?void 0:t.body)?!1:en(e,{0(){return n.matches(mi)},1(){let r=n;for(;r!==null;){if(r.matches(mi))return!0;r=r.parentElement}return!1}})}var Bg=(n=>(n[n.Keyboard=0]="Keyboard",n[n.Mouse=1]="Mouse",n))(Bg||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",n=>{n.metaKey||n.altKey||n.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",n=>{n.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:n.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Ct(n){n==null||n.focus({preventScroll:!0})}let zg=["textarea","input"].join(",");function qg(n){var e,t;return(t=(e=n==null?void 0:n.matches)==null?void 0:e.call(n,zg))!=null?t:!1}function Hg(n,e=t=>t){return n.slice().sort((t,r)=>{let s=e(t),i=e(r);if(s===null||i===null)return 0;let a=s.compareDocumentPosition(i);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Wr(n,e,{sorted:t=!0,relativeTo:r=null,skipElements:s=[]}={}){let i=Array.isArray(n)?n.length>0?n[0].ownerDocument:document:n.ownerDocument,a=Array.isArray(n)?t?Hg(n):n:e&64?Ug(n):Fg(n);s.length>0&&a.length>1&&(a=a.filter(T=>!s.some(C=>C!=null&&"current"in C?(C==null?void 0:C.current)===T:C===T))),r=r??i.activeElement;let l=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,a.indexOf(r))-1;if(e&4)return Math.max(0,a.indexOf(r))+1;if(e&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=e&32?{preventScroll:!0}:{},f=0,m=a.length,v;do{if(f>=m||f+m<=0)return 0;let T=c+f;if(e&16)T=(T+m)%m;else{if(T<0)return 3;if(T>=m)return 1}v=a[T],v==null||v.focus(d),f+=l}while(v!==i.activeElement);return e&6&&qg(v)&&v.select(),2}function fd(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Wg(){return/Android/gi.test(window.navigator.userAgent)}function Kg(){return fd()||Wg()}function jr(n,e,t,r){let s=jn(t);b.useEffect(()=>{if(!n)return;function i(a){s.current(a)}return document.addEventListener(e,i,r),()=>document.removeEventListener(e,i,r)},[n,e,r])}function pd(n,e,t,r){let s=jn(t);b.useEffect(()=>{if(!n)return;function i(a){s.current(a)}return window.addEventListener(e,i,r),()=>window.removeEventListener(e,i,r)},[n,e,r])}const _u=30;function Gg(n,e,t){let r=dr(n,"outside-click"),s=jn(t),i=b.useCallback(function(c,d){if(c.defaultPrevented)return;let f=d(c);if(f===null||!f.getRootNode().contains(f)||!f.isConnected)return;let m=function v(T){return typeof T=="function"?v(T()):Array.isArray(T)||T instanceof Set?T:[T]}(e);for(let v of m)if(v!==null&&(v.contains(f)||c.composed&&c.composedPath().includes(v)))return;return!$g(f,dd.Loose)&&f.tabIndex!==-1&&c.preventDefault(),s.current(c,f)},[s,e]),a=b.useRef(null);jr(r,"pointerdown",c=>{var d,f;a.current=((f=(d=c.composedPath)==null?void 0:d.call(c))==null?void 0:f[0])||c.target},!0),jr(r,"mousedown",c=>{var d,f;a.current=((f=(d=c.composedPath)==null?void 0:d.call(c))==null?void 0:f[0])||c.target},!0),jr(r,"click",c=>{Kg()||a.current&&(i(c,()=>a.current),a.current=null)},!0);let l=b.useRef({x:0,y:0});jr(r,"touchstart",c=>{l.current.x=c.touches[0].clientX,l.current.y=c.touches[0].clientY},!0),jr(r,"touchend",c=>{let d={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};if(!(Math.abs(d.x-l.current.x)>=_u||Math.abs(d.y-l.current.y)>=_u))return i(c,()=>c.target instanceof HTMLElement?c.target:null)},!0),pd(r,"blur",c=>i(c,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function ps(...n){return b.useMemo(()=>zi(...n),[...n])}function md(n,e,t,r){let s=jn(t);b.useEffect(()=>{n=n??window;function i(a){s.current(a)}return n.addEventListener(e,i,r),()=>n.removeEventListener(e,i,r)},[n,e,r])}function Qg(){let n;return{before({doc:e}){var t;let r=e.documentElement,s=(t=e.defaultView)!=null?t:window;n=Math.max(0,s.innerWidth-r.clientWidth)},after({doc:e,d:t}){let r=e.documentElement,s=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,n-s);t.style(r,"paddingRight",`${i}px`)}}}function Yg(){return fd()?{before({doc:n,d:e,meta:t}){function r(s){return t.containers.flatMap(i=>i()).some(i=>i.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(n.documentElement).scrollBehavior!=="auto"){let l=cn();l.style(n.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>l.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,a=null;e.addEventListener(n,"click",l=>{if(l.target instanceof HTMLElement)try{let c=l.target.closest("a");if(!c)return;let{hash:d}=new URL(c.href),f=n.querySelector(d);f&&!r(f)&&(a=f)}catch{}},!0),e.addEventListener(n,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let c=l.target;for(;c.parentElement&&r(c.parentElement);)c=c.parentElement;e.style(c,"overscrollBehavior","contain")}else e.style(l.target,"touchAction","none")}),e.addEventListener(n,"touchmove",l=>{if(l.target instanceof HTMLElement){if(l.target.tagName==="INPUT")return;if(r(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),e.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function Xg(){return{before({doc:n,d:e}){e.style(n.documentElement,"overflow","hidden")}}}function Jg(n){let e={};for(let t of n)Object.assign(e,t(e));return e}let xn=ud(()=>new Map,{PUSH(n,e){var t;let r=(t=this.get(n))!=null?t:{doc:n,count:0,d:cn(),meta:new Set};return r.count++,r.meta.add(e),this.set(n,r),this},POP(n,e){let t=this.get(n);return t&&(t.count--,t.meta.delete(e)),this},SCROLL_PREVENT({doc:n,d:e,meta:t}){let r={doc:n,d:e,meta:Jg(t)},s=[Yg(),Qg(),Xg()];s.forEach(({before:i})=>i==null?void 0:i(r)),s.forEach(({after:i})=>i==null?void 0:i(r))},SCROLL_ALLOW({d:n}){n.dispose()},TEARDOWN({doc:n}){this.delete(n)}});xn.subscribe(()=>{let n=xn.getSnapshot(),e=new Map;for(let[t]of n)e.set(t,t.documentElement.style.overflow);for(let t of n.values()){let r=e.get(t.doc)==="hidden",s=t.count!==0;(s&&!r||!s&&r)&&xn.dispatch(t.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",t),t.count===0&&xn.dispatch("TEARDOWN",t)}});function Zg(n,e,t=()=>({containers:[]})){let r=hd(xn),s=e?r.get(e):void 0,i=s?s.count>0:!1;return $e(()=>{if(!(!e||!n))return xn.dispatch("PUSH",e,t),()=>xn.dispatch("POP",e,t)},[n,e]),i}function ey(n,e,t=()=>[document.body]){let r=dr(n,"scroll-lock");Zg(r,e,s=>{var i;return{containers:[...(i=s.containers)!=null?i:[],t]}})}function ty(n=0){let[e,t]=b.useState(n),r=b.useCallback(c=>t(c),[e]),s=b.useCallback(c=>t(d=>d|c),[e]),i=b.useCallback(c=>(e&c)===c,[e]),a=b.useCallback(c=>t(d=>d&~c),[t]),l=b.useCallback(c=>t(d=>d^c),[t]);return{flags:e,setFlag:r,addFlag:s,hasFlag:i,removeFlag:a,toggleFlag:l}}var ny={},vu,wu;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((vu=process==null?void 0:ny)==null?void 0:vu.NODE_ENV)==="test"&&typeof((wu=Element==null?void 0:Element.prototype)==null?void 0:wu.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var ry=(n=>(n[n.None=0]="None",n[n.Closed=1]="Closed",n[n.Enter=2]="Enter",n[n.Leave=4]="Leave",n))(ry||{});function sy(n){let e={};for(let t in n)n[t]===!0&&(e[`data-${t}`]="");return e}function iy(n,e,t,r){let[s,i]=b.useState(t),{hasFlag:a,addFlag:l,removeFlag:c}=ty(n&&s?3:0),d=b.useRef(!1),f=b.useRef(!1),m=Ja();return $e(()=>{var v;if(n){if(t&&i(!0),!e){t&&l(3);return}return(v=r==null?void 0:r.start)==null||v.call(r,t),oy(e,{inFlight:d,prepare(){f.current?f.current=!1:f.current=d.current,d.current=!0,!f.current&&(t?(l(3),c(4)):(l(4),c(2)))},run(){f.current?t?(c(3),l(4)):(c(4),l(3)):t?c(1):l(1)},done(){var T;f.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(d.current=!1,c(7),t||i(!1),(T=r==null?void 0:r.end)==null||T.call(r,t))}})}},[n,t,e,m]),n?[s,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[t,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function oy(n,{prepare:e,run:t,done:r,inFlight:s}){let i=cn();return ly(n,{prepare:e,inFlight:s}),i.nextFrame(()=>{t(),i.requestAnimationFrame(()=>{i.add(ay(n,r))})}),i.dispose}function ay(n,e){var t,r;let s=cn();if(!n)return s.dispose;let i=!1;s.add(()=>{i=!0});let a=(r=(t=n.getAnimations)==null?void 0:t.call(n).filter(l=>l instanceof CSSTransition))!=null?r:[];return a.length===0?(e(),s.dispose):(Promise.allSettled(a.map(l=>l.finished)).then(()=>{i||e()}),s.dispose)}function ly(n,{inFlight:e,prepare:t}){if(e!=null&&e.current){t();return}let r=n.style.transition;n.style.transition="none",t(),n.offsetHeight,n.style.transition=r}function el(n,e){let t=b.useRef([]),r=fe(n);b.useEffect(()=>{let s=[...t.current];for(let[i,a]of e.entries())if(t.current[i]!==a){let l=r(e,s);return t.current=e,l}},[r,...e])}let Hi=b.createContext(null);Hi.displayName="OpenClosedContext";var st=(n=>(n[n.Open=1]="Open",n[n.Closed=2]="Closed",n[n.Closing=4]="Closing",n[n.Opening=8]="Opening",n))(st||{});function Wi(){return b.useContext(Hi)}function cy({value:n,children:e}){return M.createElement(Hi.Provider,{value:n},e)}function uy({children:n}){return M.createElement(Hi.Provider,{value:null},n)}function hy(n){function e(){document.readyState!=="loading"&&(n(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let zt=[];hy(()=>{function n(e){if(!(e.target instanceof HTMLElement)||e.target===document.body||zt[0]===e.target)return;let t=e.target;t=t.closest(mi),zt.unshift(t??e.target),zt=zt.filter(r=>r!=null&&r.isConnected),zt.splice(10)}window.addEventListener("click",n,{capture:!0}),window.addEventListener("mousedown",n,{capture:!0}),window.addEventListener("focus",n,{capture:!0}),document.body.addEventListener("click",n,{capture:!0}),document.body.addEventListener("mousedown",n,{capture:!0}),document.body.addEventListener("focus",n,{capture:!0})});function gd(n){let e=fe(n),t=b.useRef(!1);b.useEffect(()=>(t.current=!1,()=>{t.current=!0,qi(()=>{t.current&&e()})}),[e])}function dy(){let n=typeof document>"u";return"useSyncExternalStore"in uu?(e=>e.useSyncExternalStore)(uu)(()=>()=>{},()=>!1,()=>!n):!1}function ms(){let n=dy(),[e,t]=b.useState(An.isHandoffComplete);return e&&An.isHandoffComplete===!1&&t(!1),b.useEffect(()=>{e!==!0&&t(!0)},[e]),b.useEffect(()=>An.handoff(),[]),n?!1:e}let yd=b.createContext(!1);function fy(){return b.useContext(yd)}function Eu(n){return M.createElement(yd.Provider,{value:n.force},n.children)}function py(n){let e=fy(),t=b.useContext(vd),r=ps(n),[s,i]=b.useState(()=>{var a;if(!e&&t!==null)return(a=t.current)!=null?a:null;if(An.isServer)return null;let l=r==null?void 0:r.getElementById("headlessui-portal-root");if(l)return l;if(r===null)return null;let c=r.createElement("div");return c.setAttribute("id","headlessui-portal-root"),r.body.appendChild(c)});return b.useEffect(()=>{s!==null&&(r!=null&&r.body.contains(s)||r==null||r.body.appendChild(s))},[s,r]),b.useEffect(()=>{e||t!==null&&i(t.current)},[t,i,e]),s}let _d=b.Fragment,my=He(function(n,e){let t=n,r=b.useRef(null),s=_t(Ig(m=>{r.current=m}),e),i=ps(r),a=py(r),[l]=b.useState(()=>{var m;return An.isServer?null:(m=i==null?void 0:i.createElement("div"))!=null?m:null}),c=b.useContext(ma),d=ms();$e(()=>{!a||!l||a.contains(l)||(l.setAttribute("data-headlessui-portal",""),a.appendChild(l))},[a,l]),$e(()=>{if(l&&c)return c.register(l)},[c,l]),gd(()=>{var m;!a||!l||(l instanceof Node&&a.contains(l)&&a.removeChild(l),a.childNodes.length<=0&&((m=a.parentElement)==null||m.removeChild(a)))});let f=Je();return d?!a||!l?null:Qm.createPortal(f({ourProps:{ref:s},theirProps:t,slot:{},defaultTag:_d,name:"Portal"}),l):null});function gy(n,e){let t=_t(e),{enabled:r=!0,...s}=n,i=Je();return r?M.createElement(my,{...s,ref:t}):i({ourProps:{ref:t},theirProps:s,slot:{},defaultTag:_d,name:"Portal"})}let yy=b.Fragment,vd=b.createContext(null);function _y(n,e){let{target:t,...r}=n,s={ref:_t(e)},i=Je();return M.createElement(vd.Provider,{value:t},i({ourProps:s,theirProps:r,defaultTag:yy,name:"Popover.Group"}))}let ma=b.createContext(null);function vy(){let n=b.useContext(ma),e=b.useRef([]),t=fe(i=>(e.current.push(i),n&&n.register(i),()=>r(i))),r=fe(i=>{let a=e.current.indexOf(i);a!==-1&&e.current.splice(a,1),n&&n.unregister(i)}),s=b.useMemo(()=>({register:t,unregister:r,portals:e}),[t,r,e]);return[e,b.useMemo(()=>function({children:i}){return M.createElement(ma.Provider,{value:s},i)},[s])]}let wy=He(gy),wd=He(_y),Ey=Object.assign(wy,{Group:wd});function Ty(n,e=typeof document<"u"?document.defaultView:null,t){let r=dr(n,"escape");md(e,"keydown",s=>{r&&(s.defaultPrevented||s.key===cd.Escape&&t(s))})}function by(){var n;let[e]=b.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[t,r]=b.useState((n=e==null?void 0:e.matches)!=null?n:!1);return $e(()=>{if(!e)return;function s(i){r(i.matches)}return e.addEventListener("change",s),()=>e.removeEventListener("change",s)},[e]),t}function xy({defaultContainers:n=[],portals:e,mainTreeNode:t}={}){let r=ps(t),s=fe(()=>{var i,a;let l=[];for(let c of n)c!==null&&(c instanceof HTMLElement?l.push(c):"current"in c&&c.current instanceof HTMLElement&&l.push(c.current));if(e!=null&&e.current)for(let c of e.current)l.push(c);for(let c of(i=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?i:[])c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c.id!=="headlessui-portal-root"&&(t&&(c.contains(t)||c.contains((a=t==null?void 0:t.getRootNode())==null?void 0:a.host))||l.some(d=>c.contains(d))||l.push(c));return l});return{resolveContainers:s,contains:fe(i=>s().some(a=>a.contains(i)))}}let Ed=b.createContext(null);function Tu({children:n,node:e}){let[t,r]=b.useState(null),s=Td(e??t);return M.createElement(Ed.Provider,{value:s},n,s===null&&M.createElement(da,{features:pi.Hidden,ref:i=>{var a,l;if(i){for(let c of(l=(a=zi(i))==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?l:[])if(c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c!=null&&c.contains(i)){r(c);break}}}}))}function Td(n=null){var e;return(e=b.useContext(Ed))!=null?e:n}function tl(){let n=b.useRef(!1);return $e(()=>(n.current=!0,()=>{n.current=!1}),[]),n}var Vr=(n=>(n[n.Forwards=0]="Forwards",n[n.Backwards=1]="Backwards",n))(Vr||{});function Iy(){let n=b.useRef(0);return pd(!0,"keydown",e=>{e.key==="Tab"&&(n.current=e.shiftKey?1:0)},!0),n}function bd(n){if(!n)return new Set;if(typeof n=="function")return new Set(n());let e=new Set;for(let t of n.current)t.current instanceof HTMLElement&&e.add(t.current);return e}let Ay="div";var bn=(n=>(n[n.None=0]="None",n[n.InitialFocus=1]="InitialFocus",n[n.TabLock=2]="TabLock",n[n.FocusLock=4]="FocusLock",n[n.RestoreFocus=8]="RestoreFocus",n[n.AutoFocus=16]="AutoFocus",n))(bn||{});function Cy(n,e){let t=b.useRef(null),r=_t(t,e),{initialFocus:s,initialFocusFallback:i,containers:a,features:l=15,...c}=n;ms()||(l=0);let d=ps(t);Sy(l,{ownerDocument:d});let f=Ny(l,{ownerDocument:d,container:t,initialFocus:s,initialFocusFallback:i});Dy(l,{ownerDocument:d,container:t,containers:a,previousActiveElement:f});let m=Iy(),v=fe(N=>{let S=t.current;S&&(O=>O())(()=>{en(m.current,{[Vr.Forwards]:()=>{Wr(S,bt.First,{skipElements:[N.relatedTarget,i]})},[Vr.Backwards]:()=>{Wr(S,bt.Last,{skipElements:[N.relatedTarget,i]})}})})}),T=dr(!!(l&2),"focus-trap#tab-lock"),C=Ja(),P=b.useRef(!1),R={ref:r,onKeyDown(N){N.key=="Tab"&&(P.current=!0,C.requestAnimationFrame(()=>{P.current=!1}))},onBlur(N){if(!(l&4))return;let S=bd(a);t.current instanceof HTMLElement&&S.add(t.current);let O=N.relatedTarget;O instanceof HTMLElement&&O.dataset.headlessuiFocusGuard!=="true"&&(xd(S,O)||(P.current?Wr(t.current,en(m.current,{[Vr.Forwards]:()=>bt.Next,[Vr.Backwards]:()=>bt.Previous})|bt.WrapAround,{relativeTo:N.target}):N.target instanceof HTMLElement&&Ct(N.target)))}},V=Je();return M.createElement(M.Fragment,null,T&&M.createElement(da,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:pi.Focusable}),V({ourProps:R,theirProps:c,defaultTag:Ay,name:"FocusTrap"}),T&&M.createElement(da,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:pi.Focusable}))}let Ry=He(Cy),ky=Object.assign(Ry,{features:bn});function Py(n=!0){let e=b.useRef(zt.slice());return el(([t],[r])=>{r===!0&&t===!1&&qi(()=>{e.current.splice(0)}),r===!1&&t===!0&&(e.current=zt.slice())},[n,zt,e]),fe(()=>{var t;return(t=e.current.find(r=>r!=null&&r.isConnected))!=null?t:null})}function Sy(n,{ownerDocument:e}){let t=!!(n&8),r=Py(t);el(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&Ct(r())},[t]),gd(()=>{t&&Ct(r())})}function Ny(n,{ownerDocument:e,container:t,initialFocus:r,initialFocusFallback:s}){let i=b.useRef(null),a=dr(!!(n&1),"focus-trap#initial-focus"),l=tl();return el(()=>{if(n===0)return;if(!a){s!=null&&s.current&&Ct(s.current);return}let c=t.current;c&&qi(()=>{if(!l.current)return;let d=e==null?void 0:e.activeElement;if(r!=null&&r.current){if((r==null?void 0:r.current)===d){i.current=d;return}}else if(c.contains(d)){i.current=d;return}if(r!=null&&r.current)Ct(r.current);else{if(n&16){if(Wr(c,bt.First|bt.AutoFocus)!==pa.Error)return}else if(Wr(c,bt.First)!==pa.Error)return;if(s!=null&&s.current&&(Ct(s.current),(e==null?void 0:e.activeElement)===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=e==null?void 0:e.activeElement})},[s,a,n]),i}function Dy(n,{ownerDocument:e,container:t,containers:r,previousActiveElement:s}){let i=tl(),a=!!(n&4);md(e==null?void 0:e.defaultView,"focus",l=>{if(!a||!i.current)return;let c=bd(r);t.current instanceof HTMLElement&&c.add(t.current);let d=s.current;if(!d)return;let f=l.target;f&&f instanceof HTMLElement?xd(c,f)?(s.current=f,Ct(f)):(l.preventDefault(),l.stopPropagation(),Ct(d)):Ct(s.current)},!0)}function xd(n,e){for(let t of n)if(t.contains(e))return!0;return!1}function Id(n){var e;return!!(n.enter||n.enterFrom||n.enterTo||n.leave||n.leaveFrom||n.leaveTo)||((e=n.as)!=null?e:Cd)!==b.Fragment||M.Children.count(n.children)===1}let Ki=b.createContext(null);Ki.displayName="TransitionContext";var Oy=(n=>(n.Visible="visible",n.Hidden="hidden",n))(Oy||{});function Ly(){let n=b.useContext(Ki);if(n===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return n}function jy(){let n=b.useContext(Gi);if(n===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return n}let Gi=b.createContext(null);Gi.displayName="NestingContext";function Qi(n){return"children"in n?Qi(n.children):n.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function Ad(n,e){let t=jn(n),r=b.useRef([]),s=tl(),i=Ja(),a=fe((T,C=Gt.Hidden)=>{let P=r.current.findIndex(({el:R})=>R===T);P!==-1&&(en(C,{[Gt.Unmount](){r.current.splice(P,1)},[Gt.Hidden](){r.current[P].state="hidden"}}),i.microTask(()=>{var R;!Qi(r)&&s.current&&((R=t.current)==null||R.call(t))}))}),l=fe(T=>{let C=r.current.find(({el:P})=>P===T);return C?C.state!=="visible"&&(C.state="visible"):r.current.push({el:T,state:"visible"}),()=>a(T,Gt.Unmount)}),c=b.useRef([]),d=b.useRef(Promise.resolve()),f=b.useRef({enter:[],leave:[]}),m=fe((T,C,P)=>{c.current.splice(0),e&&(e.chains.current[C]=e.chains.current[C].filter(([R])=>R!==T)),e==null||e.chains.current[C].push([T,new Promise(R=>{c.current.push(R)})]),e==null||e.chains.current[C].push([T,new Promise(R=>{Promise.all(f.current[C].map(([V,N])=>N)).then(()=>R())})]),C==="enter"?d.current=d.current.then(()=>e==null?void 0:e.wait.current).then(()=>P(C)):P(C)}),v=fe((T,C,P)=>{Promise.all(f.current[C].splice(0).map(([R,V])=>V)).then(()=>{var R;(R=c.current.shift())==null||R()}).then(()=>P(C))});return b.useMemo(()=>({children:r,register:l,unregister:a,onStart:m,onStop:v,wait:d,chains:f}),[l,a,r,m,v,f,d])}let Cd=b.Fragment,Rd=fi.RenderStrategy;function Vy(n,e){var t,r;let{transition:s=!0,beforeEnter:i,afterEnter:a,beforeLeave:l,afterLeave:c,enter:d,enterFrom:f,enterTo:m,entered:v,leave:T,leaveFrom:C,leaveTo:P,...R}=n,[V,N]=b.useState(null),S=b.useRef(null),O=Id(n),B=_t(...O?[S,e,N]:e===null?[]:[e]),z=(t=R.unmount)==null||t?Gt.Unmount:Gt.Hidden,{show:E,appear:_,initial:w}=Ly(),[I,x]=b.useState(E?"visible":"hidden"),A=jy(),{register:y,unregister:q}=A;$e(()=>y(S),[y,S]),$e(()=>{if(z===Gt.Hidden&&S.current){if(E&&I!=="visible"){x("visible");return}return en(I,{hidden:()=>q(S),visible:()=>y(S)})}},[I,S,y,q,E,z]);let X=ms();$e(()=>{if(O&&X&&I==="visible"&&S.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[S,I,X,O]);let Re=w&&!_,ie=_&&E&&w,ae=b.useRef(!1),ue=Ad(()=>{ae.current||(x("hidden"),q(S))},A),ut=fe(et=>{ae.current=!0;let vt=et?"enter":"leave";ue.onStart(S,vt,ht=>{ht==="enter"?i==null||i():ht==="leave"&&(l==null||l())})}),de=fe(et=>{let vt=et?"enter":"leave";ae.current=!1,ue.onStop(S,vt,ht=>{ht==="enter"?a==null||a():ht==="leave"&&(c==null||c())}),vt==="leave"&&!Qi(ue)&&(x("hidden"),q(S))});b.useEffect(()=>{O&&s||(ut(E),de(E))},[E,O,s]);let je=!(!s||!O||!X||Re),[,ne]=iy(je,V,E,{start:ut,end:de}),Ze=wn({ref:B,className:((r=ha(R.className,ie&&d,ie&&f,ne.enter&&d,ne.enter&&ne.closed&&f,ne.enter&&!ne.closed&&m,ne.leave&&T,ne.leave&&!ne.closed&&C,ne.leave&&ne.closed&&P,!ne.transition&&E&&v))==null?void 0:r.trim())||void 0,...sy(ne)}),Ve=0;I==="visible"&&(Ve|=st.Open),I==="hidden"&&(Ve|=st.Closed),ne.enter&&(Ve|=st.Opening),ne.leave&&(Ve|=st.Closing);let Qe=Je();return M.createElement(Gi.Provider,{value:ue},M.createElement(cy,{value:Ve},Qe({ourProps:Ze,theirProps:R,defaultTag:Cd,features:Rd,visible:I==="visible",name:"Transition.Child"})))}function My(n,e){let{show:t,appear:r=!1,unmount:s=!0,...i}=n,a=b.useRef(null),l=Id(n),c=_t(...l?[a,e]:e===null?[]:[e]);ms();let d=Wi();if(t===void 0&&d!==null&&(t=(d&st.Open)===st.Open),t===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[f,m]=b.useState(t?"visible":"hidden"),v=Ad(()=>{t||m("hidden")}),[T,C]=b.useState(!0),P=b.useRef([t]);$e(()=>{T!==!1&&P.current[P.current.length-1]!==t&&(P.current.push(t),C(!1))},[P,t]);let R=b.useMemo(()=>({show:t,appear:r,initial:T}),[t,r,T]);$e(()=>{t?m("visible"):!Qi(v)&&a.current!==null&&m("hidden")},[t,v]);let V={unmount:s},N=fe(()=>{var B;T&&C(!1),(B=n.beforeEnter)==null||B.call(n)}),S=fe(()=>{var B;T&&C(!1),(B=n.beforeLeave)==null||B.call(n)}),O=Je();return M.createElement(Gi.Provider,{value:v},M.createElement(Ki.Provider,{value:R},O({ourProps:{...V,as:b.Fragment,children:M.createElement(kd,{ref:c,...V,...i,beforeEnter:N,beforeLeave:S})},theirProps:{},defaultTag:b.Fragment,features:Rd,visible:f==="visible",name:"Transition"})))}function Fy(n,e){let t=b.useContext(Ki)!==null,r=Wi()!==null;return M.createElement(M.Fragment,null,!t&&r?M.createElement(ga,{ref:e,...n}):M.createElement(kd,{ref:e,...n}))}let ga=He(My),kd=He(Vy),nl=He(Fy),Cn=Object.assign(ga,{Child:nl,Root:ga});var Uy=(n=>(n[n.Open=0]="Open",n[n.Closed=1]="Closed",n))(Uy||{}),$y=(n=>(n[n.SetTitleId=0]="SetTitleId",n))($y||{});let By={0(n,e){return n.titleId===e.id?n:{...n,titleId:e.id}}},rl=b.createContext(null);rl.displayName="DialogContext";function Yi(n){let e=b.useContext(rl);if(e===null){let t=new Error(`<${n} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Yi),t}return e}function zy(n,e){return en(e.type,By,n,e)}let bu=He(function(n,e){let t=b.useId(),{id:r=`headlessui-dialog-${t}`,open:s,onClose:i,initialFocus:a,role:l="dialog",autoFocus:c=!0,__demoMode:d=!1,unmount:f=!1,...m}=n,v=b.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(v.current||(v.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let T=Wi();s===void 0&&T!==null&&(s=(T&st.Open)===st.Open);let C=b.useRef(null),P=_t(C,e),R=ps(C),V=s?0:1,[N,S]=b.useReducer(zy,{titleId:null,descriptionId:null,panelRef:b.createRef()}),O=fe(()=>i(!1)),B=fe(de=>S({type:0,id:de})),z=ms()?V===0:!1,[E,_]=vy(),w={get current(){var de;return(de=N.panelRef.current)!=null?de:C.current}},I=Td(),{resolveContainers:x}=xy({mainTreeNode:I,portals:E,defaultContainers:[w]}),A=T!==null?(T&st.Closing)===st.Closing:!1;Lg(d||A?!1:z,{allowed:fe(()=>{var de,je;return[(je=(de=C.current)==null?void 0:de.closest("[data-headlessui-portal]"))!=null?je:null]}),disallowed:fe(()=>{var de;return[(de=I==null?void 0:I.closest("body > *:not(#headlessui-portal-root)"))!=null?de:null]})}),Gg(z,x,de=>{de.preventDefault(),O()}),Ty(z,R==null?void 0:R.defaultView,de=>{de.preventDefault(),de.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),O()}),ey(d||A?!1:z,R,x),jg(z,C,O);let[y,q]=Ag(),X=b.useMemo(()=>[{dialogState:V,close:O,setTitleId:B,unmount:f},N],[V,N,O,B,f]),Re=b.useMemo(()=>({open:V===0}),[V]),ie={ref:P,id:r,role:l,tabIndex:-1,"aria-modal":d?void 0:V===0?!0:void 0,"aria-labelledby":N.titleId,"aria-describedby":y,unmount:f},ae=!by(),ue=bn.None;z&&!d&&(ue|=bn.RestoreFocus,ue|=bn.TabLock,c&&(ue|=bn.AutoFocus),ae&&(ue|=bn.InitialFocus));let ut=Je();return M.createElement(uy,null,M.createElement(Eu,{force:!0},M.createElement(Ey,null,M.createElement(rl.Provider,{value:X},M.createElement(wd,{target:C},M.createElement(Eu,{force:!1},M.createElement(q,{slot:Re},M.createElement(_,null,M.createElement(ky,{initialFocus:a,initialFocusFallback:C,containers:x,features:ue},M.createElement(Ng,{value:O},ut({ourProps:ie,theirProps:m,slot:Re,defaultTag:qy,features:Hy,visible:V===0,name:"Dialog"})))))))))))}),qy="div",Hy=fi.RenderStrategy|fi.Static;function Wy(n,e){let{transition:t=!1,open:r,...s}=n,i=Wi(),a=n.hasOwnProperty("open")||i!==null,l=n.hasOwnProperty("onClose");if(!a&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!a)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof n.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${n.open}`);if(typeof n.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${n.onClose}`);return(r!==void 0||t)&&!s.static?M.createElement(Tu,null,M.createElement(Cn,{show:r,transition:t,unmount:s.unmount},M.createElement(bu,{ref:e,...s}))):M.createElement(Tu,null,M.createElement(bu,{ref:e,open:r,...s}))}let Ky="div";function Gy(n,e){let t=b.useId(),{id:r=`headlessui-dialog-panel-${t}`,transition:s=!1,...i}=n,[{dialogState:a,unmount:l},c]=Yi("Dialog.Panel"),d=_t(e,c.panelRef),f=b.useMemo(()=>({open:a===0}),[a]),m=fe(R=>{R.stopPropagation()}),v={ref:d,id:r,onClick:m},T=s?nl:b.Fragment,C=s?{unmount:l}:{},P=Je();return M.createElement(T,{...C},P({ourProps:v,theirProps:i,slot:f,defaultTag:Ky,name:"Dialog.Panel"}))}let Qy="div";function Yy(n,e){let{transition:t=!1,...r}=n,[{dialogState:s,unmount:i}]=Yi("Dialog.Backdrop"),a=b.useMemo(()=>({open:s===0}),[s]),l={ref:e,"aria-hidden":!0},c=t?nl:b.Fragment,d=t?{unmount:i}:{},f=Je();return M.createElement(c,{...d},f({ourProps:l,theirProps:r,slot:a,defaultTag:Qy,name:"Dialog.Backdrop"}))}let Xy="h2";function Jy(n,e){let t=b.useId(),{id:r=`headlessui-dialog-title-${t}`,...s}=n,[{dialogState:i,setTitleId:a}]=Yi("Dialog.Title"),l=_t(e);b.useEffect(()=>(a(r),()=>a(null)),[r,a]);let c=b.useMemo(()=>({open:i===0}),[i]),d={ref:l,id:r};return Je()({ourProps:d,theirProps:s,slot:c,defaultTag:Xy,name:"Dialog.Title"})}let Zy=He(Wy),e_=He(Gy);He(Yy);let t_=He(Jy),gi=Object.assign(Zy,{Panel:e_,Title:t_,Description:Pg});function n_(n){return ln({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor"},child:[]}]})(n)}const Ce=b.createContext();function r_(){var c,d;const n=b.useContext(Ce),{mode:e,toggleMode:t}=n,[r,s]=b.useState(!1),i=JSON.parse(localStorage.getItem("user")),a=()=>{localStorage.clear("user"),window.location.href="/login"},l=fs(f=>f.cart);return h.jsxs("div",{className:"bg-white sticky top-0 z-50",children:[h.jsx(Cn.Root,{show:r,as:b.Fragment,children:h.jsxs(gi,{as:"div",className:"relative z-40 lg:hidden",onClose:s,children:[h.jsx(Cn.Child,{as:b.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),h.jsx("div",{className:"fixed inset-0 z-40 flex",children:h.jsx(Cn.Child,{as:b.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:h.jsxs(gi.Panel,{className:"relative flex w-full max-w-xs flex-col overflow-y-auto bg-white pb-12 shadow-xl",style:{backgroundColor:e==="dark"?"rgb(40, 44, 52)":"",color:e==="dark"?"white":""},children:[h.jsx("div",{className:"flex px-4 pb-2 pt-28",children:h.jsxs("button",{type:"button",className:"-m-2 inline-flex items-center justify-center rounded-md p-2 text-gray-400",onClick:()=>s(!1),children:[h.jsx("span",{className:"sr-only",children:"Close menu"}),h.jsx(n_,{})]})}),h.jsxs("div",{className:"space-y-6 border-t border-gray-200 px-4 py-6",children:[h.jsx(he,{to:"/allproducts",className:"text-sm font-medium text-gray-900 ",style:{color:e==="dark"?"white":""},children:"All Products"}),i?h.jsx("div",{className:"flow-root",children:h.jsx(he,{to:"/order",style:{color:e==="dark"?"white":""},className:"-m-2 block p-2 font-medium text-gray-900",children:"Order"})}):"",((c=i==null?void 0:i.user)==null?void 0:c.email)==="vanaparthi.sharvani@gmail.com"?h.jsx("div",{className:"flow-root",children:h.jsx(he,{to:"/dashboard",className:"-m-2 block p-2 font-medium text-gray-900",style:{color:e==="dark"?"white":""},children:"admin"})}):"",i?h.jsx("div",{className:"flow-root",children:h.jsx("a",{onClick:a,className:"-m-2 block p-2 font-medium text-gray-900 cursor-pointer",style:{color:e==="dark"?"white":""},children:"Logout"})}):h.jsx("div",{className:"flow-root",children:h.jsx(he,{to:"/signup",className:"-m-2 block p-2 font-medium text-gray-900 cursor-pointer",style:{color:e==="dark"?"white":""},children:"Signup"})}),h.jsx("div",{className:"flow-root",children:h.jsxs(he,{to:"/",className:"-m-2 block p-2 font-medium text-gray-900 cursor-pointer",children:[h.jsx("img",{className:"inline-block w-10 h-10 rounded-full",src:"https://overreacted.io/static/profile-pic-c715447ce38098828758e525a1128b87.jpg",alt:"Dan_Abromov"})," "]})})]}),h.jsx("div",{className:"border-t border-gray-200 px-4 py-6",children:h.jsxs("a",{href:"#",className:"-m-2 flex items-center p-2",children:[h.jsx("img",{src:"img/indiaflag.png",alt:"",className:"block h-auto w-5 flex-shrink-0"}),h.jsx("span",{className:"ml-3 block text-base font-medium text-gray-900",style:{color:e==="dark"?"white":""},children:"INDIA"}),h.jsx("span",{className:"sr-only",children:", change currency"})]})})]})})})]})}),h.jsxs("header",{className:"relative bg-white",children:[h.jsx("p",{className:"flex h-10 items-center justify-center bg-pink-600 px-4 text-sm font-medium text-white sm:px-6 lg:px-8",style:{backgroundColor:e==="dark"?"rgb(62 64 66)":"",color:e==="dark"?"white":""},children:"Get free delivery on orders over ₹300"}),h.jsx("nav",{"aria-label":"Top",className:"bg-gray-100 px-4 sm:px-6 lg:px-8 shadow-xl ",style:{backgroundColor:e==="dark"?"#282c34":"",color:e==="dark"?"white":""},children:h.jsx("div",{className:"",children:h.jsxs("div",{className:"flex h-16 items-center",children:[h.jsxs("button",{type:"button",className:"rounded-md bg-white p-2 text-gray-400 lg:hidden",onClick:()=>s(!0),style:{backgroundColor:e==="dark"?"rgb(80 82 87)":"",color:e==="dark"?"white":""},children:[h.jsx("span",{className:"sr-only",children:"Open menu"}),h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6",children:h.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})]}),h.jsx("div",{className:"ml-4 flex lg:ml-0",children:h.jsx(he,{to:"/",className:"flex",children:h.jsx("div",{className:"flex ",children:h.jsx("h1",{className:" text-2xl font-bold text-black  px-2 py-1 rounded",style:{color:e==="dark"?"white":""},children:"UrbanCart"})})})}),h.jsxs("div",{className:"ml-auto flex items-center",children:[h.jsxs("div",{className:"hidden lg:flex lg:flex-1 lg:items-center lg:justify-end lg:space-x-6",children:[h.jsx(he,{to:"/allproducts",className:"text-sm font-medium text-gray-700 ",style:{color:e==="dark"?"white":""},children:"All Products"}),i?h.jsx(he,{to:"/order",className:"text-sm font-medium text-gray-700 ",style:{color:e==="dark"?"white":""},children:"Order"}):h.jsx(he,{to:"/signup",className:"text-sm font-medium text-gray-700 ",style:{color:e==="dark"?"white":""},children:"Signup"}),((d=i==null?void 0:i.user)==null?void 0:d.email)==="vanaparthi.sharvani@gmail.com"?h.jsx(he,{to:"/dashboard",className:"text-sm font-medium text-gray-700 ",style:{color:e==="dark"?"white":""},children:"Admin"}):"",i?h.jsx("a",{onClick:a,className:"text-sm font-medium text-gray-700 cursor-pointer  ",style:{color:e==="dark"?"white":""},children:"Logout"}):""]}),h.jsx("div",{className:"hidden lg:ml-8 lg:flex",children:h.jsxs("a",{href:"#",className:"flex items-center text-gray-700 ",children:[h.jsx("img",{src:"https://ecommerce-sk.vercel.app/img/indiaflag.png",alt:"",className:"block h-auto w-5 flex-shrink-0"}),h.jsx("span",{className:"ml-3 block text-sm font-medium",style:{color:e==="dark"?"white":""},children:"INDIA"})]})}),h.jsx("div",{className:"flex lg:ml-6",children:h.jsx("button",{className:"",onClick:t,children:e==="light"?h.jsx(fg,{className:"",size:30}):h.jsx(dg,{size:30})})}),h.jsx("div",{className:"ml-4 flow-root lg:ml-6",children:h.jsxs(he,{to:"/cart",className:"group -m-2 flex items-center p-2",style:{color:e==="dark"?"white":""},children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})}),h.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 group-",style:{color:e==="dark"?"white":""},children:l.length}),h.jsx("span",{className:"sr-only",children:"items in cart, view bag"})]})})]})]})})})]})]})}function s_(){const n=b.useContext(Ce),{mode:e}=n;return h.jsx("div",{children:h.jsxs("footer",{className:"text-gray-600 body-font bg-gray-300",style:{backgroundColor:e==="dark"?"rgb(46 49 55)":"",color:e==="dark"?"white":""},children:[h.jsx("div",{className:"container px-5 py-24 mx-auto",children:h.jsxs("div",{className:"flex flex-wrap md:text-left text-center order-first",children:[h.jsxs("div",{className:"lg:w-1/4 md:w-1/2 w-full px-4",children:[h.jsx("h2",{className:"title-font font-medium text-gray-900 tracking-widest text-sm mb-3",style:{color:e==="dark"?"white":""},children:"CONNECT WITH US"}),h.jsxs("nav",{className:"list-none mb-10",children:[h.jsx("li",{children:h.jsx("a",{className:"text-gray-600 hover:text-gray-800",style:{color:e==="dark"?"white":""},children:"Facebook"})}),h.jsx("li",{children:h.jsx("a",{className:"text-gray-600 hover:text-gray-800",style:{color:e==="dark"?"white":""},children:"Twitter"})}),h.jsx("li",{children:h.jsx("a",{className:"text-gray-600 hover:text-gray-800",style:{color:e==="dark"?"white":""},children:"Instagram"})}),h.jsx("li",{children:h.jsx("a",{className:"text-gray-600 hover:text-gray-800",style:{color:e==="dark"?"white":""},children:"Mail"})})]})]}),h.jsxs("div",{className:"lg:w-1/4 md:w-1/2 w-full px-4",children:[h.jsx("h2",{className:"title-font font-medium text-gray-900 tracking-widest text-sm mb-3 uppercase",style:{color:e==="dark"?"white":""},children:"Customer Service"}),h.jsxs("nav",{className:"list-none mb-10",children:[h.jsx("li",{children:h.jsx(he,{to:"/returnpolicy",className:"text-gray-600 hover:text-gray-800",style:{color:e==="dark"?"white":""},children:"Return Policy"})}),h.jsx("li",{children:h.jsx(he,{to:"/about",className:"text-gray-600 hover:text-gray-800",style:{color:e==="dark"?"white":""},children:"100% Purchase Protection"})}),h.jsxs("li",{children:[h.jsx(he,{to:"/contact",className:"text-gray-600 hover:text-gray-800",style:{color:e==="dark"?"white":""},children:"Contact Us"}),h.jsx("li",{children:h.jsx(he,{to:"/contact",className:"text-gray-600 hover:text-gray-800",style:{color:e==="dark"?"white":""},children:"Help"})})]})]})]}),h.jsxs("div",{className:"lg:w-1/4 md:w-1/2 w-full px-4",children:[h.jsx("h2",{className:"title-font font-medium text-gray-900 tracking-widest text-sm mb-3",style:{color:e==="dark"?"white":""},children:"MAKE MONEY WITH US"}),h.jsxs("nav",{className:"list-none mb-10",children:[h.jsx("li",{children:h.jsx(he,{to:"/privacypolicy",className:"text-gray-600 hover:text-gray-800",style:{color:e==="dark"?"white":""},children:"Protect and Build Your Brand"})}),h.jsx("li",{children:h.jsx(he,{to:"/privacypolicy",className:"text-gray-600 hover:text-gray-800",style:{color:e==="dark"?"white":""},children:"Become an Affiliate"})}),h.jsx("li",{children:h.jsx(he,{to:"/privacypolicy",className:"text-gray-600 hover:text-gray-800",style:{color:e==="dark"?"white":""},children:"Adevertise Your Products"})}),h.jsx("li",{children:h.jsx(he,{to:"/privacypolicy",className:"text-gray-600 hover:text-gray-800",style:{color:e==="dark"?"white":""},children:"Supply to UrbanCart"})})]})]}),h.jsx("div",{className:"lg:w-1/4 md:w-1/2 w-full px-4",children:h.jsx("img",{src:"https://ecommerce-sk.vercel.app/pay.png",alt:""})})]})}),h.jsx("div",{className:"bg-gray-200",style:{backgroundColor:e==="dark"?"rgb(55 57 61)":"",color:e==="dark"?"white":""},children:h.jsxs("div",{className:"container px-5 py-3 mx-auto flex items-center sm:flex-row flex-col",children:[h.jsx(he,{to:"/",className:"flex",children:h.jsx("div",{className:"flex ",children:h.jsx("h1",{className:" text-2xl font-bold text-black  px-2 py-1 rounded",style:{color:e==="dark"?"white":""},children:"UrbanCart"})})}),h.jsxs("p",{className:"text-sm text-gray-500 sm:ml-6 sm:mt-0 mt-4",style:{color:e==="dark"?"white":""},children:["© 2024-2025 UrbanCart —",h.jsx("a",{href:"https://twitter.com/knyttneve",rel:"noopener noreferrer",className:"text-gray-600 ml-1",target:"_blank",style:{color:e==="dark"?"white":""},children:"www.UrbanCart.com"})]}),h.jsxs("span",{className:"inline-flex sm:ml-auto sm:mt-0 mt-4 justify-center sm:justify-start",children:[h.jsx("a",{className:"text-gray-500",children:h.jsx("svg",{fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"w-5 h-5",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"})})}),h.jsx("a",{className:"ml-3 text-gray-500",children:h.jsx("svg",{fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"w-5 h-5",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"})})}),h.jsx("a",{className:"ml-3 text-gray-500",children:h.jsxs("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("rect",{width:20,height:20,x:2,y:2,rx:5,ry:5}),h.jsx("path",{d:"M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37zm1.5-4.87h.01"})]})}),h.jsx("a",{className:"ml-3 text-gray-500",children:h.jsxs("svg",{fill:"currentColor",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:0,className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{stroke:"none",d:"M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z"}),h.jsx("circle",{cx:4,cy:4,r:2,stroke:"none"})]})})]})]})})]})})}function fr({children:n}){return h.jsxs("div",{children:[h.jsx(r_,{}),h.jsx("div",{className:"content",children:n}),h.jsx(s_,{})]})}function i_(){return h.jsx("div",{children:h.jsx("img",{src:"https://static.vecteezy.com/system/resources/previews/004/299/835/original/online-shopping-on-phone-buy-sell-business-digital-web-banner-application-money-advertising-payment-ecommerce-illustration-search-free-vector.jpg",alt:""})})}function Pd(){const n=b.useContext(Ce),{mode:e,searchkey:t,setSearchkey:r,filterType:s,setFilterType:i,filterPrice:a,setFilterPrice:l,product:c}=n;return h.jsx("div",{children:h.jsx("div",{className:" container mx-auto px-4 mt-5 ",children:h.jsxs("div",{className:"p-5 rounded-lg bg-gray-100 drop-shadow-xl border border-gray-200",style:{backgroundColor:e==="dark"?"#282c34":"",color:e==="dark"?"white":""},children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute flex items-center ml-2 h-full",children:h.jsx("svg",{className:"w-4 h-4 fill-current text-primary-gray-dark",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M15.8898 15.0493L11.8588 11.0182C11.7869 10.9463 11.6932 10.9088 11.5932 10.9088H11.2713C12.3431 9.74952 12.9994 8.20272 12.9994 6.49968C12.9994 2.90923 10.0901 0 6.49968 0C2.90923 0 0 2.90923 0 6.49968C0 10.0901 2.90923 12.9994 6.49968 12.9994C8.20272 12.9994 9.74952 12.3431 10.9088 11.2744V11.5932C10.9088 11.6932 10.9495 11.7869 11.0182 11.8588L15.0493 15.8898C15.1961 16.0367 15.4336 16.0367 15.5805 15.8898L15.8898 15.5805C16.0367 15.4336 16.0367 15.1961 15.8898 15.0493ZM6.49968 11.9994C3.45921 11.9994 0.999951 9.54016 0.999951 6.49968C0.999951 3.45921 3.45921 0.999951 6.49968 0.999951C9.54016 0.999951 11.9994 3.45921 11.9994 6.49968C11.9994 9.54016 9.54016 11.9994 6.49968 11.9994Z"})})}),h.jsx("input",{type:"text",name:"searchkey",value:t,onChange:d=>r(d.target.value),id:"searchkey",placeholder:"Search here",className:"px-8 py-3 w-full rounded-md bg-violet-0 border-transparent outline-0 text-sm",style:{backgroundColor:e==="dark"?"rgb(64 66 70)":"",color:e==="dark"?"white":""}})]}),h.jsx("div",{className:"flex items-center justify-between mt-4",children:h.jsx("p",{className:"font-medium",children:"Filters"})}),h.jsx("div",{children:h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4 mt-4",children:[h.jsx("select",{value:s,onChange:d=>i(d.target.value),className:"px-4 py-3 w-full rounded-md bg-gray-50 border-transparent outline-0 focus:border-gray-500 focus:bg-white focus:ring-0 text-sm",style:{backgroundColor:e==="dark"?"rgb(64 66 70)":"",color:e==="dark"?"white":""},children:c.map((d,f)=>h.jsx("option",{value:d.category,children:d.category}))}),h.jsx("select",{value:a,onChange:d=>l(d.target.value),className:"px-4 py-3 w-full rounded-md bg-gray-50 border-transparent outline-0  focus:border-gray-500 focus:bg-white focus:ring-0 text-sm",style:{backgroundColor:e==="dark"?"rgb(64 66 70)":"",color:e==="dark"?"white":""},children:c.map((d,f)=>h.jsx("option",{value:d.price,children:d.price}))})]})})]})})})}function o_(){const n=b.useContext(Ce),{mode:e}=n;return h.jsx("div",{children:h.jsx("section",{children:h.jsx("div",{className:" container mx-auto px-5 md:py-5",children:h.jsxs("div",{className:"flex flex-wrap -m-4 text-center",children:[h.jsx("div",{className:"p-4 md:w-1/3 sm:w-1/2 w-full",children:h.jsxs("div",{className:"border-2 hover:shadow-xl hover:shadow-gray-200 border-gray-200 bg-gray-100 shadow-[inset_0_0_2px_rgba(0,0,0,0.6)] px-4 py-6 rounded-lg",style:{backgroundColor:e==="dark"?"rgb(46 49 55)":"",color:e==="dark"?"white":""},children:[h.jsx("svg",{className:"text-pink-600 w-12 h-12 mb-3 inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),h.jsx("h2",{className:"title-font font-medium text-lg text-gray-900",style:{color:e==="dark"?"white":""},children:"Top selling SmartPhones"}),h.jsx("p",{className:"leading-relaxed",children:"Latest Technology, Best Brands"})]})}),h.jsx("div",{className:"p-4 md:w-1/3 sm:w-1/2 w-full",children:h.jsxs("div",{className:"border-2 hover:shadow-xl hover:shadow-gray-200 border-gray-200 bg-gray-100 shadow-[inset_0_0_2px_rgba(0,0,0,0.6)] px-4 py-6 rounded-lg",style:{backgroundColor:e==="dark"?"rgb(46 49 55)":"",color:e==="dark"?"white":""},children:[h.jsx("svg",{className:"text-pink-600 w-12 h-12 mb-3 inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),h.jsx("h2",{className:"title-font font-medium text-lg text-gray-900",style:{color:e==="dark"?"white":""},children:"Premium Tshirts"}),h.jsx("p",{className:"leading-relaxed",children:"Our T-Shirts are 100% made of cotton."})]})}),h.jsx("div",{className:"p-4 md:w-1/3 sm:w-1/2 w-full",children:h.jsxs("div",{className:"border-2 hover:shadow-xl hover:shadow-gray-200 border-gray-200 bg-gray-100 shadow-[inset_0_0_2px_rgba(0,0,0,0.6)] px-4 py-6 rounded-lg",style:{backgroundColor:e==="dark"?"rgb(46 49 55)":"",color:e==="dark"?"white":""},children:[h.jsx("svg",{className:"text-pink-600 w-12 h-12 mb-3 inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),h.jsx("h2",{className:"title-font font-medium text-lg text-gray-900",style:{color:e==="dark"?"white":""},children:"Make your Home Stylish"}),h.jsx("p",{className:"leading-relaxed",children:"Exciting Offers and Discounts"})]})})]})})})})}function a_(){const n=b.useContext(Ce),{mode:e}=n;return h.jsx("div",{children:h.jsx("section",{className:"text-gray-600 body-font mb-10",children:h.jsxs("div",{className:"container px-5 py-10 mx-auto",children:[h.jsx("h1",{className:" text-center text-3xl font-bold text-black",style:{color:e==="dark"?"white":""},children:"Testimonial"}),h.jsxs("h2",{className:" text-center text-2xl font-semibold mb-10",style:{color:e==="dark"?"white":""},children:["What our ",h.jsx("span",{className:" text-pink-500",children:"customers"})," are saying"]}),h.jsxs("div",{className:"flex flex-wrap -m-4",children:[h.jsx("div",{className:"lg:w-1/3 lg:mb-0 mb-6 p-4",children:h.jsxs("div",{className:"h-full text-center",children:[h.jsx("img",{alt:"testimonial",className:"w-20 h-20 mb-8 object-cover object-center rounded-full inline-block border-2 border-gray-200 bg-gray-100",src:"https://cdn-icons-png.flaticon.com/128/15735/15735364.png"}),h.jsx("p",{style:{color:e==="dark"?"white":""},className:"leading-relaxed",children:"“Just wanted to thank you for all the great work your team has delivered. I really appreciate the quick turnaround and clear communication that you have demonstrated consistently over the last few months.”"}),h.jsx("span",{className:"inline-block h-1 w-10 rounded bg-pink-500 mt-6 mb-4"}),h.jsx("h2",{style:{color:e==="dark"?"#ff4162":""},className:"text-gray-900 font-medium title-font tracking-wider text-sm uppercase",children:"Adam Harley"}),h.jsx("p",{style:{color:e==="dark"?"white":""},className:"text-gray-500",children:"Founder and CEO"})]})}),h.jsx("div",{className:"lg:w-1/3 lg:mb-0 mb-6 p-4",children:h.jsxs("div",{className:"h-full text-center",children:[h.jsx("img",{alt:"testimonial",className:"w-20 h-20 mb-8 object-cover object-center rounded-full inline-block border-2 border-gray-200 bg-gray-100",src:"https://cdn-icons-png.flaticon.com/128/2763/2763444.png"}),h.jsx("p",{style:{color:e==="dark"?"white":""},className:"leading-relaxed",children:"“Once again, your hard work does not go unnoticed, and I genuinely appreciate your dedication. All the team members did their best to deliver quality descriptions for the products. Really impressed with the quality and timely work.”"}),h.jsx("span",{className:"inline-block h-1 w-10 rounded bg-pink-500 mt-6 mb-4"}),h.jsx("h2",{style:{color:e==="dark"?"#ff4162":""},className:"text-gray-900 font-medium title-font tracking-wider text-sm uppercase",children:"Daniel Fletcher"}),h.jsx("p",{style:{color:e==="dark"?"white":""},className:"text-gray-500",children:"E-mart store owner"})]})}),h.jsx("div",{className:"lg:w-1/3 lg:mb-0 p-4",children:h.jsxs("div",{className:"h-full text-center",children:[h.jsx("img",{alt:"testimonial",className:"w-20 h-20 mb-8 object-cover object-center rounded-full inline-block border-2 border-gray-200 bg-gray-100",src:"https://cdn-icons-png.flaticon.com/128/236/236832.png"}),h.jsx("p",{style:{color:e==="dark"?"white":""},className:"leading-relaxed",children:"“Your team has accomplished a significant amount of listing maintenance work just in time for the upcoming holiday season. I appreciate your inquisitiveness, timely work, and excellent communication skills. Thank you.”"}),h.jsx("span",{className:"inline-block h-1 w-10 rounded bg-pink-500 mt-6 mb-4"}),h.jsx("h2",{style:{color:e==="dark"?"#ff4162":""},className:"text-gray-900 font-medium title-font tracking-wider text-sm uppercase",children:"Nicole Watson"}),h.jsx("p",{style:{color:e==="dark"?"white":""},className:"text-gray-500",children:"VP Sales"})]})})]})]})})})}function be(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var l_=typeof Symbol=="function"&&Symbol.observable||"@@observable",xu=l_,Qo=()=>Math.random().toString(36).substring(7).split("").join("."),c_={INIT:`@@redux/INIT${Qo()}`,REPLACE:`@@redux/REPLACE${Qo()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Qo()}`},yi=c_;function sl(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function Sd(n,e,t){if(typeof n!="function")throw new Error(be(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(be(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(be(1));return t(Sd)(n,e)}let r=n,s=e,i=new Map,a=i,l=0,c=!1;function d(){a===i&&(a=new Map,i.forEach((R,V)=>{a.set(V,R)}))}function f(){if(c)throw new Error(be(3));return s}function m(R){if(typeof R!="function")throw new Error(be(4));if(c)throw new Error(be(5));let V=!0;d();const N=l++;return a.set(N,R),function(){if(V){if(c)throw new Error(be(6));V=!1,d(),a.delete(N),i=null}}}function v(R){if(!sl(R))throw new Error(be(7));if(typeof R.type>"u")throw new Error(be(8));if(typeof R.type!="string")throw new Error(be(17));if(c)throw new Error(be(9));try{c=!0,s=r(s,R)}finally{c=!1}return(i=a).forEach(N=>{N()}),R}function T(R){if(typeof R!="function")throw new Error(be(10));r=R,v({type:yi.REPLACE})}function C(){const R=m;return{subscribe(V){if(typeof V!="object"||V===null)throw new Error(be(11));function N(){const O=V;O.next&&O.next(f())}return N(),{unsubscribe:R(N)}},[xu](){return this}}}return v({type:yi.INIT}),{dispatch:v,subscribe:m,getState:f,replaceReducer:T,[xu]:C}}function u_(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:yi.INIT})>"u")throw new Error(be(12));if(typeof t(void 0,{type:yi.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(be(13))})}function h_(n){const e=Object.keys(n),t={};for(let i=0;i<e.length;i++){const a=e[i];typeof n[a]=="function"&&(t[a]=n[a])}const r=Object.keys(t);let s;try{u_(t)}catch(i){s=i}return function(a={},l){if(s)throw s;let c=!1;const d={};for(let f=0;f<r.length;f++){const m=r[f],v=t[m],T=a[m],C=v(T,l);if(typeof C>"u")throw l&&l.type,new Error(be(14));d[m]=C,c=c||C!==T}return c=c||r.length!==Object.keys(a).length,c?d:a}}function _i(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...r)=>e(t(...r)))}function d_(...n){return e=>(t,r)=>{const s=e(t,r);let i=()=>{throw new Error(be(15))};const a={getState:s.getState,dispatch:(c,...d)=>i(c,...d)},l=n.map(c=>c(a));return i=_i(...l)(s.dispatch),{...s,dispatch:i}}}function f_(n){return sl(n)&&"type"in n&&typeof n.type=="string"}var Nd=Symbol.for("immer-nothing"),Iu=Symbol.for("immer-draftable"),Ke=Symbol.for("immer-state");function rt(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var rr=Object.getPrototypeOf;function kn(n){return!!n&&!!n[Ke]}function St(n){var e;return n?Dd(n)||Array.isArray(n)||!!n[Iu]||!!((e=n.constructor)!=null&&e[Iu])||Ji(n)||Zi(n):!1}var p_=Object.prototype.constructor.toString();function Dd(n){if(!n||typeof n!="object")return!1;const e=rr(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===p_}function vi(n,e){Xi(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,r)=>e(r,t,n))}function Xi(n){const e=n[Ke];return e?e.type_:Array.isArray(n)?1:Ji(n)?2:Zi(n)?3:0}function ya(n,e){return Xi(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function Od(n,e,t){const r=Xi(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function m_(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function Ji(n){return n instanceof Map}function Zi(n){return n instanceof Set}function En(n){return n.copy_||n.base_}function _a(n,e){if(Ji(n))return new Map(n);if(Zi(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=Dd(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[Ke];let s=Reflect.ownKeys(r);for(let i=0;i<s.length;i++){const a=s[i],l=r[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:n[a]})}return Object.create(rr(n),r)}else{const r=rr(n);if(r!==null&&t)return{...n};const s=Object.create(r);return Object.assign(s,n)}}function il(n,e=!1){return eo(n)||kn(n)||!St(n)||(Xi(n)>1&&(n.set=n.add=n.clear=n.delete=g_),Object.freeze(n),e&&Object.entries(n).forEach(([t,r])=>il(r,!0))),n}function g_(){rt(2)}function eo(n){return Object.isFrozen(n)}var y_={};function Pn(n){const e=y_[n];return e||rt(0,n),e}var es;function Ld(){return es}function __(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Au(n,e){e&&(Pn("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function va(n){wa(n),n.drafts_.forEach(v_),n.drafts_=null}function wa(n){n===es&&(es=n.parent_)}function Cu(n){return es=__(es,n)}function v_(n){const e=n[Ke];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Ru(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[Ke].modified_&&(va(e),rt(4)),St(n)&&(n=wi(e,n),e.parent_||Ei(e,n)),e.patches_&&Pn("Patches").generateReplacementPatches_(t[Ke].base_,n,e.patches_,e.inversePatches_)):n=wi(e,t,[]),va(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==Nd?n:void 0}function wi(n,e,t){if(eo(e))return e;const r=e[Ke];if(!r)return vi(e,(s,i)=>ku(n,r,e,s,i,t)),e;if(r.scope_!==n)return e;if(!r.modified_)return Ei(n,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let i=s,a=!1;r.type_===3&&(i=new Set(s),s.clear(),a=!0),vi(i,(l,c)=>ku(n,r,s,l,c,t,a)),Ei(n,s,!1),t&&n.patches_&&Pn("Patches").generatePatches_(r,t,n.patches_,n.inversePatches_)}return r.copy_}function ku(n,e,t,r,s,i,a){if(kn(s)){const l=i&&e&&e.type_!==3&&!ya(e.assigned_,r)?i.concat(r):void 0,c=wi(n,s,l);if(Od(t,r,c),kn(c))n.canAutoFreeze_=!1;else return}else a&&t.add(s);if(St(s)&&!eo(s)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;wi(n,s),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,r)&&Ei(n,s)}}function Ei(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&il(e,t)}function w_(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:Ld(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,i=ol;t&&(s=[r],i=ts);const{revoke:a,proxy:l}=Proxy.revocable(s,i);return r.draft_=l,r.revoke_=a,l}var ol={get(n,e){if(e===Ke)return n;const t=En(n);if(!ya(t,e))return E_(n,t,e);const r=t[e];return n.finalized_||!St(r)?r:r===Yo(n.base_,e)?(Xo(n),n.copy_[e]=Ta(r,n)):r},has(n,e){return e in En(n)},ownKeys(n){return Reflect.ownKeys(En(n))},set(n,e,t){const r=jd(En(n),e);if(r!=null&&r.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const s=Yo(En(n),e),i=s==null?void 0:s[Ke];if(i&&i.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(m_(t,s)&&(t!==void 0||ya(n.base_,e)))return!0;Xo(n),Ea(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return Yo(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,Xo(n),Ea(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=En(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){rt(11)},getPrototypeOf(n){return rr(n.base_)},setPrototypeOf(){rt(12)}},ts={};vi(ol,(n,e)=>{ts[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});ts.deleteProperty=function(n,e){return ts.set.call(this,n,e,void 0)};ts.set=function(n,e,t){return ol.set.call(this,n[0],e,t,n[0])};function Yo(n,e){const t=n[Ke];return(t?En(t):n)[e]}function E_(n,e,t){var s;const r=jd(e,t);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(n.draft_):void 0}function jd(n,e){if(!(e in n))return;let t=rr(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=rr(t)}}function Ea(n){n.modified_||(n.modified_=!0,n.parent_&&Ea(n.parent_))}function Xo(n){n.copy_||(n.copy_=_a(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var T_=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const i=t;t=e;const a=this;return function(c=i,...d){return a.produce(c,f=>t.call(this,f,...d))}}typeof t!="function"&&rt(6),r!==void 0&&typeof r!="function"&&rt(7);let s;if(St(e)){const i=Cu(this),a=Ta(e,void 0);let l=!0;try{s=t(a),l=!1}finally{l?va(i):wa(i)}return Au(i,r),Ru(s,i)}else if(!e||typeof e!="object"){if(s=t(e),s===void 0&&(s=e),s===Nd&&(s=void 0),this.autoFreeze_&&il(s,!0),r){const i=[],a=[];Pn("Patches").generateReplacementPatches_(e,s,i,a),r(i,a)}return s}else rt(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,c=>e(c,...l));let r,s;return[this.produce(e,t,(a,l)=>{r=a,s=l}),r,s]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){St(n)||rt(8),kn(n)&&(n=b_(n));const e=Cu(this),t=Ta(n,void 0);return t[Ke].isManual_=!0,wa(e),t}finishDraft(n,e){const t=n&&n[Ke];(!t||!t.isManual_)&&rt(9);const{scope_:r}=t;return Au(r,e),Ru(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}t>-1&&(e=e.slice(t+1));const r=Pn("Patches").applyPatches_;return kn(n)?r(n,e):this.produce(n,s=>r(s,e))}};function Ta(n,e){const t=Ji(n)?Pn("MapSet").proxyMap_(n,e):Zi(n)?Pn("MapSet").proxySet_(n,e):w_(n,e);return(e?e.scope_:Ld()).drafts_.push(t),t}function b_(n){return kn(n)||rt(10,n),Vd(n)}function Vd(n){if(!St(n)||eo(n))return n;const e=n[Ke];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=_a(n,e.scope_.immer_.useStrictShallowCopy_)}else t=_a(n,!0);return vi(t,(r,s)=>{Od(t,r,Vd(s))}),e&&(e.finalized_=!1),t}var Ge=new T_,Md=Ge.produce;Ge.produceWithPatches.bind(Ge);Ge.setAutoFreeze.bind(Ge);Ge.setUseStrictShallowCopy.bind(Ge);Ge.applyPatches.bind(Ge);Ge.createDraft.bind(Ge);Ge.finishDraft.bind(Ge);function Fd(n){return({dispatch:t,getState:r})=>s=>i=>typeof i=="function"?i(t,r,n):s(i)}var x_=Fd(),I_=Fd,A_=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?_i:_i.apply(null,arguments)};function Pu(n,e){function t(...r){if(e){let s=e(...r);if(!s)throw new Error(Rt(0));return{type:n,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:n,payload:r[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=r=>f_(r)&&r.type===n,t}var Ud=class Mr extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Mr.prototype)}static get[Symbol.species](){return Mr}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Mr(...e[0].concat(this)):new Mr(...e.concat(this))}};function Su(n){return St(n)?Md(n,()=>{}):n}function Nu(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function C_(n){return typeof n=="boolean"}var R_=()=>function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=e??{};let a=new Ud;return t&&(C_(t)?a.push(x_):a.push(I_(t.extraArgument))),a},k_="RTK_autoBatch",Du=n=>e=>{setTimeout(e,n)},P_=(n={type:"raf"})=>e=>(...t)=>{const r=e(...t);let s=!0,i=!1,a=!1;const l=new Set,c=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Du(10):n.type==="callback"?n.queueNotification:Du(n.timeout),d=()=>{a=!1,i&&(i=!1,l.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const m=()=>s&&f(),v=r.subscribe(m);return l.add(f),()=>{v(),l.delete(f)}},dispatch(f){var m;try{return s=!((m=f==null?void 0:f.meta)!=null&&m[k_]),i=!s,i&&(a||(a=!0,c(d))),r.dispatch(f)}finally{s=!0}}})},S_=n=>function(t){const{autoBatch:r=!0}=t??{};let s=new Ud(n);return r&&s.push(P_(typeof r=="object"?r:void 0)),s};function N_(n){const e=R_(),{reducer:t=void 0,middleware:r,devTools:s=!0,preloadedState:i=void 0,enhancers:a=void 0}=n||{};let l;if(typeof t=="function")l=t;else if(sl(t))l=h_(t);else throw new Error(Rt(1));let c;typeof r=="function"?c=r(e):c=e();let d=_i;s&&(d=A_({trace:!1,...typeof s=="object"&&s}));const f=d_(...c),m=S_(f);let v=typeof a=="function"?a(m):m();const T=d(...v);return Sd(l,i,T)}function $d(n){const e={},t=[];let r;const s={addCase(i,a){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Rt(28));if(l in e)throw new Error(Rt(29));return e[l]=a,s},addMatcher(i,a){return t.push({matcher:i,reducer:a}),s},addDefaultCase(i){return r=i,s}};return n(s),[e,t,r]}function D_(n){return typeof n=="function"}function O_(n,e){let[t,r,s]=$d(e),i;if(D_(n))i=()=>Su(n());else{const l=Su(n);i=()=>l}function a(l=i(),c){let d=[t[c.type],...r.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return d.filter(f=>!!f).length===0&&(d=[s]),d.reduce((f,m)=>{if(m)if(kn(f)){const T=m(f,c);return T===void 0?f:T}else{if(St(f))return Md(f,v=>m(v,c));{const v=m(f,c);if(v===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return f},l)}return a.getInitialState=i,a}var L_=Symbol.for("rtk-slice-createasyncthunk");function j_(n,e){return`${n}/${e}`}function V_({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[L_];return function(s){const{name:i,reducerPath:a=i}=s;if(!i)throw new Error(Rt(11));typeof process<"u";const l=(typeof s.reducers=="function"?s.reducers(U_()):s.reducers)||{},c=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(S,O){const B=typeof S=="string"?S:S.type;if(!B)throw new Error(Rt(12));if(B in d.sliceCaseReducersByType)throw new Error(Rt(13));return d.sliceCaseReducersByType[B]=O,f},addMatcher(S,O){return d.sliceMatchers.push({matcher:S,reducer:O}),f},exposeAction(S,O){return d.actionCreators[S]=O,f},exposeCaseReducer(S,O){return d.sliceCaseReducersByName[S]=O,f}};c.forEach(S=>{const O=l[S],B={reducerName:S,type:j_(i,S),createNotation:typeof s.reducers=="function"};B_(O)?q_(B,O,f,e):$_(B,O,f)});function m(){const[S={},O=[],B=void 0]=typeof s.extraReducers=="function"?$d(s.extraReducers):[s.extraReducers],z={...S,...d.sliceCaseReducersByType};return O_(s.initialState,E=>{for(let _ in z)E.addCase(_,z[_]);for(let _ of d.sliceMatchers)E.addMatcher(_.matcher,_.reducer);for(let _ of O)E.addMatcher(_.matcher,_.reducer);B&&E.addDefaultCase(B)})}const v=S=>S,T=new Map;let C;function P(S,O){return C||(C=m()),C(S,O)}function R(){return C||(C=m()),C.getInitialState()}function V(S,O=!1){function B(E){let _=E[S];return typeof _>"u"&&O&&(_=R()),_}function z(E=v){const _=Nu(T,O,()=>new WeakMap);return Nu(_,E,()=>{const w={};for(const[I,x]of Object.entries(s.selectors??{}))w[I]=M_(x,E,R,O);return w})}return{reducerPath:S,getSelectors:z,get selectors(){return z(B)},selectSlice:B}}const N={name:i,reducer:P,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:R,...V(a),injectInto(S,{reducerPath:O,...B}={}){const z=O??a;return S.inject({reducerPath:z,reducer:P},B),{...N,...V(z,!0)}}};return N}}function M_(n,e,t,r){function s(i,...a){let l=e(i);return typeof l>"u"&&r&&(l=t()),n(l,...a)}return s.unwrapped=n,s}var F_=V_();function U_(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function $_({type:n,reducerName:e,createNotation:t},r,s){let i,a;if("reducer"in r){if(t&&!z_(r))throw new Error(Rt(17));i=r.reducer,a=r.prepare}else i=r;s.addCase(n,i).exposeCaseReducer(e,i).exposeAction(e,a?Pu(n,a):Pu(n))}function B_(n){return n._reducerDefinitionType==="asyncThunk"}function z_(n){return n._reducerDefinitionType==="reducerWithPrepare"}function q_({type:n,reducerName:e},t,r,s){if(!s)throw new Error(Rt(18));const{payloadCreator:i,fulfilled:a,pending:l,rejected:c,settled:d,options:f}=t,m=s(n,i,f);r.exposeAction(e,m),a&&r.addCase(m.fulfilled,a),l&&r.addCase(m.pending,l),c&&r.addCase(m.rejected,c),d&&r.addMatcher(m.settled,d),r.exposeCaseReducer(e,{fulfilled:a||Ws,pending:l||Ws,rejected:c||Ws,settled:d||Ws})}function Ws(){}function Rt(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const H_=[],Bd=F_({name:"cart",initialState:H_,reducers:{addToCart(n,e){n.push(e.payload)},deleteFromCart(n,e){return n.filter(t=>t.id!=e.payload.id)}}}),{addToCart:al,deleteFromCart:W_}=Bd.actions,K_=Bd.reducer;function G_(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}G_(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{margin-bottom:0;border-radius:0}}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var gs=n=>typeof n=="number"&&!isNaN(n),Sn=n=>typeof n=="string",Nt=n=>typeof n=="function",Q_=n=>Sn(n)||gs(n),ba=n=>Sn(n)||Nt(n)?n:null,Y_=(n,e)=>n===!1||gs(n)&&n>0?n:e,xa=n=>b.isValidElement(n)||Sn(n)||Nt(n)||gs(n);function X_(n,e,t=300){let{scrollHeight:r,style:s}=n;requestAnimationFrame(()=>{s.minHeight="initial",s.height=r+"px",s.transition=`all ${t}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,t)})})}function J_({enter:n,exit:e,appendPosition:t=!1,collapse:r=!0,collapseDuration:s=300}){return function({children:i,position:a,preventExitTransition:l,done:c,nodeRef:d,isIn:f,playToast:m}){let v=t?`${n}--${a}`:n,T=t?`${e}--${a}`:e,C=b.useRef(0);return b.useLayoutEffect(()=>{let P=d.current,R=v.split(" "),V=N=>{N.target===d.current&&(m(),P.removeEventListener("animationend",V),P.removeEventListener("animationcancel",V),C.current===0&&N.type!=="animationcancel"&&P.classList.remove(...R))};P.classList.add(...R),P.addEventListener("animationend",V),P.addEventListener("animationcancel",V)},[]),b.useEffect(()=>{let P=d.current,R=()=>{P.removeEventListener("animationend",R),r?X_(P,c,s):c()};f||(l?R():(C.current=1,P.className+=` ${T}`,P.addEventListener("animationend",R)))},[f]),M.createElement(M.Fragment,null,i)}}function Ou(n,e){return{content:zd(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function zd(n,e,t=!1){return b.isValidElement(n)&&!Sn(n.type)?b.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):Nt(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function Z_({closeToast:n,theme:e,ariaLabel:t="close"}){return M.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:r=>{r.stopPropagation(),n(!0)},"aria-label":t},M.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},M.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function e0({delay:n,isRunning:e,closeToast:t,type:r="default",hide:s,className:i,controlledProgress:a,progress:l,rtl:c,isIn:d,theme:f}){let m=s||a&&l===0,v={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};a&&(v.transform=`scaleX(${l})`);let T=ot("Toastify__progress-bar",a?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":c}),C=Nt(i)?i({rtl:c,type:r,defaultClassName:T}):ot(T,i),P={[a&&l>=1?"onTransitionEnd":"onAnimationEnd"]:a&&l<1?null:()=>{d&&t()}};return M.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":m},M.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${r}`}),M.createElement("div",{role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:C,style:v,...P}))}var t0=1,qd=()=>`${t0++}`;function n0(n,e,t){let r=1,s=0,i=[],a=[],l=e,c=new Map,d=new Set,f=N=>(d.add(N),()=>d.delete(N)),m=()=>{a=Array.from(c.values()),d.forEach(N=>N())},v=({containerId:N,toastId:S,updateId:O})=>{let B=N?N!==n:n!==1,z=c.has(S)&&O==null;return B||z},T=(N,S)=>{c.forEach(O=>{var B;(S==null||S===O.props.toastId)&&((B=O.toggle)==null||B.call(O,N))})},C=N=>{var S,O;(O=(S=N.props)==null?void 0:S.onClose)==null||O.call(S,N.removalReason),N.isActive=!1},P=N=>{if(N==null)c.forEach(C);else{let S=c.get(N);S&&C(S)}m()},R=()=>{s-=i.length,i=[]},V=N=>{var S,O;let{toastId:B,updateId:z}=N.props,E=z==null;N.staleId&&c.delete(N.staleId),N.isActive=!0,c.set(B,N),m(),t(Ou(N,E?"added":"updated")),E&&((O=(S=N.props).onOpen)==null||O.call(S))};return{id:n,props:l,observe:f,toggle:T,removeToast:P,toasts:c,clearQueue:R,buildToast:(N,S)=>{if(v(S))return;let{toastId:O,updateId:B,data:z,staleId:E,delay:_}=S,w=B==null;w&&s++;let I={...l,style:l.toastStyle,key:r++,...Object.fromEntries(Object.entries(S).filter(([A,y])=>y!=null)),toastId:O,updateId:B,data:z,isIn:!1,className:ba(S.className||l.toastClassName),progressClassName:ba(S.progressClassName||l.progressClassName),autoClose:S.isLoading?!1:Y_(S.autoClose,l.autoClose),closeToast(A){c.get(O).removalReason=A,P(O)},deleteToast(){let A=c.get(O);if(A!=null){if(t(Ou(A,"removed")),c.delete(O),s--,s<0&&(s=0),i.length>0){V(i.shift());return}m()}}};I.closeButton=l.closeButton,S.closeButton===!1||xa(S.closeButton)?I.closeButton=S.closeButton:S.closeButton===!0&&(I.closeButton=xa(l.closeButton)?l.closeButton:!0);let x={content:N,props:I,staleId:E};l.limit&&l.limit>0&&s>l.limit&&w?i.push(x):gs(_)?setTimeout(()=>{V(x)},_):V(x)},setProps(N){l=N},setToggle:(N,S)=>{let O=c.get(N);O&&(O.toggle=S)},isToastActive:N=>{var S;return(S=c.get(N))==null?void 0:S.isActive},getSnapshot:()=>a}}var Ue=new Map,ns=[],Ia=new Set,r0=n=>Ia.forEach(e=>e(n)),Hd=()=>Ue.size>0;function s0(){ns.forEach(n=>Kd(n.content,n.options)),ns=[]}var i0=(n,{containerId:e})=>{var t;return(t=Ue.get(e||1))==null?void 0:t.toasts.get(n)};function Wd(n,e){var t;if(e)return!!((t=Ue.get(e))!=null&&t.isToastActive(n));let r=!1;return Ue.forEach(s=>{s.isToastActive(n)&&(r=!0)}),r}function o0(n){if(!Hd()){ns=ns.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||Q_(n))Ue.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=Ue.get(n.containerId);e?e.removeToast(n.id):Ue.forEach(t=>{t.removeToast(n.id)})}}var a0=(n={})=>{Ue.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function Kd(n,e){xa(n)&&(Hd()||ns.push({content:n,options:e}),Ue.forEach(t=>{t.buildToast(n,e)}))}function l0(n){var e;(e=Ue.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function Gd(n,e){Ue.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(n,e==null?void 0:e.id)})}function c0(n){let e=n.containerId||1;return{subscribe(t){let r=n0(e,n,r0);Ue.set(e,r);let s=r.observe(t);return s0(),()=>{s(),Ue.delete(e)}},setProps(t){var r;(r=Ue.get(e))==null||r.setProps(t)},getSnapshot(){var t;return(t=Ue.get(e))==null?void 0:t.getSnapshot()}}}function u0(n){return Ia.add(n),()=>{Ia.delete(n)}}function h0(n){return n&&(Sn(n.toastId)||gs(n.toastId))?n.toastId:qd()}function ys(n,e){return Kd(n,e),e.toastId}function to(n,e){return{...e,type:e&&e.type||n,toastId:h0(e)}}function no(n){return(e,t)=>ys(e,to(n,t))}function Y(n,e){return ys(n,to("default",e))}Y.loading=(n,e)=>ys(n,to("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function d0(n,{pending:e,error:t,success:r},s){let i;e&&(i=Sn(e)?Y.loading(e,s):Y.loading(e.render,{...s,...e}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(d,f,m)=>{if(f==null){Y.dismiss(i);return}let v={type:d,...a,...s,data:m},T=Sn(f)?{render:f}:f;return i?Y.update(i,{...v,...T}):Y(T.render,{...v,...T}),m},c=Nt(n)?n():n;return c.then(d=>l("success",r,d)).catch(d=>l("error",t,d)),c}Y.promise=d0;Y.success=no("success");Y.info=no("info");Y.error=no("error");Y.warning=no("warning");Y.warn=Y.warning;Y.dark=(n,e)=>ys(n,to("default",{theme:"dark",...e}));function f0(n){o0(n)}Y.dismiss=f0;Y.clearWaitingQueue=a0;Y.isActive=Wd;Y.update=(n,e={})=>{let t=i0(n,e);if(t){let{props:r,content:s}=t,i={delay:100,...r,...e,toastId:e.toastId||n,updateId:qd()};i.toastId!==n&&(i.staleId=n);let a=i.render||s;delete i.render,ys(a,i)}};Y.done=n=>{Y.update(n,{progress:1})};Y.onChange=u0;Y.play=n=>Gd(!0,n);Y.pause=n=>Gd(!1,n);function p0(n){var e;let{subscribe:t,getSnapshot:r,setProps:s}=b.useRef(c0(n)).current;s(n);let i=(e=b.useSyncExternalStore(t,r,r))==null?void 0:e.slice();function a(l){if(!i)return[];let c=new Map;return n.newestOnTop&&i.reverse(),i.forEach(d=>{let{position:f}=d.props;c.has(f)||c.set(f,[]),c.get(f).push(d)}),Array.from(c,d=>l(d[0],d[1]))}return{getToastToRender:a,isToastActive:Wd,count:i==null?void 0:i.length}}function m0(n){let[e,t]=b.useState(!1),[r,s]=b.useState(!1),i=b.useRef(null),a=b.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:d,onClick:f,closeOnClick:m}=n;l0({id:n.toastId,containerId:n.containerId,fn:t}),b.useEffect(()=>{if(n.pauseOnFocusLoss)return v(),()=>{T()}},[n.pauseOnFocusLoss]);function v(){document.hasFocus()||V(),window.addEventListener("focus",R),window.addEventListener("blur",V)}function T(){window.removeEventListener("focus",R),window.removeEventListener("blur",V)}function C(E){if(n.draggable===!0||n.draggable===E.pointerType){N();let _=i.current;a.canCloseOnClick=!0,a.canDrag=!0,_.style.transition="none",n.draggableDirection==="x"?(a.start=E.clientX,a.removalDistance=_.offsetWidth*(n.draggablePercent/100)):(a.start=E.clientY,a.removalDistance=_.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function P(E){let{top:_,bottom:w,left:I,right:x}=i.current.getBoundingClientRect();E.nativeEvent.type!=="touchend"&&n.pauseOnHover&&E.clientX>=I&&E.clientX<=x&&E.clientY>=_&&E.clientY<=w?V():R()}function R(){t(!0)}function V(){t(!1)}function N(){a.didMove=!1,document.addEventListener("pointermove",O),document.addEventListener("pointerup",B)}function S(){document.removeEventListener("pointermove",O),document.removeEventListener("pointerup",B)}function O(E){let _=i.current;if(a.canDrag&&_){a.didMove=!0,e&&V(),n.draggableDirection==="x"?a.delta=E.clientX-a.start:a.delta=E.clientY-a.start,a.start!==E.clientX&&(a.canCloseOnClick=!1);let w=n.draggableDirection==="x"?`${a.delta}px, var(--y)`:`0, calc(${a.delta}px + var(--y))`;_.style.transform=`translate3d(${w},0)`,_.style.opacity=`${1-Math.abs(a.delta/a.removalDistance)}`}}function B(){S();let E=i.current;if(a.canDrag&&a.didMove&&E){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance){s(!0),n.closeToast(!0),n.collapseAll();return}E.style.transition="transform 0.2s, opacity 0.2s",E.style.removeProperty("transform"),E.style.removeProperty("opacity")}}let z={onPointerDown:C,onPointerUp:P};return l&&c&&(z.onMouseEnter=V,n.stacked||(z.onMouseLeave=R)),m&&(z.onClick=E=>{f&&f(E),a.canCloseOnClick&&d(!0)}),{playToast:R,pauseToast:V,isRunning:e,preventExitTransition:r,toastRef:i,eventHandlers:z}}var g0=typeof window<"u"?b.useLayoutEffect:b.useEffect,ro=({theme:n,type:e,isLoading:t,...r})=>M.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...r});function y0(n){return M.createElement(ro,{...n},M.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function _0(n){return M.createElement(ro,{...n},M.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function v0(n){return M.createElement(ro,{...n},M.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function w0(n){return M.createElement(ro,{...n},M.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function E0(){return M.createElement("div",{className:"Toastify__spinner"})}var Aa={info:_0,warning:y0,success:v0,error:w0,spinner:E0},T0=n=>n in Aa;function b0({theme:n,type:e,isLoading:t,icon:r}){let s=null,i={theme:n,type:e};return r===!1||(Nt(r)?s=r({...i,isLoading:t}):b.isValidElement(r)?s=b.cloneElement(r,i):t?s=Aa.spinner():T0(e)&&(s=Aa[e](i))),s}var x0=n=>{let{isRunning:e,preventExitTransition:t,toastRef:r,eventHandlers:s,playToast:i}=m0(n),{closeButton:a,children:l,autoClose:c,onClick:d,type:f,hideProgressBar:m,closeToast:v,transition:T,position:C,className:P,style:R,progressClassName:V,updateId:N,role:S,progress:O,rtl:B,toastId:z,deleteToast:E,isIn:_,isLoading:w,closeOnClick:I,theme:x,ariaLabel:A}=n,y=ot("Toastify__toast",`Toastify__toast-theme--${x}`,`Toastify__toast--${f}`,{"Toastify__toast--rtl":B},{"Toastify__toast--close-on-click":I}),q=Nt(P)?P({rtl:B,position:C,type:f,defaultClassName:y}):ot(y,P),X=b0(n),Re=!!O||!c,ie={closeToast:v,type:f,theme:x},ae=null;return a===!1||(Nt(a)?ae=a(ie):b.isValidElement(a)?ae=b.cloneElement(a,ie):ae=Z_(ie)),M.createElement(T,{isIn:_,done:E,position:C,preventExitTransition:t,nodeRef:r,playToast:i},M.createElement("div",{id:z,tabIndex:0,onClick:d,"data-in":_,className:q,...s,style:R,ref:r,..._&&{role:S,"aria-label":A}},X!=null&&M.createElement("div",{className:ot("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!w})},X),zd(l,n,!e),ae,!n.customProgressBar&&M.createElement(e0,{...N&&!Re?{key:`p-${N}`}:{},rtl:B,theme:x,delay:c,isRunning:e,isIn:_,closeToast:v,hide:m,type:f,className:V,controlledProgress:Re,progress:O||0})))},I0=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),A0=J_(I0("bounce",!0)),C0={position:"top-right",transition:A0,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function R0(n){let e={...C0,...n},t=n.stacked,[r,s]=b.useState(!0),i=b.useRef(null),{getToastToRender:a,isToastActive:l,count:c}=p0(e),{className:d,style:f,rtl:m,containerId:v,hotKeys:T}=e;function C(R){let V=ot("Toastify__toast-container",`Toastify__toast-container--${R}`,{"Toastify__toast-container--rtl":m});return Nt(d)?d({position:R,rtl:m,defaultClassName:V}):ot(V,ba(d))}function P(){t&&(s(!0),Y.play())}return g0(()=>{var R;if(t){let V=i.current.querySelectorAll('[data-in="true"]'),N=12,S=(R=e.position)==null?void 0:R.includes("top"),O=0,B=0;Array.from(V).reverse().forEach((z,E)=>{let _=z;_.classList.add("Toastify__toast--stacked"),E>0&&(_.dataset.collapsed=`${r}`),_.dataset.pos||(_.dataset.pos=S?"top":"bot");let w=O*(r?.2:1)+(r?0:N*E);_.style.setProperty("--y",`${S?w:w*-1}px`),_.style.setProperty("--g",`${N}`),_.style.setProperty("--s",`${1-(r?B:0)}`),O+=_.offsetHeight,B+=.025})}},[r,c,t]),b.useEffect(()=>{function R(V){var N;let S=i.current;T(V)&&((N=S.querySelector('[tabIndex="0"]'))==null||N.focus(),s(!1),Y.pause()),V.key==="Escape"&&(document.activeElement===S||S!=null&&S.contains(document.activeElement))&&(s(!0),Y.play())}return document.addEventListener("keydown",R),()=>{document.removeEventListener("keydown",R)}},[T]),M.createElement("section",{ref:i,className:"Toastify",id:v,onMouseEnter:()=>{t&&(s(!1),Y.pause())},onMouseLeave:P,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},a((R,V)=>{let N=V.length?{...f}:{...f,pointerEvents:"none"};return M.createElement("div",{tabIndex:-1,className:C(R),"data-stacked":t,style:N,key:`c-${R}`},V.map(({content:S,props:O})=>M.createElement(x0,{...O,stacked:t,collapseAll:P,isIn:l(O.toastId,O.containerId),key:`t-${O.key}`},S)))}))}function k0(){const n=b.useContext(Ce),{mode:e,product:t,searchkey:r,setSearchkey:s,filterType:i,setFilterType:a,filterPrice:l,setFilterPrice:c}=n,d=Bi(),f=fs(v=>v.cart);console.log(f);const m=v=>{d(al(v)),Y.success("add to cart")};return b.useEffect(()=>{localStorage.setItem("cart",JSON.stringify(f))},[f]),h.jsx("section",{className:"text-gray-600 body-font",children:h.jsxs("div",{className:"container px-5 py-8 md:py-16 mx-auto",children:[h.jsxs("div",{class:"lg:w-1/2 w-full mb-6 lg:mb-10",children:[h.jsx("h1",{class:"sm:text-3xl text-2xl font-medium title-font mb-2 text-gray-900",style:{color:e==="dark"?"white":""},children:"Our Latest Collection"}),h.jsx("div",{class:"h-1 w-20 bg-pink-600 rounded"})]}),h.jsx("div",{className:"flex flex-wrap -m-4",children:t.filter(v=>v.title.toLowerCase().includes(r)).filter(v=>v.category.toLowerCase().includes(i)).filter(v=>v.price.includes(l)).slice(0,8).map((v,T)=>{const{title:C,price:P,description:R,imageUrl:V,id:N}=v;return h.jsx("div",{className:"p-4 md:w-1/4  drop-shadow-lg ",children:h.jsxs("div",{className:"h-full border-2 hover:shadow-gray-100 hover:shadow-2xl transition-shadow duration-300 ease-in-out    border-gray-200 border-opacity-60 rounded-2xl overflow-hidden",style:{backgroundColor:e==="dark"?"rgb(46 49 55)":"",color:e==="dark"?"white":""},children:[h.jsx("div",{onClick:()=>window.location.href=`/productinfo/${N}`,className:"flex justify-center cursor-pointer",children:h.jsx("img",{className:" rounded-2xl w-full h-80 p-2 hover:scale-110 transition-scale-110  duration-300 ease-in-out",src:V,alt:"blog"})}),h.jsxs("div",{className:"p-5 border-t-2",children:[h.jsx("h2",{className:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1",style:{color:e==="dark"?"white":""},children:"UrbanCart"}),h.jsx("h1",{className:"title-font text-lg font-medium text-gray-900 mb-3",style:{color:e==="dark"?"white":""},children:C}),h.jsxs("p",{className:"leading-relaxed mb-3",style:{color:e==="dark"?"white":""},children:["₹",P]}),h.jsx("div",{className:" flex justify-center",children:h.jsx("button",{type:"button",onClick:()=>m(v),className:"focus:outline-none text-white bg-pink-600 hover:bg-pink-700 focus:ring-4 focus:ring-purple-300 font-medium rounded-lg text-sm w-full  py-2",children:"Add To Cart"})})]})]})},T)})})]})})}function P0(){return h.jsxs(fr,{children:[h.jsx(i_,{}),h.jsx(Pd,{}),h.jsx(k0,{}),h.jsx("div",{className:"flex justify-center -mt-10 mb-4",children:h.jsx(he,{to:"/allproducts",children:h.jsx("button",{className:" bg-gray-300 px-5 py-2 rounded-xl",children:"See more"})})}),h.jsx(o_,{}),h.jsx(a_,{})]})}function ll(){return h.jsx("div",{children:h.jsxs("div",{role:"status",className:"absolute top-0 right-0 bottom-0 left-0 m-auto w-[3em] h-10 md:h-32 z-50",children:[h.jsxs("svg",{"aria-hidden":"true",className:"w-10 h-10 text-gray-300 animate-spin fill-violet-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),h.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),h.jsx("span",{className:"sr-only",children:"Loading..."})]})})}function S0(){const n=JSON.parse(localStorage.getItem("user")).user.uid,e=b.useContext(Ce),{mode:t,loading:r,order:s}=e;return h.jsxs(fr,{children:[r&&h.jsx(ll,{}),s.length>0?h.jsx(h.Fragment,{children:h.jsx("div",{className:" h-full pt-10",children:s.filter(i=>i.userid==n).map(i=>h.jsx("div",{className:"mx-auto max-w-5xl justify-center px-6 md:flex md:space-x-6 xl:px-0",children:i.cartItems.map(a=>h.jsx("div",{className:"rounded-lg md:w-2/3",children:h.jsxs("div",{className:"justify-between mb-6 rounded-lg bg-white p-6 shadow-md sm:flex sm:justify-start",style:{backgroundColor:t==="dark"?"#282c34":"",color:t==="dark"?"white":""},children:[h.jsx("img",{src:a.imageUrl,alt:"product-image",className:"w-full rounded-lg sm:w-40"}),h.jsx("div",{className:"sm:ml-4 sm:flex sm:w-full sm:justify-between",children:h.jsxs("div",{className:"mt-5 sm:mt-0",children:[h.jsx("h2",{className:"text-lg font-bold text-gray-900",style:{color:t==="dark"?"white":""},children:a.title}),h.jsx("p",{className:"mt-1 text-xs text-gray-700",style:{color:t==="dark"?"white":""},children:a.description}),h.jsx("p",{className:"mt-1 text-xs text-gray-700",style:{color:t==="dark"?"white":""},children:a.price})]})})]})}))}))})}):h.jsx("h2",{className:" text-center tex-2xl text-white",children:"Not Order"})]})}function N0({name:n,address:e,pincode:t,phoneNumber:r,setName:s,setAddress:i,setPincode:a,setPhoneNumber:l,buyNow:c}){let[d,f]=b.useState(!1);function m(){f(!1)}function v(){f(!0)}return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"  text-center rounded-lg text-white font-bold",children:h.jsx("button",{type:"button",onClick:v,className:"w-full  bg-violet-600 py-2 text-center rounded-lg text-white font-bold ",children:"Buy Now"})}),h.jsx(Cn,{appear:!0,show:d,as:b.Fragment,children:h.jsxs(gi,{as:"div",className:"relative z-10",onClose:m,children:[h.jsx(Cn.Child,{as:b.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),h.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:h.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:h.jsx(Cn.Child,{as:b.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:h.jsx(gi.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl p-2  text-left align-middle shadow-xl transition-all bg-gray-50",children:h.jsx("section",{className:"",children:h.jsx("div",{className:"flex flex-col items-center justify-center py-8 mx-auto  lg:py-0",children:h.jsx("div",{className:"w-full  rounded-lg md:mt-0 sm:max-w-md xl:p-0 ",children:h.jsxs("div",{className:"p-6 space-y-4 md:space-y-6 sm:p-8",children:[h.jsxs("form",{className:"space-y-4 md:space-y-6",action:"#",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"name",className:"block mb-2 text-sm font-medium text-gray-900",children:"Enter Full Name"}),h.jsx("input",{value:n,onChange:T=>s(T.target.value),type:"name",name:"name",id:"name",className:" border outline-0 border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 bg-gray-100",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900",children:"Enter Full Address"}),h.jsx("input",{value:e,onChange:T=>i(T.target.value),type:"text",name:"address",id:"address",className:" border outline-0 border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 bg-gray-100",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"pincode",className:"block mb-2 text-sm font-medium text-gray-900",children:"Enter Pincode"}),h.jsx("input",{value:t,onChange:T=>a(T.target.value),type:"text",name:"pincode",id:"pincode",className:" border outline-0 border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 bg-gray-100",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"mobileNumber",className:"block mb-2 text-sm font-medium text-gray-900",children:"Enter Mobile Number"}),h.jsx("input",{value:r,onChange:T=>l(T.target.value),type:"text",name:"mobileNumber",id:"mobileNumber",className:" border outline-0 border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 bg-gray-100",required:!0})]})]}),h.jsx("button",{onClick:()=>{c(),m()},type:"button",className:"focus:outline-none w-full text-white bg-violet-600 hover:bg-violet-800  outline-0 font-medium rounded-lg text-sm px-5 py-2.5 ",children:"Order Now"})]})})})})})})})})]})})]})}var Lu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},D0=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],a=n[t++],l=n[t++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=n[t++],a=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Yd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],a=s+1<n.length,l=a?n[s+1]:0,c=s+2<n.length,d=c?n[s+2]:0,f=i>>2,m=(i&3)<<4|l>>4;let v=(l&15)<<2|d>>6,T=d&63;c||(T=64,a||(v=64)),r.push(t[f],t[m],t[v],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Qd(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):D0(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],l=s<n.length?t[n.charAt(s)]:0;++s;const d=s<n.length?t[n.charAt(s)]:64;++s;const m=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new O0;const v=i<<2|l>>4;if(r.push(v),d!==64){const T=l<<4&240|d>>2;if(r.push(T),m!==64){const C=d<<6&192|m;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class O0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const L0=function(n){const e=Qd(n);return Yd.encodeByteArray(e,!0)},Ti=function(n){return L0(n).replace(/\./g,"")},Xd=function(n){try{return Yd.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=()=>j0().__FIREBASE_DEFAULTS__,M0=()=>{if(typeof process>"u"||typeof Lu>"u")return;const n=Lu.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},F0=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Xd(n[1]);return e&&JSON.parse(e)},so=()=>{try{return V0()||M0()||F0()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Jd=n=>{var e,t;return(t=(e=so())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},U0=n=>{const e=Jd(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Zd=()=>{var n;return(n=so())===null||n===void 0?void 0:n.config},ef=n=>{var e;return(e=so())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ti(JSON.stringify(t)),Ti(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function z0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function q0(){var n;const e=(n=so())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function H0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function W0(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function K0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function G0(){const n=Le();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Q0(){return!q0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y0(){try{return typeof indexedDB=="object"}catch{return!1}}function X0(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="FirebaseError";class Vt extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=J0,Object.setPrototypeOf(this,Vt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_s.prototype.create)}}class _s{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?Z0(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Vt(s,l,r)}}function Z0(n,e){return n.replace(ev,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const ev=/\{\$([^}]+)}/g;function tv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function bi(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],a=e[s];if(ju(i)&&ju(a)){if(!bi(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function ju(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fr(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ur(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function nv(n,e){const t=new rv(n,e);return t.subscribe.bind(t)}class rv{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");sv(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Jo),s.error===void 0&&(s.error=Jo),s.complete===void 0&&(s.complete=Jo);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sv(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Jo(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(n){return n&&n._delegate?n._delegate:n}class Nn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new $0;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(av(e))try{this.getOrInitializeService({instanceIdentifier:Tn})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Tn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tn){return this.instances.has(e)}getOptions(e=Tn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ov(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Tn){return this.component?this.component.multipleInstances?e:Tn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ov(n){return n===Tn?void 0:n}function av(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new iv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(J||(J={}));const cv={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},uv=J.INFO,hv={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},dv=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=hv[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cl{constructor(e){this.name=e,this._logLevel=uv,this._logHandler=dv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in J))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...e),this._logHandler(this,J.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...e),this._logHandler(this,J.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,J.INFO,...e),this._logHandler(this,J.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,J.WARN,...e),this._logHandler(this,J.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...e),this._logHandler(this,J.ERROR,...e)}}const fv=(n,e)=>e.some(t=>n instanceof t);let Vu,Mu;function pv(){return Vu||(Vu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mv(){return Mu||(Mu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tf=new WeakMap,Ca=new WeakMap,nf=new WeakMap,Zo=new WeakMap,ul=new WeakMap;function gv(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",a)},i=()=>{t(Yt(n.result)),s()},a=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&tf.set(t,n)}).catch(()=>{}),ul.set(e,n),e}function yv(n){if(Ca.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",a),n.removeEventListener("abort",a)},i=()=>{t(),s()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",a),n.addEventListener("abort",a)});Ca.set(n,e)}let Ra={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ca.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nf.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Yt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _v(n){Ra=n(Ra)}function vv(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ea(this),e,...t);return nf.set(r,e.sort?e.sort():[e]),Yt(r)}:mv().includes(n)?function(...e){return n.apply(ea(this),e),Yt(tf.get(this))}:function(...e){return Yt(n.apply(ea(this),e))}}function wv(n){return typeof n=="function"?vv(n):(n instanceof IDBTransaction&&yv(n),fv(n,pv())?new Proxy(n,Ra):n)}function Yt(n){if(n instanceof IDBRequest)return gv(n);if(Zo.has(n))return Zo.get(n);const e=wv(n);return e!==n&&(Zo.set(n,e),ul.set(e,n)),e}const ea=n=>ul.get(n);function Ev(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(n,e),l=Yt(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Yt(a.result),c.oldVersion,c.newVersion,Yt(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Tv=["get","getKey","getAll","getAllKeys","count"],bv=["put","add","delete","clear"],ta=new Map;function Fu(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ta.get(e))return ta.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=bv.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Tv.includes(t)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[t](...l),s&&c.done]))[0]};return ta.set(e,i),i}_v(n=>({...n,get:(e,t,r)=>Fu(e,t)||n.get(e,t,r),has:(e,t)=>!!Fu(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Iv(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Iv(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ka="@firebase/app",Uu="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt=new cl("@firebase/app"),Av="@firebase/app-compat",Cv="@firebase/analytics-compat",Rv="@firebase/analytics",kv="@firebase/app-check-compat",Pv="@firebase/app-check",Sv="@firebase/auth",Nv="@firebase/auth-compat",Dv="@firebase/database",Ov="@firebase/data-connect",Lv="@firebase/database-compat",jv="@firebase/functions",Vv="@firebase/functions-compat",Mv="@firebase/installations",Fv="@firebase/installations-compat",Uv="@firebase/messaging",$v="@firebase/messaging-compat",Bv="@firebase/performance",zv="@firebase/performance-compat",qv="@firebase/remote-config",Hv="@firebase/remote-config-compat",Wv="@firebase/storage",Kv="@firebase/storage-compat",Gv="@firebase/firestore",Qv="@firebase/vertexai",Yv="@firebase/firestore-compat",Xv="firebase",Jv="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa="[DEFAULT]",Zv={[ka]:"fire-core",[Av]:"fire-core-compat",[Rv]:"fire-analytics",[Cv]:"fire-analytics-compat",[Pv]:"fire-app-check",[kv]:"fire-app-check-compat",[Sv]:"fire-auth",[Nv]:"fire-auth-compat",[Dv]:"fire-rtdb",[Ov]:"fire-data-connect",[Lv]:"fire-rtdb-compat",[jv]:"fire-fn",[Vv]:"fire-fn-compat",[Mv]:"fire-iid",[Fv]:"fire-iid-compat",[Uv]:"fire-fcm",[$v]:"fire-fcm-compat",[Bv]:"fire-perf",[zv]:"fire-perf-compat",[qv]:"fire-rc",[Hv]:"fire-rc-compat",[Wv]:"fire-gcs",[Kv]:"fire-gcs-compat",[Gv]:"fire-fst",[Yv]:"fire-fst-compat",[Qv]:"fire-vertex","fire-js":"fire-js",[Xv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new Map,ew=new Map,Sa=new Map;function $u(n,e){try{n.container.addComponent(e)}catch(t){Dt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function sr(n){const e=n.name;if(Sa.has(e))return Dt.debug(`There were multiple attempts to register component ${e}.`),!1;Sa.set(e,n);for(const t of xi.values())$u(t,n);for(const t of ew.values())$u(t,n);return!0}function hl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function dt(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xt=new _s("app","Firebase",tw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=Jv;function rf(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Pa,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Xt.create("bad-app-name",{appName:String(s)});if(t||(t=Zd()),!t)throw Xt.create("no-options");const i=xi.get(s);if(i){if(bi(t,i.options)&&bi(r,i.config))return i;throw Xt.create("duplicate-app",{appName:s})}const a=new lv(s);for(const c of Sa.values())a.addComponent(c);const l=new nw(t,r,a);return xi.set(s,l),l}function sf(n=Pa){const e=xi.get(n);if(!e&&n===Pa&&Zd())return rf();if(!e)throw Xt.create("no-app",{appName:n});return e}function Jt(n,e,t){var r;let s=(r=Zv[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dt.warn(l.join(" "));return}sr(new Nn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="firebase-heartbeat-database",sw=1,rs="firebase-heartbeat-store";let na=null;function of(){return na||(na=Ev(rw,sw,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(rs)}catch(t){console.warn(t)}}}}).catch(n=>{throw Xt.create("idb-open",{originalErrorMessage:n.message})})),na}async function iw(n){try{const t=(await of()).transaction(rs),r=await t.objectStore(rs).get(af(n));return await t.done,r}catch(e){if(e instanceof Vt)Dt.warn(e.message);else{const t=Xt.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dt.warn(t.message)}}}async function Bu(n,e){try{const r=(await of()).transaction(rs,"readwrite");await r.objectStore(rs).put(e,af(n)),await r.done}catch(t){if(t instanceof Vt)Dt.warn(t.message);else{const r=Xt.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Dt.warn(r.message)}}}function af(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=1024,aw=30*24*60*60*1e3;class lw{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new uw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=zu();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=aw}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Dt.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=zu(),{heartbeatsToSend:r,unsentEntries:s}=cw(this._heartbeatsCache.heartbeats),i=Ti(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Dt.warn(t),""}}}function zu(){return new Date().toISOString().substring(0,10)}function cw(n,e=ow){const t=[];let r=n.slice();for(const s of n){const i=t.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),qu(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),qu(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class uw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Y0()?X0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await iw(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Bu(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Bu(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function qu(n){return Ti(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(n){sr(new Nn("platform-logger",e=>new xv(e),"PRIVATE")),sr(new Nn("heartbeat",e=>new lw(e),"PRIVATE")),Jt(ka,Uu,n),Jt(ka,Uu,"esm2017"),Jt("fire-js","")}hw("");var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rn,lf;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,_){function w(){}w.prototype=_.prototype,E.D=_.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,x,A){for(var y=Array(arguments.length-2),q=2;q<arguments.length;q++)y[q-2]=arguments[q];return _.prototype[x].apply(I,y)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,_,w){w||(w=0);var I=Array(16);if(typeof _=="string")for(var x=0;16>x;++x)I[x]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(x=0;16>x;++x)I[x]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=E.g[0],w=E.g[1],x=E.g[2];var A=E.g[3],y=_+(A^w&(x^A))+I[0]+3614090360&4294967295;_=w+(y<<7&4294967295|y>>>25),y=A+(x^_&(w^x))+I[1]+3905402710&4294967295,A=_+(y<<12&4294967295|y>>>20),y=x+(w^A&(_^w))+I[2]+606105819&4294967295,x=A+(y<<17&4294967295|y>>>15),y=w+(_^x&(A^_))+I[3]+3250441966&4294967295,w=x+(y<<22&4294967295|y>>>10),y=_+(A^w&(x^A))+I[4]+4118548399&4294967295,_=w+(y<<7&4294967295|y>>>25),y=A+(x^_&(w^x))+I[5]+1200080426&4294967295,A=_+(y<<12&4294967295|y>>>20),y=x+(w^A&(_^w))+I[6]+2821735955&4294967295,x=A+(y<<17&4294967295|y>>>15),y=w+(_^x&(A^_))+I[7]+4249261313&4294967295,w=x+(y<<22&4294967295|y>>>10),y=_+(A^w&(x^A))+I[8]+1770035416&4294967295,_=w+(y<<7&4294967295|y>>>25),y=A+(x^_&(w^x))+I[9]+2336552879&4294967295,A=_+(y<<12&4294967295|y>>>20),y=x+(w^A&(_^w))+I[10]+4294925233&4294967295,x=A+(y<<17&4294967295|y>>>15),y=w+(_^x&(A^_))+I[11]+2304563134&4294967295,w=x+(y<<22&4294967295|y>>>10),y=_+(A^w&(x^A))+I[12]+1804603682&4294967295,_=w+(y<<7&4294967295|y>>>25),y=A+(x^_&(w^x))+I[13]+4254626195&4294967295,A=_+(y<<12&4294967295|y>>>20),y=x+(w^A&(_^w))+I[14]+2792965006&4294967295,x=A+(y<<17&4294967295|y>>>15),y=w+(_^x&(A^_))+I[15]+1236535329&4294967295,w=x+(y<<22&4294967295|y>>>10),y=_+(x^A&(w^x))+I[1]+4129170786&4294967295,_=w+(y<<5&4294967295|y>>>27),y=A+(w^x&(_^w))+I[6]+3225465664&4294967295,A=_+(y<<9&4294967295|y>>>23),y=x+(_^w&(A^_))+I[11]+643717713&4294967295,x=A+(y<<14&4294967295|y>>>18),y=w+(A^_&(x^A))+I[0]+3921069994&4294967295,w=x+(y<<20&4294967295|y>>>12),y=_+(x^A&(w^x))+I[5]+3593408605&4294967295,_=w+(y<<5&4294967295|y>>>27),y=A+(w^x&(_^w))+I[10]+38016083&4294967295,A=_+(y<<9&4294967295|y>>>23),y=x+(_^w&(A^_))+I[15]+3634488961&4294967295,x=A+(y<<14&4294967295|y>>>18),y=w+(A^_&(x^A))+I[4]+3889429448&4294967295,w=x+(y<<20&4294967295|y>>>12),y=_+(x^A&(w^x))+I[9]+568446438&4294967295,_=w+(y<<5&4294967295|y>>>27),y=A+(w^x&(_^w))+I[14]+3275163606&4294967295,A=_+(y<<9&4294967295|y>>>23),y=x+(_^w&(A^_))+I[3]+4107603335&4294967295,x=A+(y<<14&4294967295|y>>>18),y=w+(A^_&(x^A))+I[8]+1163531501&4294967295,w=x+(y<<20&4294967295|y>>>12),y=_+(x^A&(w^x))+I[13]+2850285829&4294967295,_=w+(y<<5&4294967295|y>>>27),y=A+(w^x&(_^w))+I[2]+4243563512&4294967295,A=_+(y<<9&4294967295|y>>>23),y=x+(_^w&(A^_))+I[7]+1735328473&4294967295,x=A+(y<<14&4294967295|y>>>18),y=w+(A^_&(x^A))+I[12]+2368359562&4294967295,w=x+(y<<20&4294967295|y>>>12),y=_+(w^x^A)+I[5]+4294588738&4294967295,_=w+(y<<4&4294967295|y>>>28),y=A+(_^w^x)+I[8]+2272392833&4294967295,A=_+(y<<11&4294967295|y>>>21),y=x+(A^_^w)+I[11]+1839030562&4294967295,x=A+(y<<16&4294967295|y>>>16),y=w+(x^A^_)+I[14]+4259657740&4294967295,w=x+(y<<23&4294967295|y>>>9),y=_+(w^x^A)+I[1]+2763975236&4294967295,_=w+(y<<4&4294967295|y>>>28),y=A+(_^w^x)+I[4]+1272893353&4294967295,A=_+(y<<11&4294967295|y>>>21),y=x+(A^_^w)+I[7]+4139469664&4294967295,x=A+(y<<16&4294967295|y>>>16),y=w+(x^A^_)+I[10]+3200236656&4294967295,w=x+(y<<23&4294967295|y>>>9),y=_+(w^x^A)+I[13]+681279174&4294967295,_=w+(y<<4&4294967295|y>>>28),y=A+(_^w^x)+I[0]+3936430074&4294967295,A=_+(y<<11&4294967295|y>>>21),y=x+(A^_^w)+I[3]+3572445317&4294967295,x=A+(y<<16&4294967295|y>>>16),y=w+(x^A^_)+I[6]+76029189&4294967295,w=x+(y<<23&4294967295|y>>>9),y=_+(w^x^A)+I[9]+3654602809&4294967295,_=w+(y<<4&4294967295|y>>>28),y=A+(_^w^x)+I[12]+3873151461&4294967295,A=_+(y<<11&4294967295|y>>>21),y=x+(A^_^w)+I[15]+530742520&4294967295,x=A+(y<<16&4294967295|y>>>16),y=w+(x^A^_)+I[2]+3299628645&4294967295,w=x+(y<<23&4294967295|y>>>9),y=_+(x^(w|~A))+I[0]+4096336452&4294967295,_=w+(y<<6&4294967295|y>>>26),y=A+(w^(_|~x))+I[7]+1126891415&4294967295,A=_+(y<<10&4294967295|y>>>22),y=x+(_^(A|~w))+I[14]+2878612391&4294967295,x=A+(y<<15&4294967295|y>>>17),y=w+(A^(x|~_))+I[5]+4237533241&4294967295,w=x+(y<<21&4294967295|y>>>11),y=_+(x^(w|~A))+I[12]+1700485571&4294967295,_=w+(y<<6&4294967295|y>>>26),y=A+(w^(_|~x))+I[3]+2399980690&4294967295,A=_+(y<<10&4294967295|y>>>22),y=x+(_^(A|~w))+I[10]+4293915773&4294967295,x=A+(y<<15&4294967295|y>>>17),y=w+(A^(x|~_))+I[1]+2240044497&4294967295,w=x+(y<<21&4294967295|y>>>11),y=_+(x^(w|~A))+I[8]+1873313359&4294967295,_=w+(y<<6&4294967295|y>>>26),y=A+(w^(_|~x))+I[15]+4264355552&4294967295,A=_+(y<<10&4294967295|y>>>22),y=x+(_^(A|~w))+I[6]+2734768916&4294967295,x=A+(y<<15&4294967295|y>>>17),y=w+(A^(x|~_))+I[13]+1309151649&4294967295,w=x+(y<<21&4294967295|y>>>11),y=_+(x^(w|~A))+I[4]+4149444226&4294967295,_=w+(y<<6&4294967295|y>>>26),y=A+(w^(_|~x))+I[11]+3174756917&4294967295,A=_+(y<<10&4294967295|y>>>22),y=x+(_^(A|~w))+I[2]+718787259&4294967295,x=A+(y<<15&4294967295|y>>>17),y=w+(A^(x|~_))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(x+(y<<21&4294967295|y>>>11))&4294967295,E.g[2]=E.g[2]+x&4294967295,E.g[3]=E.g[3]+A&4294967295}r.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var w=_-this.blockSize,I=this.B,x=this.h,A=0;A<_;){if(x==0)for(;A<=w;)s(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<_;)if(I[x++]=E.charCodeAt(A++),x==this.blockSize){s(this,I),x=0;break}}else for(;A<_;)if(I[x++]=E[A++],x==this.blockSize){s(this,I),x=0;break}}this.h=x,this.o+=_},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var w=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=w&255,w/=256;for(this.u(E),E=Array(16),_=w=0;4>_;++_)for(var I=0;32>I;I+=8)E[w++]=this.g[_]>>>I&255;return E};function i(E,_){var w=l;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=_(E)}function a(E,_){this.h=_;for(var w=[],I=!0,x=E.length-1;0<=x;x--){var A=E[x]|0;I&&A==_||(w[x]=A,I=!1)}this.g=w}var l={};function c(E){return-128<=E&&128>E?i(E,function(_){return new a([_|0],0>_?-1:0)}):new a([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return R(d(-E));for(var _=[],w=1,I=0;E>=w;I++)_[I]=E/w|0,w*=4294967296;return new a(_,0)}function f(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return R(f(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=d(Math.pow(_,8)),I=m,x=0;x<E.length;x+=8){var A=Math.min(8,E.length-x),y=parseInt(E.substring(x,x+A),_);8>A?(A=d(Math.pow(_,A)),I=I.j(A).add(d(y))):(I=I.j(w),I=I.add(d(y)))}return I}var m=c(0),v=c(1),T=c(16777216);n=a.prototype,n.m=function(){if(P(this))return-R(this).m();for(var E=0,_=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*_,_*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C(this))return"0";if(P(this))return"-"+R(this).toString(E);for(var _=d(Math.pow(E,6)),w=this,I="";;){var x=O(w,_).g;w=V(w,x.j(_));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=x,C(w))return A+I;for(;6>A.length;)A="0"+A;I=A+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function C(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function P(E){return E.h==-1}n.l=function(E){return E=V(this,E),P(E)?-1:C(E)?0:1};function R(E){for(var _=E.g.length,w=[],I=0;I<_;I++)w[I]=~E.g[I];return new a(w,~E.h).add(v)}n.abs=function(){return P(this)?R(this):this},n.add=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],I=0,x=0;x<=_;x++){var A=I+(this.i(x)&65535)+(E.i(x)&65535),y=(A>>>16)+(this.i(x)>>>16)+(E.i(x)>>>16);I=y>>>16,A&=65535,y&=65535,w[x]=y<<16|A}return new a(w,w[w.length-1]&-2147483648?-1:0)};function V(E,_){return E.add(R(_))}n.j=function(E){if(C(this)||C(E))return m;if(P(this))return P(E)?R(this).j(R(E)):R(R(this).j(E));if(P(E))return R(this.j(R(E)));if(0>this.l(T)&&0>E.l(T))return d(this.m()*E.m());for(var _=this.g.length+E.g.length,w=[],I=0;I<2*_;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var x=0;x<E.g.length;x++){var A=this.i(I)>>>16,y=this.i(I)&65535,q=E.i(x)>>>16,X=E.i(x)&65535;w[2*I+2*x]+=y*X,N(w,2*I+2*x),w[2*I+2*x+1]+=A*X,N(w,2*I+2*x+1),w[2*I+2*x+1]+=y*q,N(w,2*I+2*x+1),w[2*I+2*x+2]+=A*q,N(w,2*I+2*x+2)}for(I=0;I<_;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=_;I<2*_;I++)w[I]=0;return new a(w,0)};function N(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function S(E,_){this.g=E,this.h=_}function O(E,_){if(C(_))throw Error("division by zero");if(C(E))return new S(m,m);if(P(E))return _=O(R(E),_),new S(R(_.g),R(_.h));if(P(_))return _=O(E,R(_)),new S(R(_.g),_.h);if(30<E.g.length){if(P(E)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var w=v,I=_;0>=I.l(E);)w=B(w),I=B(I);var x=z(w,1),A=z(I,1);for(I=z(I,2),w=z(w,2);!C(I);){var y=A.add(I);0>=y.l(E)&&(x=x.add(w),A=y),I=z(I,1),w=z(w,1)}return _=V(E,x.j(_)),new S(x,_)}for(x=m;0<=E.l(_);){for(w=Math.max(1,Math.floor(E.m()/_.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),A=d(w),y=A.j(_);P(y)||0<y.l(E);)w-=I,A=d(w),y=A.j(_);C(A)&&(A=v),x=x.add(A),E=V(E,y)}return new S(x,E)}n.A=function(E){return O(this,E).h},n.and=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],I=0;I<_;I++)w[I]=this.i(I)&E.i(I);return new a(w,this.h&E.h)},n.or=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],I=0;I<_;I++)w[I]=this.i(I)|E.i(I);return new a(w,this.h|E.h)},n.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],I=0;I<_;I++)w[I]=this.i(I)^E.i(I);return new a(w,this.h^E.h)};function B(E){for(var _=E.g.length+1,w=[],I=0;I<_;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new a(w,E.h)}function z(E,_){var w=_>>5;_%=32;for(var I=E.g.length-w,x=[],A=0;A<I;A++)x[A]=0<_?E.i(A+w)>>>_|E.i(A+w+1)<<32-_:E.i(A+w);return new a(x,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lf=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,Rn=a}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});var Ks=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cf,$r,uf,ei,Na,hf,df,ff;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,p){return o==Array.prototype||o==Object.prototype||(o[u]=p.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ks=="object"&&Ks];for(var u=0;u<o.length;++u){var p=o[u];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function s(o,u){if(u)e:{var p=r;o=o.split(".");for(var g=0;g<o.length-1;g++){var k=o[g];if(!(k in p))break e;p=p[k]}o=o[o.length-1],g=p[o],u=u(g),u!=g&&u!=null&&e(p,o,{configurable:!0,writable:!0,value:u})}}function i(o,u){o instanceof String&&(o+="");var p=0,g=!1,k={next:function(){if(!g&&p<o.length){var D=p++;return{value:u(D,o[D]),done:!1}}return g=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}s("Array.prototype.values",function(o){return o||function(){return i(this,function(u,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function d(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function f(o,u,p){return o.call.apply(o.bind,arguments)}function m(o,u,p){if(!o)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,g),o.apply(u,k)}}return function(){return o.apply(u,arguments)}}function v(o,u,p){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,v.apply(null,arguments)}function T(o,u){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function C(o,u){function p(){}p.prototype=u.prototype,o.aa=u.prototype,o.prototype=new p,o.prototype.constructor=o,o.Qb=function(g,k,D){for(var F=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)F[oe-2]=arguments[oe];return u.prototype[k].apply(g,F)}}function P(o){const u=o.length;if(0<u){const p=Array(u);for(let g=0;g<u;g++)p[g]=o[g];return p}return[]}function R(o,u){for(let p=1;p<arguments.length;p++){const g=arguments[p];if(c(g)){const k=o.length||0,D=g.length||0;o.length=k+D;for(let F=0;F<D;F++)o[k+F]=g[F]}else o.push(g)}}class V{constructor(u,p){this.i=u,this.j=p,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function N(o){return/^[\s\xa0]*$/.test(o)}function S(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function O(o){return O[" "](o),o}O[" "]=function(){};var B=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function z(o,u,p){for(const g in o)u.call(p,o[g],g,o)}function E(o,u){for(const p in o)u.call(void 0,o[p],p,o)}function _(o){const u={};for(const p in o)u[p]=o[p];return u}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(o,u){let p,g;for(let k=1;k<arguments.length;k++){g=arguments[k];for(p in g)o[p]=g[p];for(let D=0;D<w.length;D++)p=w[D],Object.prototype.hasOwnProperty.call(g,p)&&(o[p]=g[p])}}function x(o){var u=1;o=o.split(":");const p=[];for(;0<u&&o.length;)p.push(o.shift()),u--;return o.length&&p.push(o.join(":")),p}function A(o){l.setTimeout(()=>{throw o},0)}function y(){var o=ue;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class q{constructor(){this.h=this.g=null}add(u,p){const g=X.get();g.set(u,p),this.h?this.h.next=g:this.g=g,this.h=g}}var X=new V(()=>new Re,o=>o.reset());class Re{constructor(){this.next=this.g=this.h=null}set(u,p){this.h=u,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ae=!1,ue=new q,ut=()=>{const o=l.Promise.resolve(void 0);ie=()=>{o.then(de)}};var de=()=>{for(var o;o=y();){try{o.h.call(o.g)}catch(p){A(p)}var u=X;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}ae=!1};function je(){this.s=this.s,this.C=this.C}je.prototype.s=!1,je.prototype.ma=function(){this.s||(this.s=!0,this.N())},je.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var Ze=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const p=()=>{};l.addEventListener("test",p,u),l.removeEventListener("test",p,u)}catch{}return o}();function Ve(o,u){if(ne.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var p=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(B){e:{try{O(u.nodeName);var k=!0;break e}catch{}k=!1}k||(u=null)}}else p=="mouseover"?u=o.fromElement:p=="mouseout"&&(u=o.toElement);this.relatedTarget=u,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Qe[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Ve.aa.h.call(this)}}C(Ve,ne);var Qe={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var et="closure_listenable_"+(1e6*Math.random()|0),vt=0;function ht(o,u,p,g,k){this.listener=o,this.proxy=null,this.src=u,this.type=p,this.capture=!!g,this.ha=k,this.key=++vt,this.da=this.fa=!1}function Mt(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function fn(o){this.src=o,this.g={},this.h=0}fn.prototype.add=function(o,u,p,g,k){var D=o.toString();o=this.g[D],o||(o=this.g[D]=[],this.h++);var F=Er(o,u,g,k);return-1<F?(u=o[F],p||(u.fa=!1)):(u=new ht(u,this.src,D,!!g,k),u.fa=p,o.push(u)),u};function pn(o,u){var p=u.type;if(p in o.g){var g=o.g[p],k=Array.prototype.indexOf.call(g,u,void 0),D;(D=0<=k)&&Array.prototype.splice.call(g,k,1),D&&(Mt(u),o.g[p].length==0&&(delete o.g[p],o.h--))}}function Er(o,u,p,g){for(var k=0;k<o.length;++k){var D=o[k];if(!D.da&&D.listener==u&&D.capture==!!p&&D.ha==g)return k}return-1}var Io="closure_lm_"+(1e6*Math.random()|0),Ao={};function hc(o,u,p,g,k){if(Array.isArray(u)){for(var D=0;D<u.length;D++)hc(o,u[D],p,g,k);return null}return p=pc(p),o&&o[et]?o.K(u,p,d(g)?!!g.capture:!!g,k):_m(o,u,p,!1,g,k)}function _m(o,u,p,g,k,D){if(!u)throw Error("Invalid event type");var F=d(k)?!!k.capture:!!k,oe=Ro(o);if(oe||(o[Io]=oe=new fn(o)),p=oe.add(u,p,g,F,D),p.proxy)return p;if(g=vm(),p.proxy=g,g.src=o,g.listener=p,o.addEventListener)Ze||(k=F),k===void 0&&(k=!1),o.addEventListener(u.toString(),g,k);else if(o.attachEvent)o.attachEvent(fc(u.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function vm(){function o(p){return u.call(o.src,o.listener,p)}const u=wm;return o}function dc(o,u,p,g,k){if(Array.isArray(u))for(var D=0;D<u.length;D++)dc(o,u[D],p,g,k);else g=d(g)?!!g.capture:!!g,p=pc(p),o&&o[et]?(o=o.i,u=String(u).toString(),u in o.g&&(D=o.g[u],p=Er(D,p,g,k),-1<p&&(Mt(D[p]),Array.prototype.splice.call(D,p,1),D.length==0&&(delete o.g[u],o.h--)))):o&&(o=Ro(o))&&(u=o.g[u.toString()],o=-1,u&&(o=Er(u,p,g,k)),(p=-1<o?u[o]:null)&&Co(p))}function Co(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[et])pn(u.i,o);else{var p=o.type,g=o.proxy;u.removeEventListener?u.removeEventListener(p,g,o.capture):u.detachEvent?u.detachEvent(fc(p),g):u.addListener&&u.removeListener&&u.removeListener(g),(p=Ro(u))?(pn(p,o),p.h==0&&(p.src=null,u[Io]=null)):Mt(o)}}}function fc(o){return o in Ao?Ao[o]:Ao[o]="on"+o}function wm(o,u){if(o.da)o=!0;else{u=new Ve(u,this);var p=o.listener,g=o.ha||o.src;o.fa&&Co(o),o=p.call(g,u)}return o}function Ro(o){return o=o[Io],o instanceof fn?o:null}var ko="__closure_events_fn_"+(1e9*Math.random()>>>0);function pc(o){return typeof o=="function"?o:(o[ko]||(o[ko]=function(u){return o.handleEvent(u)}),o[ko])}function ke(){je.call(this),this.i=new fn(this),this.M=this,this.F=null}C(ke,je),ke.prototype[et]=!0,ke.prototype.removeEventListener=function(o,u,p,g){dc(this,o,u,p,g)};function Me(o,u){var p,g=o.F;if(g)for(p=[];g;g=g.F)p.push(g);if(o=o.M,g=u.type||u,typeof u=="string")u=new ne(u,o);else if(u instanceof ne)u.target=u.target||o;else{var k=u;u=new ne(g,o),I(u,k)}if(k=!0,p)for(var D=p.length-1;0<=D;D--){var F=u.g=p[D];k=Rs(F,g,!0,u)&&k}if(F=u.g=o,k=Rs(F,g,!0,u)&&k,k=Rs(F,g,!1,u)&&k,p)for(D=0;D<p.length;D++)F=u.g=p[D],k=Rs(F,g,!1,u)&&k}ke.prototype.N=function(){if(ke.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var p=o.g[u],g=0;g<p.length;g++)Mt(p[g]);delete o.g[u],o.h--}}this.F=null},ke.prototype.K=function(o,u,p,g){return this.i.add(String(o),u,!1,p,g)},ke.prototype.L=function(o,u,p,g){return this.i.add(String(o),u,!0,p,g)};function Rs(o,u,p,g){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var k=!0,D=0;D<u.length;++D){var F=u[D];if(F&&!F.da&&F.capture==p){var oe=F.listener,Te=F.ha||F.src;F.fa&&pn(o.i,F),k=oe.call(Te,g)!==!1&&k}}return k&&!g.defaultPrevented}function mc(o,u,p){if(typeof o=="function")p&&(o=v(o,p));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function gc(o){o.g=mc(()=>{o.g=null,o.i&&(o.i=!1,gc(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Em extends je{constructor(u,p){super(),this.m=u,this.l=p,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:gc(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tr(o){je.call(this),this.h=o,this.g={}}C(Tr,je);var yc=[];function _c(o){z(o.g,function(u,p){this.g.hasOwnProperty(p)&&Co(u)},o),o.g={}}Tr.prototype.N=function(){Tr.aa.N.call(this),_c(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Po=l.JSON.stringify,Tm=l.JSON.parse,bm=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function So(){}So.prototype.h=null;function vc(o){return o.h||(o.h=o.i())}function wc(){}var br={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function No(){ne.call(this,"d")}C(No,ne);function Do(){ne.call(this,"c")}C(Do,ne);var mn={},Ec=null;function ks(){return Ec=Ec||new ke}mn.La="serverreachability";function Tc(o){ne.call(this,mn.La,o)}C(Tc,ne);function xr(o){const u=ks();Me(u,new Tc(u))}mn.STAT_EVENT="statevent";function bc(o,u){ne.call(this,mn.STAT_EVENT,o),this.stat=u}C(bc,ne);function Fe(o){const u=ks();Me(u,new bc(u,o))}mn.Ma="timingevent";function xc(o,u){ne.call(this,mn.Ma,o),this.size=u}C(xc,ne);function Ir(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function Ar(){this.g=!0}Ar.prototype.xa=function(){this.g=!1};function xm(o,u,p,g,k,D){o.info(function(){if(o.g)if(D)for(var F="",oe=D.split("&"),Te=0;Te<oe.length;Te++){var re=oe[Te].split("=");if(1<re.length){var Pe=re[0];re=re[1];var Se=Pe.split("_");F=2<=Se.length&&Se[1]=="type"?F+(Pe+"="+re+"&"):F+(Pe+"=redacted&")}}else F=null;else F=D;return"XMLHTTP REQ ("+g+") [attempt "+k+"]: "+u+`
`+p+`
`+F})}function Im(o,u,p,g,k,D,F){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+k+"]: "+u+`
`+p+`
`+D+" "+F})}function Bn(o,u,p,g){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Cm(o,p)+(g?" "+g:"")})}function Am(o,u){o.info(function(){return"TIMEOUT: "+u})}Ar.prototype.info=function(){};function Cm(o,u){if(!o.g)return u;if(!u)return null;try{var p=JSON.parse(u);if(p){for(o=0;o<p.length;o++)if(Array.isArray(p[o])){var g=p[o];if(!(2>g.length)){var k=g[1];if(Array.isArray(k)&&!(1>k.length)){var D=k[0];if(D!="noop"&&D!="stop"&&D!="close")for(var F=1;F<k.length;F++)k[F]=""}}}}return Po(p)}catch{return u}}var Ps={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ic={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Oo;function Ss(){}C(Ss,So),Ss.prototype.g=function(){return new XMLHttpRequest},Ss.prototype.i=function(){return{}},Oo=new Ss;function Ft(o,u,p,g){this.j=o,this.i=u,this.l=p,this.R=g||1,this.U=new Tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ac}function Ac(){this.i=null,this.g="",this.h=!1}var Cc={},Lo={};function jo(o,u,p){o.L=1,o.v=Ls(wt(u)),o.m=p,o.P=!0,Rc(o,null)}function Rc(o,u){o.F=Date.now(),Ns(o),o.A=wt(o.v);var p=o.A,g=o.R;Array.isArray(g)||(g=[String(g)]),Bc(p.i,"t",g),o.C=0,p=o.j.J,o.h=new Ac,o.g=ou(o.j,p?u:null,!o.m),0<o.O&&(o.M=new Em(v(o.Y,o,o.g),o.O)),u=o.U,p=o.g,g=o.ca;var k="readystatechange";Array.isArray(k)||(k&&(yc[0]=k.toString()),k=yc);for(var D=0;D<k.length;D++){var F=hc(p,k[D],g||u.handleEvent,!1,u.h||u);if(!F)break;u.g[F.key]=F}u=o.H?_(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),xr(),xm(o.i,o.u,o.A,o.l,o.R,o.m)}Ft.prototype.ca=function(o){o=o.target;const u=this.M;u&&Et(o)==3?u.j():this.Y(o)},Ft.prototype.Y=function(o){try{if(o==this.g)e:{const Se=Et(this.g);var u=this.g.Ba();const Hn=this.g.Z();if(!(3>Se)&&(Se!=3||this.g&&(this.h.h||this.g.oa()||Qc(this.g)))){this.J||Se!=4||u==7||(u==8||0>=Hn?xr(3):xr(2)),Vo(this);var p=this.g.Z();this.X=p;t:if(kc(this)){var g=Qc(this.g);o="";var k=g.length,D=Et(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),Cr(this);var F="";break t}this.h.i=new l.TextDecoder}for(u=0;u<k;u++)this.h.h=!0,o+=this.h.i.decode(g[u],{stream:!(D&&u==k-1)});g.length=0,this.h.g+=o,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=p==200,Im(this.i,this.u,this.A,this.l,this.R,Se,p),this.o){if(this.T&&!this.K){t:{if(this.g){var oe,Te=this.g;if((oe=Te.g?Te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(oe)){var re=oe;break t}}re=null}if(p=re)Bn(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mo(this,p);else{this.o=!1,this.s=3,Fe(12),gn(this),Cr(this);break e}}if(this.P){p=!0;let tt;for(;!this.J&&this.C<F.length;)if(tt=Rm(this,F),tt==Lo){Se==4&&(this.s=4,Fe(14),p=!1),Bn(this.i,this.l,null,"[Incomplete Response]");break}else if(tt==Cc){this.s=4,Fe(15),Bn(this.i,this.l,F,"[Invalid Chunk]"),p=!1;break}else Bn(this.i,this.l,tt,null),Mo(this,tt);if(kc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Se!=4||F.length!=0||this.h.h||(this.s=1,Fe(16),p=!1),this.o=this.o&&p,!p)Bn(this.i,this.l,F,"[Invalid Chunked Response]"),gn(this),Cr(this);else if(0<F.length&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.ba&&!Pe.M&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),qo(Pe),Pe.M=!0,Fe(11))}}else Bn(this.i,this.l,F,null),Mo(this,F);Se==4&&gn(this),this.o&&!this.J&&(Se==4?nu(this.j,this):(this.o=!1,Ns(this)))}else Hm(this.g),p==400&&0<F.indexOf("Unknown SID")?(this.s=3,Fe(12)):(this.s=0,Fe(13)),gn(this),Cr(this)}}}catch{}finally{}};function kc(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Rm(o,u){var p=o.C,g=u.indexOf(`
`,p);return g==-1?Lo:(p=Number(u.substring(p,g)),isNaN(p)?Cc:(g+=1,g+p>u.length?Lo:(u=u.slice(g,g+p),o.C=g+p,u)))}Ft.prototype.cancel=function(){this.J=!0,gn(this)};function Ns(o){o.S=Date.now()+o.I,Pc(o,o.I)}function Pc(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Ir(v(o.ba,o),u)}function Vo(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Ft.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Am(this.i,this.A),this.L!=2&&(xr(),Fe(17)),gn(this),this.s=2,Cr(this)):Pc(this,this.S-o)};function Cr(o){o.j.G==0||o.J||nu(o.j,o)}function gn(o){Vo(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,_c(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function Mo(o,u){try{var p=o.j;if(p.G!=0&&(p.g==o||Fo(p.h,o))){if(!o.K&&Fo(p.h,o)&&p.G==3){try{var g=p.Da.g.parse(u)}catch{g=null}if(Array.isArray(g)&&g.length==3){var k=g;if(k[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<o.F)$s(p),Fs(p);else break e;zo(p),Fe(18)}}else p.za=k[1],0<p.za-p.T&&37500>k[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ir(v(p.Za,p),6e3));if(1>=Dc(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else _n(p,11)}else if((o.K||p.g==o)&&$s(p),!N(u))for(k=p.Da.g.parse(u),u=0;u<k.length;u++){let re=k[u];if(p.T=re[0],re=re[1],p.G==2)if(re[0]=="c"){p.K=re[1],p.ia=re[2];const Pe=re[3];Pe!=null&&(p.la=Pe,p.j.info("VER="+p.la));const Se=re[4];Se!=null&&(p.Aa=Se,p.j.info("SVER="+p.Aa));const Hn=re[5];Hn!=null&&typeof Hn=="number"&&0<Hn&&(g=1.5*Hn,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;const tt=o.g;if(tt){const zs=tt.g?tt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zs){var D=g.h;D.g||zs.indexOf("spdy")==-1&&zs.indexOf("quic")==-1&&zs.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Uo(D,D.h),D.h=null))}if(g.D){const Ho=tt.g?tt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(g.ya=Ho,le(g.I,g.D,Ho))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-o.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var F=o;if(g.qa=iu(g,g.J?g.ia:null,g.W),F.K){Oc(g.h,F);var oe=F,Te=g.L;Te&&(oe.I=Te),oe.B&&(Vo(oe),Ns(oe)),g.g=F}else eu(g);0<p.i.length&&Us(p)}else re[0]!="stop"&&re[0]!="close"||_n(p,7);else p.G==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?_n(p,7):Bo(p):re[0]!="noop"&&p.l&&p.l.ta(re),p.v=0)}}xr(4)}catch{}}var km=class{constructor(o,u){this.g=o,this.map=u}};function Sc(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nc(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Dc(o){return o.h?1:o.g?o.g.size:0}function Fo(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Uo(o,u){o.g?o.g.add(u):o.h=u}function Oc(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Sc.prototype.cancel=function(){if(this.i=Lc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Lc(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const p of o.g.values())u=u.concat(p.D);return u}return P(o.i)}function Pm(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],p=o.length,g=0;g<p;g++)u.push(o[g]);return u}u=[],p=0;for(g in o)u[p++]=o[g];return u}function Sm(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var p=0;p<o;p++)u.push(p);return u}u=[],p=0;for(const g in o)u[p++]=g;return u}}}function jc(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var p=Sm(o),g=Pm(o),k=g.length,D=0;D<k;D++)u.call(void 0,g[D],p&&p[D],o)}var Vc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nm(o,u){if(o){o=o.split("&");for(var p=0;p<o.length;p++){var g=o[p].indexOf("="),k=null;if(0<=g){var D=o[p].substring(0,g);k=o[p].substring(g+1)}else D=o[p];u(D,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function yn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof yn){this.h=o.h,Ds(this,o.j),this.o=o.o,this.g=o.g,Os(this,o.s),this.l=o.l;var u=o.i,p=new Pr;p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),Mc(this,p),this.m=o.m}else o&&(u=String(o).match(Vc))?(this.h=!1,Ds(this,u[1]||"",!0),this.o=Rr(u[2]||""),this.g=Rr(u[3]||"",!0),Os(this,u[4]),this.l=Rr(u[5]||"",!0),Mc(this,u[6]||"",!0),this.m=Rr(u[7]||"")):(this.h=!1,this.i=new Pr(null,this.h))}yn.prototype.toString=function(){var o=[],u=this.j;u&&o.push(kr(u,Fc,!0),":");var p=this.g;return(p||u=="file")&&(o.push("//"),(u=this.o)&&o.push(kr(u,Fc,!0),"@"),o.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&o.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&o.push("/"),o.push(kr(p,p.charAt(0)=="/"?Lm:Om,!0))),(p=this.i.toString())&&o.push("?",p),(p=this.m)&&o.push("#",kr(p,Vm)),o.join("")};function wt(o){return new yn(o)}function Ds(o,u,p){o.j=p?Rr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Os(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function Mc(o,u,p){u instanceof Pr?(o.i=u,Mm(o.i,o.h)):(p||(u=kr(u,jm)),o.i=new Pr(u,o.h))}function le(o,u,p){o.i.set(u,p)}function Ls(o){return le(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Rr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function kr(o,u,p){return typeof o=="string"?(o=encodeURI(o).replace(u,Dm),p&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Dm(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Fc=/[#\/\?@]/g,Om=/[#\?:]/g,Lm=/[#\?]/g,jm=/[#\?@]/g,Vm=/#/g;function Pr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Ut(o){o.g||(o.g=new Map,o.h=0,o.i&&Nm(o.i,function(u,p){o.add(decodeURIComponent(u.replace(/\+/g," ")),p)}))}n=Pr.prototype,n.add=function(o,u){Ut(this),this.i=null,o=zn(this,o);var p=this.g.get(o);return p||this.g.set(o,p=[]),p.push(u),this.h+=1,this};function Uc(o,u){Ut(o),u=zn(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function $c(o,u){return Ut(o),u=zn(o,u),o.g.has(u)}n.forEach=function(o,u){Ut(this),this.g.forEach(function(p,g){p.forEach(function(k){o.call(u,k,g,this)},this)},this)},n.na=function(){Ut(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),p=[];for(let g=0;g<u.length;g++){const k=o[g];for(let D=0;D<k.length;D++)p.push(u[g])}return p},n.V=function(o){Ut(this);let u=[];if(typeof o=="string")$c(this,o)&&(u=u.concat(this.g.get(zn(this,o))));else{o=Array.from(this.g.values());for(let p=0;p<o.length;p++)u=u.concat(o[p])}return u},n.set=function(o,u){return Ut(this),this.i=null,o=zn(this,o),$c(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Bc(o,u,p){Uc(o,u),0<p.length&&(o.i=null,o.g.set(zn(o,u),P(p)),o.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var p=0;p<u.length;p++){var g=u[p];const D=encodeURIComponent(String(g)),F=this.V(g);for(g=0;g<F.length;g++){var k=D;F[g]!==""&&(k+="="+encodeURIComponent(String(F[g]))),o.push(k)}}return this.i=o.join("&")};function zn(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Mm(o,u){u&&!o.j&&(Ut(o),o.i=null,o.g.forEach(function(p,g){var k=g.toLowerCase();g!=k&&(Uc(this,g),Bc(this,k,p))},o)),o.j=u}function Fm(o,u){const p=new Ar;if(l.Image){const g=new Image;g.onload=T($t,p,"TestLoadImage: loaded",!0,u,g),g.onerror=T($t,p,"TestLoadImage: error",!1,u,g),g.onabort=T($t,p,"TestLoadImage: abort",!1,u,g),g.ontimeout=T($t,p,"TestLoadImage: timeout",!1,u,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else u(!1)}function Um(o,u){const p=new Ar,g=new AbortController,k=setTimeout(()=>{g.abort(),$t(p,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:g.signal}).then(D=>{clearTimeout(k),D.ok?$t(p,"TestPingServer: ok",!0,u):$t(p,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(k),$t(p,"TestPingServer: error",!1,u)})}function $t(o,u,p,g,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),g(p)}catch{}}function $m(){this.g=new bm}function Bm(o,u,p){const g=p||"";try{jc(o,function(k,D){let F=k;d(k)&&(F=Po(k)),u.push(g+D+"="+encodeURIComponent(F))})}catch(k){throw u.push(g+"type="+encodeURIComponent("_badmap")),k}}function js(o){this.l=o.Ub||null,this.j=o.eb||!1}C(js,So),js.prototype.g=function(){return new Vs(this.l,this.j)},js.prototype.i=function(o){return function(){return o}}({});function Vs(o,u){ke.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Vs,ke),n=Vs.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,Nr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sr(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Nr(this)),this.g&&(this.readyState=3,Nr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zc(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function zc(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Sr(this):Nr(this),this.readyState==3&&zc(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,Sr(this))},n.Qa=function(o){this.g&&(this.response=o,Sr(this))},n.ga=function(){this.g&&Sr(this)};function Sr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Nr(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var p=u.next();!p.done;)p=p.value,o.push(p[0]+": "+p[1]),p=u.next();return o.join(`\r
`)};function Nr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function qc(o){let u="";return z(o,function(p,g){u+=g,u+=":",u+=p,u+=`\r
`}),u}function $o(o,u,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=qc(p),typeof o=="string"?p!=null&&encodeURIComponent(String(p)):le(o,u,p))}function me(o){ke.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(me,ke);var zm=/^https?$/i,qm=["POST","PUT"];n=me.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oo.g(),this.v=this.o?vc(this.o):vc(Oo),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(D){Hc(this,D);return}if(o=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var k in g)p.set(k,g[k]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const D of g.keys())p.set(D,g.get(D));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(D=>D.toLowerCase()=="content-type"),k=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(qm,u,void 0))||g||k||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,F]of p)this.g.setRequestHeader(D,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gc(this),this.u=!0,this.g.send(o),this.u=!1}catch(D){Hc(this,D)}};function Hc(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Wc(o),Ms(o)}function Wc(o){o.A||(o.A=!0,Me(o,"complete"),Me(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Me(this,"complete"),Me(this,"abort"),Ms(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ms(this,!0)),me.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Kc(this):this.bb())},n.bb=function(){Kc(this)};function Kc(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Et(o)!=4||o.Z()!=2)){if(o.u&&Et(o)==4)mc(o.Ea,0,o);else if(Me(o,"readystatechange"),Et(o)==4){o.h=!1;try{const F=o.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var p;if(!(p=u)){var g;if(g=F===0){var k=String(o.D).match(Vc)[1]||null;!k&&l.self&&l.self.location&&(k=l.self.location.protocol.slice(0,-1)),g=!zm.test(k?k.toLowerCase():"")}p=g}if(p)Me(o,"complete"),Me(o,"success");else{o.m=6;try{var D=2<Et(o)?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.Z()+"]",Wc(o)}}finally{Ms(o)}}}}function Ms(o,u){if(o.g){Gc(o);const p=o.g,g=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||Me(o,"ready");try{p.onreadystatechange=g}catch{}}}function Gc(o){o.I&&(l.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function Et(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<Et(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Tm(u)}};function Qc(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Hm(o){const u={};o=(o.g&&2<=Et(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(N(o[g]))continue;var p=x(o[g]);const k=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const D=u[k]||[];u[k]=D,D.push(p)}E(u,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dr(o,u,p){return p&&p.internalChannelParams&&p.internalChannelParams[o]||u}function Yc(o){this.Aa=0,this.i=[],this.j=new Ar,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Dr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Dr("baseRetryDelayMs",5e3,o),this.cb=Dr("retryDelaySeedMs",1e4,o),this.Wa=Dr("forwardChannelMaxRetries",2,o),this.wa=Dr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Sc(o&&o.concurrentRequestLimit),this.Da=new $m,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Yc.prototype,n.la=8,n.G=1,n.connect=function(o,u,p,g){Fe(0),this.W=o,this.H=u||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=iu(this,null,this.W),Us(this)};function Bo(o){if(Xc(o),o.G==3){var u=o.U++,p=wt(o.I);if(le(p,"SID",o.K),le(p,"RID",u),le(p,"TYPE","terminate"),Or(o,p),u=new Ft(o,o.j,u),u.L=2,u.v=Ls(wt(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=u.v,p=!0),p||(u.g=ou(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Ns(u)}su(o)}function Fs(o){o.g&&(qo(o),o.g.cancel(),o.g=null)}function Xc(o){Fs(o),o.u&&(l.clearTimeout(o.u),o.u=null),$s(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Us(o){if(!Nc(o.h)&&!o.s){o.s=!0;var u=o.Ga;ie||ut(),ae||(ie(),ae=!0),ue.add(u,o),o.B=0}}function Wm(o,u){return Dc(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Ir(v(o.Ga,o,u),ru(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const k=new Ft(this,this.j,o);let D=this.o;if(this.S&&(D?(D=_(D),I(D,this.S)):D=this.S),this.m!==null||this.O||(k.H=D,D=null),this.P)e:{for(var u=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(u+=g,4096<u){u=p;break e}if(u===4096||p===this.i.length-1){u=p+1;break e}}u=1e3}else u=1e3;u=Zc(this,k,u),p=wt(this.I),le(p,"RID",o),le(p,"CVER",22),this.D&&le(p,"X-HTTP-Session-Id",this.D),Or(this,p),D&&(this.O?u="headers="+encodeURIComponent(String(qc(D)))+"&"+u:this.m&&$o(p,this.m,D)),Uo(this.h,k),this.Ua&&le(p,"TYPE","init"),this.P?(le(p,"$req",u),le(p,"SID","null"),k.T=!0,jo(k,p,null)):jo(k,p,u),this.G=2}}else this.G==3&&(o?Jc(this,o):this.i.length==0||Nc(this.h)||Jc(this))};function Jc(o,u){var p;u?p=u.l:p=o.U++;const g=wt(o.I);le(g,"SID",o.K),le(g,"RID",p),le(g,"AID",o.T),Or(o,g),o.m&&o.o&&$o(g,o.m,o.o),p=new Ft(o,o.j,p,o.B+1),o.m===null&&(p.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Zc(o,p,1e3),p.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Uo(o.h,p),jo(p,g,u)}function Or(o,u){o.H&&z(o.H,function(p,g){le(u,g,p)}),o.l&&jc({},function(p,g){le(u,g,p)})}function Zc(o,u,p){p=Math.min(o.i.length,p);var g=o.l?v(o.l.Na,o.l,o):null;e:{var k=o.i;let D=-1;for(;;){const F=["count="+p];D==-1?0<p?(D=k[0].g,F.push("ofs="+D)):D=0:F.push("ofs="+D);let oe=!0;for(let Te=0;Te<p;Te++){let re=k[Te].g;const Pe=k[Te].map;if(re-=D,0>re)D=Math.max(0,k[Te].g-100),oe=!1;else try{Bm(Pe,F,"req"+re+"_")}catch{g&&g(Pe)}}if(oe){g=F.join("&");break e}}}return o=o.i.splice(0,p),u.D=o,g}function eu(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;ie||ut(),ae||(ie(),ae=!0),ue.add(u,o),o.v=0}}function zo(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Ir(v(o.Fa,o),ru(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,tu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Ir(v(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Fe(10),Fs(this),tu(this))};function qo(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function tu(o){o.g=new Ft(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=wt(o.qa);le(u,"RID","rpc"),le(u,"SID",o.K),le(u,"AID",o.T),le(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&le(u,"TO",o.ja),le(u,"TYPE","xmlhttp"),Or(o,u),o.m&&o.o&&$o(u,o.m,o.o),o.L&&(o.g.I=o.L);var p=o.g;o=o.ia,p.L=1,p.v=Ls(wt(u)),p.m=null,p.P=!0,Rc(p,o)}n.Za=function(){this.C!=null&&(this.C=null,Fs(this),zo(this),Fe(19))};function $s(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function nu(o,u){var p=null;if(o.g==u){$s(o),qo(o),o.g=null;var g=2}else if(Fo(o.h,u))p=u.D,Oc(o.h,u),g=1;else return;if(o.G!=0){if(u.o)if(g==1){p=u.m?u.m.length:0,u=Date.now()-u.F;var k=o.B;g=ks(),Me(g,new xc(g,p)),Us(o)}else eu(o);else if(k=u.s,k==3||k==0&&0<u.X||!(g==1&&Wm(o,u)||g==2&&zo(o)))switch(p&&0<p.length&&(u=o.h,u.i=u.i.concat(p)),k){case 1:_n(o,5);break;case 4:_n(o,10);break;case 3:_n(o,6);break;default:_n(o,2)}}}function ru(o,u){let p=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(p*=2),p*u}function _n(o,u){if(o.j.info("Error code "+u),u==2){var p=v(o.fb,o),g=o.Xa;const k=!g;g=new yn(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ds(g,"https"),Ls(g),k?Fm(g.toString(),p):Um(g.toString(),p)}else Fe(2);o.G=0,o.l&&o.l.sa(u),su(o),Xc(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Fe(2)):(this.j.info("Failed to ping google.com"),Fe(1))};function su(o){if(o.G=0,o.ka=[],o.l){const u=Lc(o.h);(u.length!=0||o.i.length!=0)&&(R(o.ka,u),R(o.ka,o.i),o.h.i.length=0,P(o.i),o.i.length=0),o.l.ra()}}function iu(o,u,p){var g=p instanceof yn?wt(p):new yn(p);if(g.g!="")u&&(g.g=u+"."+g.g),Os(g,g.s);else{var k=l.location;g=k.protocol,u=u?u+"."+k.hostname:k.hostname,k=+k.port;var D=new yn(null);g&&Ds(D,g),u&&(D.g=u),k&&Os(D,k),p&&(D.l=p),g=D}return p=o.D,u=o.ya,p&&u&&le(g,p,u),le(g,"VER",o.la),Or(o,g),g}function ou(o,u,p){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new me(new js({eb:p})):new me(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function au(){}n=au.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Bs(){}Bs.prototype.g=function(o,u){return new We(o,u)};function We(o,u){ke.call(this),this.g=new Yc(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!N(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!N(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new qn(this)}C(We,ke),We.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},We.prototype.close=function(){Bo(this.g)},We.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var p={};p.__data__=o,o=p}else this.u&&(p={},p.__data__=Po(o),o=p);u.i.push(new km(u.Ya++,o)),u.G==3&&Us(u)},We.prototype.N=function(){this.g.l=null,delete this.j,Bo(this.g),delete this.g,We.aa.N.call(this)};function lu(o){No.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(const p in u){o=p;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}C(lu,No);function cu(){Do.call(this),this.status=1}C(cu,Do);function qn(o){this.g=o}C(qn,au),qn.prototype.ua=function(){Me(this.g,"a")},qn.prototype.ta=function(o){Me(this.g,new lu(o))},qn.prototype.sa=function(o){Me(this.g,new cu)},qn.prototype.ra=function(){Me(this.g,"b")},Bs.prototype.createWebChannel=Bs.prototype.g,We.prototype.send=We.prototype.o,We.prototype.open=We.prototype.m,We.prototype.close=We.prototype.close,ff=function(){return new Bs},df=function(){return ks()},hf=mn,Na={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ps.NO_ERROR=0,Ps.TIMEOUT=8,Ps.HTTP_ERROR=6,ei=Ps,Ic.COMPLETE="complete",uf=Ic,wc.EventType=br,br.OPEN="a",br.CLOSE="b",br.ERROR="c",br.MESSAGE="d",ke.prototype.listen=ke.prototype.K,$r=wc,me.prototype.listenOnce=me.prototype.L,me.prototype.getLastError=me.prototype.Ka,me.prototype.getLastErrorCode=me.prototype.Ba,me.prototype.getStatus=me.prototype.Z,me.prototype.getResponseJson=me.prototype.Oa,me.prototype.getResponseText=me.prototype.oa,me.prototype.send=me.prototype.ea,me.prototype.setWithCredentials=me.prototype.Ha,cf=me}).apply(typeof Ks<"u"?Ks:typeof self<"u"?self:typeof window<"u"?window:{});const Wu="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}De.UNAUTHENTICATED=new De(null),De.GOOGLE_CREDENTIALS=new De("google-credentials-uid"),De.FIRST_PARTY=new De("first-party-uid"),De.MOCK_USER=new De("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mr="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn=new cl("@firebase/firestore");function Kn(){return Dn.logLevel}function U(n,...e){if(Dn.logLevel<=J.DEBUG){const t=e.map(dl);Dn.debug(`Firestore (${mr}): ${n}`,...t)}}function Ot(n,...e){if(Dn.logLevel<=J.ERROR){const t=e.map(dl);Dn.error(`Firestore (${mr}): ${n}`,...t)}}function ir(n,...e){if(Dn.logLevel<=J.WARN){const t=e.map(dl);Dn.warn(`Firestore (${mr}): ${n}`,...t)}}function dl(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(n="Unexpected state"){const e=`FIRESTORE (${mr}) INTERNAL ASSERTION FAILED: `+n;throw Ot(e),new Error(e)}function se(n,e){n||K()}function Q(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Vt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(De.UNAUTHENTICATED))}shutdown(){}}class fw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class pw{constructor(e){this.t=e,this.currentUser=De.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){se(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let i=new kt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new kt,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new kt)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(se(typeof r.accessToken=="string"),new pf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return se(e===null||typeof e=="string"),new De(e)}}class mw{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=De.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class gw{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new mw(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(De.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _w{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){se(this.o===void 0);const r=i=>{i.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,U("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(se(typeof t.token=="string"),this.R=t.token,new yw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=vw(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%e.length))}return r}}function ee(n,e){return n<e?-1:n>e?1:0}function or(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ye(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new $(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{static fromTimestamp(e){return new G(e)}static min(){return new G(new ye(0,0))}static max(){return new G(new ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(),r===void 0?r=e.length-t:r>e.length-t&&K(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ss.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ss?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=e.get(s),a=t.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ce extends ss{construct(e,t,r){return new ce(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new ce(t)}static emptyPath(){return new ce([])}}const ww=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ie extends ss{construct(e,t,r){return new Ie(e,t,r)}static isValidIdentifier(e){return ww.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ie.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ie(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new $(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new $(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new $(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new $(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ie(t)}static emptyPath(){return new Ie([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.path=e}static fromPath(e){return new H(ce.fromString(e))}static fromName(e){return new H(ce.fromString(e).popFirst(5))}static empty(){return new H(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ce.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new ce(e.slice()))}}function Ew(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=G.fromTimestamp(r===1e9?new ye(t+1,0):new ye(t,r));return new tn(s,H.empty(),e)}function Tw(n){return new tn(n.readTime,n.key,-1)}class tn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new tn(G.min(),H.empty(),-1)}static max(){return new tn(G.max(),H.empty(),-1)}}function bw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=H.comparator(n.documentKey,e.documentKey),t!==0?t:ee(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Iw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gr(n){if(n.code!==j.FAILED_PRECONDITION||n.message!==xw)throw n;U("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):L.reject(t)}static resolve(e){return new L((t,r)=>{t(e)})}static reject(e){return new L((t,r)=>{r(e)})}static waitFor(e){return new L((t,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&t()},c=>r(c))}),a=!0,i===s&&t()})}static or(e){let t=L.resolve(!1);for(const r of e)t=t.next(s=>s?L.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,i)=>{r.push(t.call(this,s,i))}),this.waitFor(r)}static mapArray(e,t){return new L((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;t(e[d]).next(f=>{a[d]=f,++l,l===i&&r(a)},f=>s(f))}})}static doWhile(e,t){return new L((r,s)=>{const i=()=>{e()===!0?t().next(()=>{i()},s):r()};i()})}}function Aw(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function yr(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}io.oe=-1;function oo(n){return n==null}function Ii(n){return n===0&&1/n==-1/0}function Cw(n){return typeof n=="number"&&Number.isInteger(n)&&!Ii(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ku(e)),e=kw(n.get(t),e);return Ku(e)}function kw(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case"":t+="";break;default:t+=i}}return t}function Ku(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Vn(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gf(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e,t){this.comparator=e,this.root=t||xe.EMPTY}insert(e,t){return new pe(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xe.BLACK,null,null))}remove(e){return new pe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xe.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gs(this.root,e,this.comparator,!0)}}class Gs{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xe{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??xe.RED,this.left=s??xe.EMPTY,this.right=i??xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new xe(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return xe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return xe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();const e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}}xe.EMPTY=null,xe.RED=!0,xe.BLACK=!1;xe.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,t,r,s,i){return this}insert(e,t,r){return new xe(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.comparator=e,this.data=new pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qu(this.data.getIterator())}getIteratorFrom(e){return new Qu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof we)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new we(this.comparator);return t.data=e,t}}class Qu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.fields=e,e.sort(Ie.comparator)}static empty(){return new it([])}unionWith(e){let t=new we(Ie.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new it(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return or(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new yf("Invalid base64 string: "+i):i}}(e);return new Ae(t)}static fromUint8Array(e){const t=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Ae(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ae.EMPTY_BYTE_STRING=new Ae("");const Pw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nn(n){if(se(!!n),typeof n=="string"){let e=0;const t=Pw.exec(n);if(se(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ge(n.seconds),nanos:ge(n.nanos)}}function ge(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function rn(n){return typeof n=="string"?Ae.fromBase64String(n):Ae.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function ao(n){const e=n.mapValue.fields.__previous_value__;return fl(e)?ao(e):e}function is(n){const e=nn(n.mapValue.fields.__local_write_time__.timestampValue);return new ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,t,r,s,i,a,l,c,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d}}class os{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new os("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof os&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function sn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fl(n)?4:Dw(n)?9007199254740991:Nw(n)?10:11:K()}function yt(n,e){if(n===e)return!0;const t=sn(n);if(t!==sn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return is(n).isEqual(is(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=nn(s.timestampValue),l=nn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,i){return rn(s.bytesValue).isEqual(rn(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,i){return ge(s.geoPointValue.latitude)===ge(i.geoPointValue.latitude)&&ge(s.geoPointValue.longitude)===ge(i.geoPointValue.longitude)}(n,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ge(s.integerValue)===ge(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=ge(s.doubleValue),l=ge(i.doubleValue);return a===l?Ii(a)===Ii(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return or(n.arrayValue.values||[],e.arrayValue.values||[],yt);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Gu(a)!==Gu(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!yt(a[c],l[c])))return!1;return!0}(n,e);default:return K()}}function as(n,e){return(n.values||[]).find(t=>yt(t,e))!==void 0}function ar(n,e){if(n===e)return 0;const t=sn(n),r=sn(e);if(t!==r)return ee(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ee(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=ge(i.integerValue||i.doubleValue),c=ge(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,e);case 3:return Yu(n.timestampValue,e.timestampValue);case 4:return Yu(is(n),is(e));case 5:return ee(n.stringValue,e.stringValue);case 6:return function(i,a){const l=rn(i),c=rn(a);return l.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const f=ee(l[d],c[d]);if(f!==0)return f}return ee(l.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=ee(ge(i.latitude),ge(a.latitude));return l!==0?l:ee(ge(i.longitude),ge(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Xu(n.arrayValue,e.arrayValue);case 10:return function(i,a){var l,c,d,f;const m=i.fields||{},v=a.fields||{},T=(l=m.value)===null||l===void 0?void 0:l.arrayValue,C=(c=v.value)===null||c===void 0?void 0:c.arrayValue,P=ee(((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0,((f=C==null?void 0:C.values)===null||f===void 0?void 0:f.length)||0);return P!==0?P:Xu(T,C)}(n.mapValue,e.mapValue);case 11:return function(i,a){if(i===Qs.mapValue&&a===Qs.mapValue)return 0;if(i===Qs.mapValue)return 1;if(a===Qs.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=a.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const v=ee(c[m],f[m]);if(v!==0)return v;const T=ar(l[c[m]],d[f[m]]);if(T!==0)return T}return ee(c.length,f.length)}(n.mapValue,e.mapValue);default:throw K()}}function Yu(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ee(n,e);const t=nn(n),r=nn(e),s=ee(t.seconds,r.seconds);return s!==0?s:ee(t.nanos,r.nanos)}function Xu(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=ar(t[s],r[s]);if(i)return i}return ee(t.length,r.length)}function lr(n){return Da(n)}function Da(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=nn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return rn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return H.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=Da(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Da(t.fields[a])}`;return s+"}"}(n.mapValue):K()}function ti(n){switch(sn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ao(n);return e?16+ti(e):16;case 5:return 2*n.stringValue.length;case 6:return rn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+ti(i),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Vn(r.fields,(i,a)=>{s+=i.length+ti(a)}),s}(n.mapValue);default:throw K()}}function Ju(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Oa(n){return!!n&&"integerValue"in n}function pl(n){return!!n&&"arrayValue"in n}function Zu(n){return!!n&&"nullValue"in n}function eh(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ni(n){return!!n&&"mapValue"in n}function Nw(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Kr(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Vn(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Kr(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Kr(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Dw(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.value=e}static empty(){return new Ye({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ni(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kr(t)}setAll(e){let t=Ie.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,r,s),r={},s=[],t=l.popLast()}a?r[l.lastSegment()]=Kr(a):s.push(l.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());ni(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];ni(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Vn(t,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ye(Kr(this.value))}}function _f(n){const e=[];return Vn(n.fields,(t,r)=>{const s=new Ie([t]);if(ni(r)){const i=_f(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new it(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,t,r,s,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Oe(e,0,G.min(),G.min(),G.min(),Ye.empty(),0)}static newFoundDocument(e,t,r,s){return new Oe(e,1,t,G.min(),r,s,0)}static newNoDocument(e,t){return new Oe(e,2,t,G.min(),G.min(),Ye.empty(),0)}static newUnknownDocument(e,t){return new Oe(e,3,t,G.min(),G.min(),Ye.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ye.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ye.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Oe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Oe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,t){this.position=e,this.inclusive=t}}function th(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],a=n.position[s];if(i.field.isKeyField()?r=H.comparator(H.fromName(a.referenceValue),t.key):r=ar(a,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function nh(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yt(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ow(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{}class ve extends vf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new jw(e,t,r):t==="array-contains"?new Fw(e,r):t==="in"?new Uw(e,r):t==="not-in"?new $w(e,r):t==="array-contains-any"?new Bw(e,r):new ve(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Vw(e,r):new Mw(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ar(t,this.value)):t!==null&&sn(this.value)===sn(t)&&this.matchesComparison(ar(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lt extends vf{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new lt(e,t)}matches(e){return wf(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function wf(n){return n.op==="and"}function Ef(n){return Lw(n)&&wf(n)}function Lw(n){for(const e of n.filters)if(e instanceof lt)return!1;return!0}function La(n){if(n instanceof ve)return n.field.canonicalString()+n.op.toString()+lr(n.value);if(Ef(n))return n.filters.map(e=>La(e)).join(",");{const e=n.filters.map(t=>La(t)).join(",");return`${n.op}(${e})`}}function Tf(n,e){return n instanceof ve?function(r,s){return s instanceof ve&&r.op===s.op&&r.field.isEqual(s.field)&&yt(r.value,s.value)}(n,e):n instanceof lt?function(r,s){return s instanceof lt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&Tf(a,s.filters[l]),!0):!1}(n,e):void K()}function bf(n){return n instanceof ve?function(t){return`${t.field.canonicalString()} ${t.op} ${lr(t.value)}`}(n):n instanceof lt?function(t){return t.op.toString()+" {"+t.getFilters().map(bf).join(" ,")+"}"}(n):"Filter"}class jw extends ve{constructor(e,t,r){super(e,t,r),this.key=H.fromName(r.referenceValue)}matches(e){const t=H.comparator(e.key,this.key);return this.matchesComparison(t)}}class Vw extends ve{constructor(e,t){super(e,"in",t),this.keys=xf("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Mw extends ve{constructor(e,t){super(e,"not-in",t),this.keys=xf("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function xf(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>H.fromName(r.referenceValue))}class Fw extends ve{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pl(t)&&as(t.arrayValue,this.value)}}class Uw extends ve{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&as(this.value.arrayValue,t)}}class $w extends ve{constructor(e,t){super(e,"not-in",t)}matches(e){if(as(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!as(this.value.arrayValue,t)}}class Bw extends ve{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>as(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,t=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.ue=null}}function rh(n,e=null,t=[],r=[],s=null,i=null,a=null){return new zw(n,e,t,r,s,i,a)}function ml(n){const e=Q(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>La(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),oo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>lr(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>lr(r)).join(",")),e.ue=t}return e.ue}function gl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ow(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Tf(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nh(n.startAt,e.startAt)&&nh(n.endAt,e.endAt)}function ja(n){return H.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,t=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function qw(n,e,t,r,s,i,a,l){return new _r(n,e,t,r,s,i,a,l)}function lo(n){return new _r(n)}function sh(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function If(n){return n.collectionGroup!==null}function Gr(n){const e=Q(n);if(e.ce===null){e.ce=[];const t=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new we(Ie.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ls(i,r))}),t.has(Ie.keyField().canonicalString())||e.ce.push(new ls(Ie.keyField(),r))}return e.ce}function ft(n){const e=Q(n);return e.le||(e.le=Hw(e,Gr(n))),e.le}function Hw(n,e){if(n.limitType==="F")return rh(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ls(s.field,i)});const t=n.endAt?new Ai(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ai(n.startAt.position,n.startAt.inclusive):null;return rh(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Va(n,e){const t=n.filters.concat([e]);return new _r(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ma(n,e,t){return new _r(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function co(n,e){return gl(ft(n),ft(e))&&n.limitType===e.limitType}function Af(n){return`${ml(ft(n))}|lt:${n.limitType}`}function Gn(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>bf(s)).join(", ")}]`),oo(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>lr(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>lr(s)).join(",")),`Target(${r})`}(ft(n))}; limitType=${n.limitType})`}function uo(n,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):H.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,e)&&function(r,s){for(const i of Gr(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const d=th(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,Gr(r),s)||r.endAt&&!function(a,l,c){const d=th(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,Gr(r),s))}(n,e)}function Ww(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Cf(n){return(e,t)=>{let r=!1;for(const s of Gr(n)){const i=Kw(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Kw(n,e,t){const r=n.field.isKeyField()?H.comparator(e.key,t.key):function(i,a,l){const c=a.data.field(i),d=l.data.field(i);return c!==null&&d!==null?ar(c,d):K()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Vn(this.inner,(t,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return gf(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=new pe(H.comparator);function Lt(){return Gw}const Rf=new pe(H.comparator);function Br(...n){let e=Rf;for(const t of n)e=e.insert(t.key,t);return e}function kf(n){let e=Rf;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function In(){return Qr()}function Pf(){return Qr()}function Qr(){return new Mn(n=>n.toString(),(n,e)=>n.isEqual(e))}const Qw=new pe(H.comparator),Yw=new we(H.comparator);function Z(...n){let e=Yw;for(const t of n)e=e.add(t);return e}const Xw=new we(ee);function Jw(){return Xw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ii(e)?"-0":e}}function Sf(n){return{integerValue:""+n}}function Zw(n,e){return Cw(e)?Sf(e):yl(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(){this._=void 0}}function e1(n,e,t){return n instanceof Ci?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&fl(i)&&(i=ao(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof cs?Df(n,e):n instanceof us?Of(n,e):function(s,i){const a=Nf(s,i),l=ih(a)+ih(s.Pe);return Oa(a)&&Oa(s.Pe)?Sf(l):yl(s.serializer,l)}(n,e)}function t1(n,e,t){return n instanceof cs?Df(n,e):n instanceof us?Of(n,e):t}function Nf(n,e){return n instanceof Ri?function(r){return Oa(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ci extends ho{}class cs extends ho{constructor(e){super(),this.elements=e}}function Df(n,e){const t=Lf(e);for(const r of n.elements)t.some(s=>yt(s,r))||t.push(r);return{arrayValue:{values:t}}}class us extends ho{constructor(e){super(),this.elements=e}}function Of(n,e){let t=Lf(e);for(const r of n.elements)t=t.filter(s=>!yt(s,r));return{arrayValue:{values:t}}}class Ri extends ho{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ih(n){return ge(n.integerValue||n.doubleValue)}function Lf(n){return pl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function n1(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof cs&&s instanceof cs||r instanceof us&&s instanceof us?or(r.elements,s.elements,yt):r instanceof Ri&&s instanceof Ri?yt(r.Pe,s.Pe):r instanceof Ci&&s instanceof Ci}(n.transform,e.transform)}class r1{constructor(e,t){this.version=e,this.transformResults=t}}class at{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new at}static exists(e){return new at(void 0,e)}static updateTime(e){return new at(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ri(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class fo{}function jf(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _l(n.key,at.none()):new ws(n.key,n.data,at.none());{const t=n.data,r=Ye.empty();let s=new we(Ie.comparator);for(let i of e.fields)if(!s.has(i)){let a=t.field(i);a===null&&i.length>1&&(i=i.popLast(),a=t.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Fn(n.key,r,new it(s.toArray()),at.none())}}function s1(n,e,t){n instanceof ws?function(s,i,a){const l=s.value.clone(),c=ah(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Fn?function(s,i,a){if(!ri(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=ah(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(Vf(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Yr(n,e,t,r){return n instanceof ws?function(i,a,l,c){if(!ri(i.precondition,a))return l;const d=i.value.clone(),f=lh(i.fieldTransforms,c,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Fn?function(i,a,l,c){if(!ri(i.precondition,a))return l;const d=lh(i.fieldTransforms,c,a),f=a.data;return f.setAll(Vf(i)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(n,e,t,r):function(i,a,l){return ri(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,e,t)}function i1(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=Nf(r.transform,s||null);i!=null&&(t===null&&(t=Ye.empty()),t.set(r.field,i))}return t||null}function oh(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&or(r,s,(i,a)=>n1(i,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ws extends fo{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fn extends fo{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Vf(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function ah(n,e,t){const r=new Map;se(n.length===t.length);for(let s=0;s<t.length;s++){const i=n[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,t1(a,l,t[s]))}return r}function lh(n,e,t){const r=new Map;for(const s of n){const i=s.transform,a=t.data.field(s.field);r.set(s.field,e1(i,a,e))}return r}class _l extends fo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class o1 extends fo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&s1(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yr(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yr(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Pf();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=t.has(s.key)?null:l;const c=jf(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(G.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Z())}isEqual(e){return this.batchId===e.batchId&&or(this.mutations,e.mutations,(t,r)=>oh(t,r))&&or(this.baseMutations,e.baseMutations,(t,r)=>oh(t,r))}}class vl{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){se(e.mutations.length===r.length);let s=function(){return Qw}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new vl(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e,te;function u1(n){switch(n){default:return K();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function Mf(n){if(n===void 0)return Ot("GRPC error has no .code"),j.UNKNOWN;switch(n){case _e.OK:return j.OK;case _e.CANCELLED:return j.CANCELLED;case _e.UNKNOWN:return j.UNKNOWN;case _e.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case _e.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case _e.INTERNAL:return j.INTERNAL;case _e.UNAVAILABLE:return j.UNAVAILABLE;case _e.UNAUTHENTICATED:return j.UNAUTHENTICATED;case _e.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case _e.NOT_FOUND:return j.NOT_FOUND;case _e.ALREADY_EXISTS:return j.ALREADY_EXISTS;case _e.PERMISSION_DENIED:return j.PERMISSION_DENIED;case _e.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case _e.ABORTED:return j.ABORTED;case _e.OUT_OF_RANGE:return j.OUT_OF_RANGE;case _e.UNIMPLEMENTED:return j.UNIMPLEMENTED;case _e.DATA_LOSS:return j.DATA_LOSS;default:return K()}}(te=_e||(_e={}))[te.OK=0]="OK",te[te.CANCELLED=1]="CANCELLED",te[te.UNKNOWN=2]="UNKNOWN",te[te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",te[te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",te[te.NOT_FOUND=5]="NOT_FOUND",te[te.ALREADY_EXISTS=6]="ALREADY_EXISTS",te[te.PERMISSION_DENIED=7]="PERMISSION_DENIED",te[te.UNAUTHENTICATED=16]="UNAUTHENTICATED",te[te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",te[te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",te[te.ABORTED=10]="ABORTED",te[te.OUT_OF_RANGE=11]="OUT_OF_RANGE",te[te.UNIMPLEMENTED=12]="UNIMPLEMENTED",te[te.INTERNAL=13]="INTERNAL",te[te.UNAVAILABLE=14]="UNAVAILABLE",te[te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=new Rn([4294967295,4294967295],0);function ch(n){const e=h1().encode(n),t=new lf;return t.update(e),new Uint8Array(t.digest())}function uh(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Rn([t,r],0),new Rn([s,i],0)]}class wl{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new zr(`Invalid padding: ${t}`);if(r<0)throw new zr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new zr(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Rn.fromNumber(this.Te)}Ee(e,t,r){let s=e.add(t.multiply(Rn.fromNumber(r)));return s.compare(d1)===1&&(s=new Rn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=ch(e),[r,s]=uh(t);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new wl(i,s,t);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Te===0)return;const t=ch(e),[r,s]=uh(t);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class zr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Es.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new po(G.min(),s,new pe(ee),Lt(),Z())}}class Es{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Es(r,t,Z(),Z(),Z())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class Ff{constructor(e,t){this.targetId=e,this.me=t}}class Uf{constructor(e,t,r=Ae.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class hh{constructor(){this.fe=0,this.ge=dh(),this.pe=Ae.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Z(),t=Z(),r=Z();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:K()}}),new Es(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=dh()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class f1{constructor(e){this.Le=e,this.Be=new Map,this.ke=Lt(),this.qe=Ys(),this.Qe=Ys(),this.Ke=new pe(ee)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,s)=>{this.je(s)&&t(s)})}Je(e){const t=e.targetId,r=e.me.count,s=this.Ye(t);if(s){const i=s.target;if(ja(i))if(r===0){const a=new H(i.path);this.We(t,a,Oe.newNoDocument(a,G.min()))}else se(r===1);else{const a=this.Ze(t);if(a!==r){const l=this.Xe(e),c=l?this.et(l,e,a):1;if(c!==0){this.He(t);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,d)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let a,l;try{a=rn(r).toUint8Array()}catch(c){if(c instanceof yf)return ir("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new wl(a,s,i)}catch(c){return ir(c instanceof zr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Te===0?null:l}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(i=>{const a=this.Le.nt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.We(t,i,null),s++)}),s}it(e){const t=new Map;this.Be.forEach((i,a)=>{const l=this.Ye(a);if(l){if(i.current&&ja(l.target)){const c=new H(l.target.path);this.st(c).has(a)||this.ot(a,c)||this.We(a,c,Oe.newNoDocument(c,e))}i.be&&(t.set(a,i.ve()),i.Ce())}});let r=Z();this.Qe.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.Ye(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new po(e,t,this.Ke,this.ke,r);return this.ke=Lt(),this.qe=Ys(),this.Qe=Ys(),this.Ke=new pe(ee),s}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const s=this.ze(e);this.ot(e,t)?s.Fe(t,1):s.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new hh,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new we(ee),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new we(ee),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||U("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new hh),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Ys(){return new pe(H.comparator)}function dh(){return new pe(H.comparator)}const p1={asc:"ASCENDING",desc:"DESCENDING"},m1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g1={and:"AND",or:"OR"};class y1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fa(n,e){return n.useProto3Json||oo(e)?e:{value:e}}function ki(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $f(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _1(n,e){return ki(n,e.toTimestamp())}function pt(n){return se(!!n),G.fromTimestamp(function(t){const r=nn(t);return new ye(r.seconds,r.nanos)}(n))}function El(n,e){return Ua(n,e).canonicalString()}function Ua(n,e){const t=function(s){return new ce(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Bf(n){const e=ce.fromString(n);return se(Kf(e)),e}function $a(n,e){return El(n.databaseId,e.path)}function ra(n,e){const t=Bf(e);if(t.get(1)!==n.databaseId.projectId)throw new $(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new H(qf(t))}function zf(n,e){return El(n.databaseId,e)}function v1(n){const e=Bf(n);return e.length===4?ce.emptyPath():qf(e)}function Ba(n){return new ce(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qf(n){return se(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function fh(n,e,t){return{name:$a(n,e),fields:t.value.mapValue.fields}}function w1(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(se(f===void 0||typeof f=="string"),Ae.fromBase64String(f||"")):(se(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Ae.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const f=d.code===void 0?j.UNKNOWN:Mf(d.code);return new $(f,d.message||"")}(a);t=new Uf(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ra(n,r.document.name),i=pt(r.document.updateTime),a=r.document.createTime?pt(r.document.createTime):G.min(),l=new Ye({mapValue:{fields:r.document.fields}}),c=Oe.newFoundDocument(s,i,a,l),d=r.targetIds||[],f=r.removedTargetIds||[];t=new si(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ra(n,r.document),i=r.readTime?pt(r.readTime):G.min(),a=Oe.newNoDocument(s,i),l=r.removedTargetIds||[];t=new si([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ra(n,r.document),i=r.removedTargetIds||[];t=new si([],i,s,null)}else{if(!("filter"in e))return K();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new c1(s,i),l=r.targetId;t=new Ff(l,a)}}return t}function E1(n,e){let t;if(e instanceof ws)t={update:fh(n,e.key,e.value)};else if(e instanceof _l)t={delete:$a(n,e.key)};else if(e instanceof Fn)t={update:fh(n,e.key,e.data),updateMask:P1(e.fieldMask)};else{if(!(e instanceof o1))return K();t={verify:$a(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Ci)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof cs)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof us)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ri)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw K()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:_1(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:K()}(n,e.precondition)),t}function T1(n,e){return n&&n.length>0?(se(e!==void 0),n.map(t=>function(s,i){let a=s.updateTime?pt(s.updateTime):pt(i);return a.isEqual(G.min())&&(a=pt(i)),new r1(a,s.transformResults||[])}(t,e))):[]}function b1(n,e){return{documents:[zf(n,e.path)]}}function x1(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=zf(n,s);const i=function(d){if(d.length!==0)return Wf(lt.create(d,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(f=>function(v){return{field:Qn(v.field),direction:C1(v.dir)}}(f))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=Fa(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ct:t,parent:s}}function I1(n){let e=v1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){se(r===1);const f=t.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];t.where&&(i=function(m){const v=Hf(m);return v instanceof lt&&Ef(v)?v.getFilters():[v]}(t.where));let a=[];t.orderBy&&(a=function(m){return m.map(v=>function(C){return new ls(Yn(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(v))}(t.orderBy));let l=null;t.limit&&(l=function(m){let v;return v=typeof m=="object"?m.value:m,oo(v)?null:v}(t.limit));let c=null;t.startAt&&(c=function(m){const v=!!m.before,T=m.values||[];return new Ai(T,v)}(t.startAt));let d=null;return t.endAt&&(d=function(m){const v=!m.before,T=m.values||[];return new Ai(T,v)}(t.endAt)),qw(e,s,a,i,l,"F",c,d)}function A1(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Hf(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Yn(t.unaryFilter.field);return ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Yn(t.unaryFilter.field);return ve.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Yn(t.unaryFilter.field);return ve.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Yn(t.unaryFilter.field);return ve.create(a,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(n):n.fieldFilter!==void 0?function(t){return ve.create(Yn(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return lt.create(t.compositeFilter.filters.map(r=>Hf(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return K()}}(t.compositeFilter.op))}(n):K()}function C1(n){return p1[n]}function R1(n){return m1[n]}function k1(n){return g1[n]}function Qn(n){return{fieldPath:n.canonicalString()}}function Yn(n){return Ie.fromServerFormat(n.fieldPath)}function Wf(n){return n instanceof ve?function(t){if(t.op==="=="){if(eh(t.value))return{unaryFilter:{field:Qn(t.field),op:"IS_NAN"}};if(Zu(t.value))return{unaryFilter:{field:Qn(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(eh(t.value))return{unaryFilter:{field:Qn(t.field),op:"IS_NOT_NAN"}};if(Zu(t.value))return{unaryFilter:{field:Qn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qn(t.field),op:R1(t.op),value:t.value}}}(n):n instanceof lt?function(t){const r=t.getFilters().map(s=>Wf(s));return r.length===1?r[0]:{compositeFilter:{op:k1(t.op),filters:r}}}(n):K()}function P1(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Kf(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,t,r,s,i=G.min(),a=G.min(),l=Ae.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Qt(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qt(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e){this.ht=e}}function N1(n){const e=I1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ma(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(){this.ln=new O1}addToCollectionParentIndex(e,t){return this.ln.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(tn.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(tn.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class O1{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new we(ce.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new we(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ze{static withCacheSize(e){return new ze(e,ze.DEFAULT_COLLECTION_PERCENTILE,ze.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ze.DEFAULT_COLLECTION_PERCENTILE=10,ze.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ze.DEFAULT=new ze(41943040,ze.DEFAULT_COLLECTION_PERCENTILE,ze.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ze.DISABLED=new ze(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new cr(0)}static Qn(){return new cr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh([n,e],[t,r]){const s=ee(n,t);return s===0?ee(e,r):s}class L1{constructor(e){this.Gn=e,this.buffer=new we(mh),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();mh(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class j1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){U("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){yr(t)?U("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await gr(t)}await this.Yn(3e5)})}}class V1{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return L.resolve(io.oe);const r=new L1(t);return this.Zn.forEachTarget(e,s=>r.Hn(s.sequenceNumber)).next(()=>this.Zn.er(e,s=>r.Hn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(ph)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ph):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,s,i,a,l,c,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,t))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Kn()<=J.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-f}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function M1(n,e){return new V1(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(){this.changes=new Mn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Oe.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Yr(r.mutation,s,it.empty(),ye.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Z()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Z()){const s=In();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(i=>{let a=Br();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=In();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Z()))}populateOverlays(e,t,r){const s=[];return r.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{t.set(a,l)})})}computeViews(e,t,r,s){let i=Lt();const a=Qr(),l=function(){return Qr()}();return t.forEach((c,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Fn)?i=i.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),Yr(f.mutation,d,f.mutation.getFieldMask(),ye.now())):a.set(d.key,it.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>a.set(d,f)),t.forEach((d,f)=>{var m;return l.set(d,new U1(f,(m=a.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,t){const r=Qr();let s=new pe((a,l)=>a-l),i=Z();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=t.get(c);if(d===null)return;let f=r.get(c)||it.empty();f=l.applyToLocalView(d,f),r.set(c,f);const m=(s.get(l.batchId)||Z()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,f=c.value,m=Pf();f.forEach(v=>{if(!i.has(v)){const T=jf(t.get(v),r.get(v));T!==null&&m.set(v,T),i=i.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return L.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(a){return H.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):If(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):L.resolve(In());let l=-1,c=i;return a.next(d=>L.forEach(d,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(f)?L.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{c=c.insert(f,v)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,Z())).next(f=>({batchId:l,changes:kf(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new H(t)).next(r=>{let s=Br();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let a=Br();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,c=>{const d=function(m,v){return new _r(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,v)=>{a=a.insert(m,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s))).next(a=>{i.forEach((c,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,Oe.newInvalidDocument(f)))});let l=Br();return a.forEach((c,d)=>{const f=i.get(c);f!==void 0&&Yr(f.mutation,d,it.empty(),ye.now()),uo(t,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return L.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:pt(s.createTime)}}(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(s){return{name:s.name,query:N1(s.bundledQuery),readTime:pt(s.readTime)}}(t)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(){this.overlays=new pe(H.comparator),this.Er=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const r=In();return L.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,i)=>{this.Tt(e,t,i)}),L.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Er.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Er.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){const s=In(),i=t.length+1,a=new H(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return L.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new pe((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=In(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=In(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return L.resolve(l)}Tt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Er.get(s.largestBatchId).delete(r.key);this.Er.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new l1(t,r));let i=this.Er.get(t);i===void 0&&(i=Z(),this.Er.set(t,i)),this.Er.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(){this.sessionToken=Ae.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(){this.dr=new we(Ee.Ar),this.Rr=new we(Ee.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const r=new Ee(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Ee(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new H(new ce([])),r=new Ee(t,e),s=new Ee(t,e+1),i=[];return this.Rr.forEachInRange([r,s],a=>{this.gr(a),i.push(a.key)}),i}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new H(new ce([])),r=new Ee(t,e),s=new Ee(t,e+1);let i=Z();return this.Rr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const t=new Ee(e,0),r=this.dr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ee{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return H.comparator(e.key,t.key)||ee(e.br,t.br)}static Vr(e,t){return ee(e.br,t.br)||H.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new we(Ee.Ar)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new a1(i,t,r,s);this.mutationQueue.push(a);for(const l of s)this.vr=this.vr.add(new Ee(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(a)}lookupMutationBatch(e,t){return L.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Fr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ee(t,0),s=new Ee(t,Number.POSITIVE_INFINITY),i=[];return this.vr.forEachInRange([r,s],a=>{const l=this.Cr(a.br);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new we(ee);return t.forEach(s=>{const i=new Ee(s,0),a=new Ee(s,Number.POSITIVE_INFINITY);this.vr.forEachInRange([i,a],l=>{r=r.add(l.br)})}),L.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;H.isDocumentKey(i)||(i=i.child(""));const a=new Ee(new H(i),0);let l=new we(ee);return this.vr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.br)),!0)},a),L.resolve(this.Mr(l))}Mr(e){const t=[];return e.forEach(r=>{const s=this.Cr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){se(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return L.forEach(t.mutations,s=>{const i=new Ee(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){const r=new Ee(t,0),s=this.vr.firstAfterOrEqual(r);return L.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.Nr=e,this.docs=function(){return new pe(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,a=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():Oe.newInvalidDocument(t))}getEntries(e,t){let r=Lt();return t.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Oe.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=Lt();const a=t.path,l=new H(a.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||bw(Tw(f),r)<=0||(s.has(f.key)||uo(t,f))&&(i=i.insert(f.key,f.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,t,r,s){K()}Lr(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new K1(this)}getSize(e){return L.resolve(this.size)}}class K1 extends F1{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.hr.addEntry(e,s)):this.hr.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.persistence=e,this.Br=new Mn(t=>ml(t),gl),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.kr=0,this.qr=new Tl,this.targetCount=0,this.Qr=cr.qn()}forEachTarget(e,t){return this.Br.forEach((r,s)=>t(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),L.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new cr(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Un(t),L.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.Br.forEach((a,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.Br.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const r=this.Br.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),L.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t){this.Kr={},this.overlays={},this.$r=new io(0),this.Ur=!1,this.Ur=!0,this.Wr=new q1,this.referenceDelegate=e(this),this.Gr=new G1(this),this.indexManager=new D1,this.remoteDocumentCache=function(s){return new W1(s)}(r=>this.referenceDelegate.zr(r)),this.serializer=new S1(t),this.jr=new B1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new z1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new H1(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){U("MemoryPersistence","Starting transaction:",e);const s=new Q1(this.$r.next());return this.referenceDelegate.Hr(),r(s).next(i=>this.referenceDelegate.Jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Yr(e,t){return L.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class Q1 extends Iw{constructor(e){super(),this.currentSequenceNumber=e}}class bl{constructor(e){this.persistence=e,this.Zr=new Tl,this.Xr=null}static ei(e){return new bl(e)}get ti(){if(this.Xr)return this.Xr;throw K()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),L.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(s=>this.ti.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.ti.add(i.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.ti,r=>{const s=H.fromPath(r);return this.ni(e,s).next(i=>{i||t.removeEntry(s,G.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return L.or([()=>L.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class Pi{constructor(e,t){this.persistence=e,this.ri=new Mn(r=>Rw(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=M1(this,t)}static ei(e,t){return new Pi(e,t)}Hr(){}Jr(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return L.forEach(this.ri,(r,s)=>this.ir(e,r,s).next(i=>i?L.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Lr(e,a=>this.ir(e,a,t).next(l=>{l||(r++,i.removeEntry(a,G.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),L.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ti(e.data.value)),t}ir(e,t,r){return L.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.ri.get(t);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=s}static zi(e,t){let r=Z(),s=Z();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new xl(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return Q0()?8:Aw(Le())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.Xi(e,t).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.es(e,t,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new Y1;return this.ts(e,t,a).next(l=>{if(i.result=l,this.Hi)return this.ns(e,t,a,l.size)})}).next(()=>i.result)}ns(e,t,r,s){return r.documentReadCount<this.Ji?(Kn()<=J.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",Gn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),L.resolve()):(Kn()<=J.DEBUG&&U("QueryEngine","Query:",Gn(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Yi*s?(Kn()<=J.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",Gn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ft(t))):L.resolve())}Xi(e,t){if(sh(t))return L.resolve(null);let r=ft(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Ma(t,null,"F"),r=ft(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Z(...i);return this.Zi.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.rs(t,l);return this.ss(t,d,a,c.readTime)?this.Xi(e,Ma(t,null,"F")):this.os(e,d,t,c)}))})))}es(e,t,r,s){return sh(t)||s.isEqual(G.min())?L.resolve(null):this.Zi.getDocuments(e,r).next(i=>{const a=this.rs(t,i);return this.ss(t,a,r,s)?L.resolve(null):(Kn()<=J.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Gn(t)),this.os(e,a,t,Ew(s,-1)).next(l=>l))})}rs(e,t){let r=new we(Cf(e));return t.forEach((s,i)=>{uo(e,i)&&(r=r.add(i))}),r}ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ts(e,t,r){return Kn()<=J.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",Gn(t)),this.Zi.getDocumentsMatchingQuery(e,t,tn.min(),r)}os(e,t,r,s){return this.Zi.getDocumentsMatchingQuery(e,r,s).next(i=>(t.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,t,r,s){this.persistence=e,this._s=t,this.serializer=s,this.us=new pe(ee),this.cs=new Mn(i=>ml(i),gl),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $1(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function Z1(n,e,t,r){return new J1(n,e,t,r)}async function Qf(n,e){const t=Q(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=Z();for(const d of s){a.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ts:d,removedBatchIds:a,addedBatchIds:l}))})})}function eE(n,e){const t=Q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=t.hs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,f){const m=d.batch,v=m.keys();let T=L.resolve();return v.forEach(C=>{T=T.next(()=>f.getEntry(c,C)).next(P=>{const R=d.docVersions.get(C);se(R!==null),P.version.compareTo(R)<0&&(m.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),f.addEntry(P)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(t,r,e,i).next(()=>i.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Z();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function Yf(n){const e=Q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function tE(n,e){const t=Q(n),r=e.snapshotVersion;let s=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=t.hs.newChangeBuffer({trackRemovals:!0});s=t.us;const l=[];e.targetChanges.forEach((f,m)=>{const v=s.get(m);if(!v)return;l.push(t.Gr.removeMatchingKeys(i,f.removedDocuments,m).next(()=>t.Gr.addMatchingKeys(i,f.addedDocuments,m)));let T=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?T=T.withResumeToken(Ae.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,r)),s=s.insert(m,T),function(P,R,V){return P.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(v,T,f)&&l.push(t.Gr.updateTargetData(i,T))});let c=Lt(),d=Z();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(nE(i,a,e.documentUpdates).next(f=>{c=f.Is,d=f.Es})),!r.isEqual(G.min())){const f=t.Gr.getLastRemoteSnapshotVersion(i).next(m=>t.Gr.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return L.waitFor(l).next(()=>a.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(t.us=s,i))}function nE(n,e,t){let r=Z(),s=Z();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=Lt();return t.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(G.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):U("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Is:a,Es:s}})}function rE(n,e){const t=Q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sE(n,e){const t=Q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Gr.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):t.Gr.allocateTargetId(r).next(a=>(s=new Qt(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.us.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function za(n,e,t){const r=Q(n),s=r.us.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!yr(a))throw a;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.us=r.us.remove(e),r.cs.delete(s.target)}function gh(n,e,t){const r=Q(n);let s=G.min(),i=Z();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,f){const m=Q(c),v=m.cs.get(f);return v!==void 0?L.resolve(m.us.get(v)):m.Gr.getTargetData(d,f)}(r,a,ft(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r._s.getDocumentsMatchingQuery(a,e,t?s:G.min(),t?i:Z())).next(l=>(iE(r,Ww(e),l),{documents:l,ds:i})))}function iE(n,e,t){let r=n.ls.get(e)||G.min();t.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.ls.set(e,r)}class yh{constructor(){this.activeTargetIds=Jw()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oE{constructor(){this._o=new yh,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new yh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xs=null;function sa(){return Xs===null?Xs=function(){return 268435456+Math.round(2147483648*Math.random())}():Xs++,"0x"+Xs.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne="WebChannelConnection";class uE extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${s}/databases/${i}`,this.xo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Oo(t,r,s,i,a){const l=sa(),c=this.No(t,r.toUriEncodedString());U("RestConnection",`Sending RPC '${t}' ${l}:`,c,s);const d={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(d,i,a),this.Bo(t,c,d,s).then(f=>(U("RestConnection",`Received RPC '${t}' ${l}: `,f),f),f=>{throw ir("RestConnection",`RPC '${t}' ${l} failed with error: `,f,"url: ",c,"request:",s),f})}ko(t,r,s,i,a,l){return this.Oo(t,r,s,i,a)}Lo(t,r,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>t[a]=i),s&&s.headers.forEach((i,a)=>t[a]=i)}No(t,r){const s=lE[t];return`${this.Fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,s){const i=sa();return new Promise((a,l)=>{const c=new cf;c.setWithCredentials(!0),c.listenOnce(uf.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ei.NO_ERROR:const f=c.getResponseJson();U(Ne,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),a(f);break;case ei.TIMEOUT:U(Ne,`RPC '${e}' ${i} timed out`),l(new $(j.DEADLINE_EXCEEDED,"Request time out"));break;case ei.HTTP_ERROR:const m=c.getStatus();if(U(Ne,`RPC '${e}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const T=v==null?void 0:v.error;if(T&&T.status&&T.message){const C=function(R){const V=R.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(V)>=0?V:j.UNKNOWN}(T.status);l(new $(C,T.message))}else l(new $(j.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new $(j.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{U(Ne,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);U(Ne,`RPC '${e}' ${i} sending request:`,s),c.send(t,"POST",d,r,15)})}qo(e,t,r){const s=sa(),i=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ff(),l=df(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Lo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=i.join("");U(Ne,`Creating RPC '${e}' stream ${s}: ${f}`,c);const m=a.createWebChannel(f,c);let v=!1,T=!1;const C=new cE({Eo:R=>{T?U(Ne,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(v||(U(Ne,`Opening RPC '${e}' stream ${s} transport.`),m.open(),v=!0),U(Ne,`RPC '${e}' stream ${s} sending:`,R),m.send(R))},Ao:()=>m.close()}),P=(R,V,N)=>{R.listen(V,S=>{try{N(S)}catch(O){setTimeout(()=>{throw O},0)}})};return P(m,$r.EventType.OPEN,()=>{T||(U(Ne,`RPC '${e}' stream ${s} transport opened.`),C.So())}),P(m,$r.EventType.CLOSE,()=>{T||(T=!0,U(Ne,`RPC '${e}' stream ${s} transport closed`),C.Do())}),P(m,$r.EventType.ERROR,R=>{T||(T=!0,ir(Ne,`RPC '${e}' stream ${s} transport errored:`,R),C.Do(new $(j.UNAVAILABLE,"The operation could not be completed")))}),P(m,$r.EventType.MESSAGE,R=>{var V;if(!T){const N=R.data[0];se(!!N);const S=N,O=(S==null?void 0:S.error)||((V=S[0])===null||V===void 0?void 0:V.error);if(O){U(Ne,`RPC '${e}' stream ${s} received error:`,O);const B=O.status;let z=function(w){const I=_e[w];if(I!==void 0)return Mf(I)}(B),E=O.message;z===void 0&&(z=j.INTERNAL,E="Unknown error status: "+B+" with message "+O.message),T=!0,C.Do(new $(z,E)),m.close()}else U(Ne,`RPC '${e}' stream ${s} received:`,N),C.vo(N)}}),P(l,hf.STAT_EVENT,R=>{R.stat===Na.PROXY?U(Ne,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===Na.NOPROXY&&U(Ne,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.bo()},0),C}}function ia(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(n){return new y1(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,t,r=1e3,s=1.5,i=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=s,this.$o=i,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),s=Math.max(0,t-r);s>0&&U("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,s,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t,r,s,i,a,l,c){this.li=e,this.Yo=r,this.Zo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Xf(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===j.RESOURCE_EXHAUSTED?(Ot(t.toString()),Ot("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Xo===t&&this.I_(r,s)},r=>{e(()=>{const s=new $(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(s)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(s=>{r(()=>this.E_(s))}),this.stream.onMessage(s=>{r(()=>++this.n_==1?this.A_(s):this.onNext(s))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hE extends Jf{constructor(e,t,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,a),this.serializer=i}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=w1(this.serializer,e),r=function(i){if(!("targetChange"in i))return G.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?G.min():a.readTime?pt(a.readTime):G.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=Ba(this.serializer),t.addTarget=function(i,a){let l;const c=a.target;if(l=ja(c)?{documents:b1(i,c)}:{query:x1(i,c).ct},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=$f(i,a.resumeToken);const d=Fa(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(G.min())>0){l.readTime=ki(i,a.snapshotVersion.toTimestamp());const d=Fa(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=A1(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=Ba(this.serializer),t.removeTarget=e,this.c_(t)}}class dE extends Jf{constructor(e,t,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,a),this.serializer=i}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return se(!!e.streamToken),this.lastStreamToken=e.streamToken,se(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=T1(e.writeResults,e.commitTime),r=pt(e.commitTime);return this.listener.y_(r,t)}w_(){const e={};e.database=Ba(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>E1(this.serializer,r))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.S_=!1}b_(){if(this.S_)throw new $(j.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Oo(e,Ua(t,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(j.UNKNOWN,i.toString())})}ko(e,t,r,s,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.ko(e,Ua(t,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new $(j.UNKNOWN,a.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class pE{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Ot(t),this.C_=!1):U("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=i,this.Q_.uo(a=>{r.enqueueAndForget(async()=>{Un(this)&&(U("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=Q(c);d.k_.add(4),await Ts(d),d.K_.set("Unknown"),d.k_.delete(4),await go(d)}(this))})}),this.K_=new pE(r,s)}}async function go(n){if(Un(n))for(const e of n.q_)await e(!0)}async function Ts(n){for(const e of n.q_)await e(!1)}function Zf(n,e){const t=Q(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),Rl(t)?Cl(t):vr(t).s_()&&Al(t,e))}function Il(n,e){const t=Q(n),r=vr(t);t.B_.delete(e),r.s_()&&ep(t,e),t.B_.size===0&&(r.s_()?r.a_():Un(t)&&t.K_.set("Unknown"))}function Al(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(G.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vr(n).V_(e)}function ep(n,e){n.U_.xe(e),vr(n).m_(e)}function Cl(n){n.U_=new f1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),vr(n).start(),n.K_.F_()}function Rl(n){return Un(n)&&!vr(n).i_()&&n.B_.size>0}function Un(n){return Q(n).k_.size===0}function tp(n){n.U_=void 0}async function gE(n){n.K_.set("Online")}async function yE(n){n.B_.forEach((e,t)=>{Al(n,e)})}async function _E(n,e){tp(n),Rl(n)?(n.K_.O_(e),Cl(n)):n.K_.set("Unknown")}async function vE(n,e,t){if(n.K_.set("Online"),e instanceof Uf&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.B_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.B_.delete(l),s.U_.removeTarget(l))}(n,e)}catch(r){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Si(n,r)}else if(e instanceof si?n.U_.$e(e):e instanceof Ff?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(G.min()))try{const r=await Yf(n.localStore);t.compareTo(r)>=0&&await function(i,a){const l=i.U_.it(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.B_.get(d);f&&i.B_.set(d,f.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const f=i.B_.get(c);if(!f)return;i.B_.set(c,f.withResumeToken(Ae.EMPTY_BYTE_STRING,f.snapshotVersion)),ep(i,c);const m=new Qt(f.target,c,d,f.sequenceNumber);Al(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t)}catch(r){U("RemoteStore","Failed to raise snapshot:",r),await Si(n,r)}}async function Si(n,e,t){if(!yr(e))throw e;n.k_.add(1),await Ts(n),n.K_.set("Offline"),t||(t=()=>Yf(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{U("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await go(n)})}function np(n,e){return e().catch(t=>Si(n,t,e))}async function yo(n){const e=Q(n),t=on(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;wE(e);)try{const s=await rE(e.localStore,r);if(s===null){e.L_.length===0&&t.a_();break}r=s.batchId,EE(e,s)}catch(s){await Si(e,s)}rp(e)&&sp(e)}function wE(n){return Un(n)&&n.L_.length<10}function EE(n,e){n.L_.push(e);const t=on(n);t.s_()&&t.f_&&t.g_(e.mutations)}function rp(n){return Un(n)&&!on(n).i_()&&n.L_.length>0}function sp(n){on(n).start()}async function TE(n){on(n).w_()}async function bE(n){const e=on(n);for(const t of n.L_)e.g_(t.mutations)}async function xE(n,e,t){const r=n.L_.shift(),s=vl.from(r,e,t);await np(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await yo(n)}async function IE(n,e){e&&on(n).f_&&await async function(r,s){if(function(a){return u1(a)&&a!==j.ABORTED}(s.code)){const i=r.L_.shift();on(r).__(),await np(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await yo(r)}}(n,e),rp(n)&&sp(n)}async function vh(n,e){const t=Q(n);t.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");const r=Un(t);t.k_.add(3),await Ts(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await go(t)}async function AE(n,e){const t=Q(n);e?(t.k_.delete(2),await go(t)):e||(t.k_.add(2),await Ts(t),t.K_.set("Unknown"))}function vr(n){return n.W_||(n.W_=function(t,r,s){const i=Q(t);return i.b_(),new hE(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{Ro:gE.bind(null,n),mo:yE.bind(null,n),po:_E.bind(null,n),R_:vE.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),Rl(n)?Cl(n):n.K_.set("Unknown")):(await n.W_.stop(),tp(n))})),n.W_}function on(n){return n.G_||(n.G_=function(t,r,s){const i=Q(t);return i.b_(),new dE(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:TE.bind(null,n),po:IE.bind(null,n),p_:bE.bind(null,n),y_:xE.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await yo(n)):(await n.G_.stop(),n.L_.length>0&&(U("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const a=Date.now()+r,l=new kl(e,t,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pl(n,e){if(Ot("AsyncQueue",`${e}: ${n}`),yr(n))return new $(j.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{static emptySet(e){return new Zn(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||H.comparator(t.key,r.key):(t,r)=>H.comparator(t.key,r.key),this.keyedMap=Br(),this.sortedSet=new pe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zn)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Zn;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(){this.z_=new pe(H.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):K():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class ur{constructor(e,t,r,s,i,a,l,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,s,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new ur(e,t,Zn.emptySet(t),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&co(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class RE{constructor(){this.queries=Eh(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const s=Q(t),i=s.queries;s.queries=Eh(),i.forEach((a,l)=>{for(const c of l.J_)c.onError(r)})})(this,new $(j.ABORTED,"Firestore shutting down"))}}function Eh(){return new Mn(n=>Af(n),co)}async function Sl(n,e){const t=Q(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.Y_()&&e.Z_()&&(r=2):(i=new CE,r=e.Z_()?0:1);try{switch(r){case 0:i.H_=await t.onListen(s,!0);break;case 1:i.H_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(a){const l=Pl(a,`Initialization of query '${Gn(e.query)}' failed`);return void e.onError(l)}t.queries.set(s,i),i.J_.push(e),e.ea(t.onlineState),i.H_&&e.ta(i.H_)&&Dl(t)}async function Nl(n,e){const t=Q(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const a=i.J_.indexOf(e);a>=0&&(i.J_.splice(a,1),i.J_.length===0?s=e.Z_()?0:1:!i.Y_()&&e.Z_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function kE(n,e){const t=Q(n);let r=!1;for(const s of e){const i=s.query,a=t.queries.get(i);if(a){for(const l of a.J_)l.ta(s)&&(r=!0);a.H_=s}}r&&Dl(t)}function PE(n,e,t){const r=Q(n),s=r.queries.get(e);if(s)for(const i of s.J_)i.onError(t);r.queries.delete(e)}function Dl(n){n.X_.forEach(e=>{e.next()})}var qa,Th;(Th=qa||(qa={})).na="default",Th.Cache="cache";class Ol{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ur(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=ur.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==qa.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e){this.key=e}}class op{constructor(e){this.key=e}}class SE{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Z(),this.mutatedKeys=Z(),this.Va=Cf(e),this.ma=new Zn(this.Va)}get fa(){return this.da}ga(e,t){const r=t?t.pa:new wh,s=t?t.ma:this.ma;let i=t?t.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const v=s.get(f),T=uo(this.query,m)?m:null,C=!!v&&this.mutatedKeys.has(v.key),P=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let R=!1;v&&T?v.data.isEqual(T.data)?C!==P&&(r.track({type:3,doc:T}),R=!0):this.ya(v,T)||(r.track({type:2,doc:T}),R=!0,(c&&this.Va(T,c)>0||d&&this.Va(T,d)<0)&&(l=!0)):!v&&T?(r.track({type:0,doc:T}),R=!0):v&&!T&&(r.track({type:1,doc:v}),R=!0,(c||d)&&(l=!0)),R&&(T?(a=a.add(T),i=P?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{ma:a,pa:r,ss:l,mutatedKeys:i}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const a=e.pa.j_();a.sort((f,m)=>function(T,C){const P=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return P(T)-P(C)}(f.type,m.type)||this.Va(f.doc,m.doc)),this.wa(r),s=s!=null&&s;const l=t&&!s?this.Sa():[],c=this.Ra.size===0&&this.current&&!s?1:0,d=c!==this.Aa;return this.Aa=c,a.length!==0||d?{snapshot:new ur(this.query,e.ma,i,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:l}:{ba:l}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new wh,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Z(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new op(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new ip(r))}),t}va(e){this.da=e.ds,this.Ra=Z();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return ur.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class NE{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class DE{constructor(e){this.key=e,this.Fa=!1}}class OE{constructor(e,t,r,s,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ma={},this.xa=new Mn(l=>Af(l),co),this.Oa=new Map,this.Na=new Set,this.La=new pe(H.comparator),this.Ba=new Map,this.ka=new Tl,this.qa={},this.Qa=new Map,this.Ka=cr.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function LE(n,e,t=!0){const r=dp(n);let s;const i=r.xa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Ca()):s=await ap(r,e,t,!0),s}async function jE(n,e){const t=dp(n);await ap(t,e,!0,!1)}async function ap(n,e,t,r){const s=await sE(n.localStore,ft(e)),i=s.targetId,a=n.sharedClientState.addLocalQueryTarget(i,t);let l;return r&&(l=await VE(n,e,i,a==="current",s.resumeToken)),n.isPrimaryClient&&t&&Zf(n.remoteStore,s),l}async function VE(n,e,t,r,s){n.Ua=(m,v,T)=>async function(P,R,V,N){let S=R.view.ga(V);S.ss&&(S=await gh(P.localStore,R.query,!1).then(({documents:E})=>R.view.ga(E,S)));const O=N&&N.targetChanges.get(R.targetId),B=N&&N.targetMismatches.get(R.targetId)!=null,z=R.view.applyChanges(S,P.isPrimaryClient,O,B);return xh(P,R.targetId,z.ba),z.snapshot}(n,m,v,T);const i=await gh(n.localStore,e,!0),a=new SE(e,i.ds),l=a.ga(i.documents),c=Es.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),d=a.applyChanges(l,n.isPrimaryClient,c);xh(n,t,d.ba);const f=new NE(e,t,a);return n.xa.set(e,f),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),d.snapshot}async function ME(n,e,t){const r=Q(n),s=r.xa.get(e),i=r.Oa.get(s.targetId);if(i.length>1)return r.Oa.set(s.targetId,i.filter(a=>!co(a,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await za(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Il(r.remoteStore,s.targetId),Ha(r,s.targetId)}).catch(gr)):(Ha(r,s.targetId),await za(r.localStore,s.targetId,!0))}async function FE(n,e){const t=Q(n),r=t.xa.get(e),s=t.Oa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Il(t.remoteStore,r.targetId))}async function UE(n,e,t){const r=KE(n);try{const s=await function(a,l){const c=Q(a),d=ye.now(),f=l.reduce((T,C)=>T.add(C.key),Z());let m,v;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let C=Lt(),P=Z();return c.hs.getEntries(T,f).next(R=>{C=R,C.forEach((V,N)=>{N.isValidDocument()||(P=P.add(V))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,C)).next(R=>{m=R;const V=[];for(const N of l){const S=i1(N,m.get(N.key).overlayedDocument);S!=null&&V.push(new Fn(N.key,S,_f(S.value.mapValue),at.exists(!0)))}return c.mutationQueue.addMutationBatch(T,d,V,l)}).next(R=>{v=R;const V=R.applyToLocalDocumentSet(m,P);return c.documentOverlayCache.saveOverlays(T,R.batchId,V)})}).then(()=>({batchId:v.batchId,changes:kf(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let d=a.qa[a.currentUser.toKey()];d||(d=new pe(ee)),d=d.insert(l,c),a.qa[a.currentUser.toKey()]=d}(r,s.batchId,t),await bs(r,s.changes),await yo(r.remoteStore)}catch(s){const i=Pl(s,"Failed to persist write");t.reject(i)}}async function lp(n,e){const t=Q(n);try{const r=await tE(t.localStore,e);e.targetChanges.forEach((s,i)=>{const a=t.Ba.get(i);a&&(se(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.Fa=!0:s.modifiedDocuments.size>0?se(a.Fa):s.removedDocuments.size>0&&(se(a.Fa),a.Fa=!1))}),await bs(t,r,e)}catch(r){await gr(r)}}function bh(n,e,t){const r=Q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.xa.forEach((i,a)=>{const l=a.view.ea(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=Q(a);c.onlineState=l;let d=!1;c.queries.forEach((f,m)=>{for(const v of m.J_)v.ea(l)&&(d=!0)}),d&&Dl(c)}(r.eventManager,e),s.length&&r.Ma.R_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $E(n,e,t){const r=Q(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ba.get(e),i=s&&s.key;if(i){let a=new pe(H.comparator);a=a.insert(i,Oe.newNoDocument(i,G.min()));const l=Z().add(i),c=new po(G.min(),new Map,new pe(ee),a,l);await lp(r,c),r.La=r.La.remove(i),r.Ba.delete(e),Ll(r)}else await za(r.localStore,e,!1).then(()=>Ha(r,e,t)).catch(gr)}async function BE(n,e){const t=Q(n),r=e.batch.batchId;try{const s=await eE(t.localStore,e);up(t,r,null),cp(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await bs(t,s)}catch(s){await gr(s)}}async function zE(n,e,t){const r=Q(n);try{const s=await function(a,l){const c=Q(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,l).next(m=>(se(m!==null),f=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);up(r,e,t),cp(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await bs(r,s)}catch(s){await gr(s)}}function cp(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function up(n,e,t){const r=Q(n);let s=r.qa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.qa[r.currentUser.toKey()]=s}}function Ha(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||hp(n,r)})}function hp(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(Il(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),Ll(n))}function xh(n,e,t){for(const r of t)r instanceof ip?(n.ka.addReference(r.key,e),qE(n,r)):r instanceof op?(U("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||hp(n,r.key)):K()}function qE(n,e){const t=e.key,r=t.path.canonicalString();n.La.get(t)||n.Na.has(r)||(U("SyncEngine","New document in limbo: "+t),n.Na.add(r),Ll(n))}function Ll(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new H(ce.fromString(e)),r=n.Ka.next();n.Ba.set(r,new DE(t)),n.La=n.La.insert(t,r),Zf(n.remoteStore,new Qt(ft(lo(t.path)),r,"TargetPurposeLimboResolution",io.oe))}}async function bs(n,e,t){const r=Q(n),s=[],i=[],a=[];r.xa.isEmpty()||(r.xa.forEach((l,c)=>{a.push(r.Ua(c,e,t).then(d=>{var f;if((d||t)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=t==null?void 0:t.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){s.push(d);const m=xl.zi(c.targetId,d);i.push(m)}}))}),await Promise.all(a),r.Ma.R_(s),await async function(c,d){const f=Q(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>L.forEach(d,v=>L.forEach(v.Wi,T=>f.persistence.referenceDelegate.addReference(m,v.targetId,T)).next(()=>L.forEach(v.Gi,T=>f.persistence.referenceDelegate.removeReference(m,v.targetId,T)))))}catch(m){if(!yr(m))throw m;U("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const v=m.targetId;if(!m.fromCache){const T=f.us.get(v),C=T.snapshotVersion,P=T.withLastLimboFreeSnapshotVersion(C);f.us=f.us.insert(v,P)}}}(r.localStore,i))}async function HE(n,e){const t=Q(n);if(!t.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());const r=await Qf(t.localStore,e);t.currentUser=e,function(i,a){i.Qa.forEach(l=>{l.forEach(c=>{c.reject(new $(j.CANCELLED,a))})}),i.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bs(t,r.Ts)}}function WE(n,e){const t=Q(n),r=t.Ba.get(e);if(r&&r.Fa)return Z().add(r.key);{let s=Z();const i=t.Oa.get(e);if(!i)return s;for(const a of i){const l=t.xa.get(a);s=s.unionWith(l.view.fa)}return s}}function dp(n){const e=Q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=lp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$E.bind(null,e),e.Ma.R_=kE.bind(null,e.eventManager),e.Ma.Wa=PE.bind(null,e.eventManager),e}function KE(n){const e=Q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zE.bind(null,e),e}class Ni{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mo(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return Z1(this.persistence,new X1,e.initialUser,this.serializer)}ja(e){return new Gf(bl.ei,this.serializer)}za(e){return new oE}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ni.provider={build:()=>new Ni};class GE extends Ni{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){se(this.persistence.referenceDelegate instanceof Pi);const r=this.persistence.referenceDelegate.garbageCollector;return new j1(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?ze.withCacheSize(this.cacheSizeBytes):ze.DEFAULT;return new Gf(r=>Pi.ei(r,t),this.serializer)}}class Wa{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HE.bind(null,this.syncEngine),await AE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new RE}()}createDatastore(e){const t=mo(e.databaseInfo.databaseId),r=function(i){return new uE(i)}(e.databaseInfo);return function(i,a,l,c){return new fE(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,i,a,l){return new mE(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,t=>bh(this.syncEngine,t,0),function(){return _h.p()?new _h:new aE}())}createSyncEngine(e,t){return function(s,i,a,l,c,d,f){const m=new OE(s,i,a,l,c,d);return f&&(m.$a=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const i=Q(s);U("RemoteStore","RemoteStore shutting down."),i.k_.add(5),await Ts(i),i.Q_.shutdown(),i.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Wa.provider={build:()=>new Wa};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Ot("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=De.UNAUTHENTICATED,this.clientId=mf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{U("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(U("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Pl(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function oa(n,e){n.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Qf(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Ih(n,e){n.asyncQueue.verifyOperationInProgress();const t=await YE(n);U("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>vh(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>vh(e.remoteStore,s)),n._onlineComponents=e}async function YE(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){U("FirestoreClient","Using user provided OfflineComponentProvider");try{await oa(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;ir("Error using user provided cache. Falling back to memory cache: "+t),await oa(n,new Ni)}}else U("FirestoreClient","Using default OfflineComponentProvider"),await oa(n,new GE(void 0));return n._offlineComponents}async function fp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(U("FirestoreClient","Using user provided OnlineComponentProvider"),await Ih(n,n._uninitializedComponentsProvider._online)):(U("FirestoreClient","Using default OnlineComponentProvider"),await Ih(n,new Wa))),n._onlineComponents}function XE(n){return fp(n).then(e=>e.syncEngine)}async function Di(n){const e=await fp(n),t=e.eventManager;return t.onListen=LE.bind(null,e.syncEngine),t.onUnlisten=ME.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=jE.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=FE.bind(null,e.syncEngine),t}function JE(n,e,t={}){const r=new kt;return n.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const f=new jl({next:v=>{f.eu(),a.enqueueAndForget(()=>Nl(i,m));const T=v.docs.has(l);!T&&v.fromCache?d.reject(new $(j.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&v.fromCache&&c&&c.source==="server"?d.reject(new $(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new Ol(lo(l.path),f,{includeMetadataChanges:!0,ua:!0});return Sl(i,m)}(await Di(n),n.asyncQueue,e,t,r)),r.promise}function ZE(n,e,t={}){const r=new kt;return n.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const f=new jl({next:v=>{f.eu(),a.enqueueAndForget(()=>Nl(i,m)),v.fromCache&&c.source==="server"?d.reject(new $(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new Ol(l,f,{includeMetadataChanges:!0,ua:!0});return Sl(i,m)}(await Di(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(n,e,t){if(!t)throw new $(j.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function eT(n,e,t,r){if(e===!0&&r===!0)throw new $(j.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ch(n){if(!H.isDocumentKey(n))throw new $(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Rh(n){if(H.isDocumentKey(n))throw new $(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _o(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K()}function Xe(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_o(n);throw new $(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pp((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new $(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new $(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new $(j.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vo{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new dw;switch(r.type){case"firstParty":return new gw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Ah.get(t);r&&(U("ComponentProvider","Removing Datastore"),Ah.delete(t),r.terminate())}(this),Promise.resolve()}}function tT(n,e,t,r={}){var s;const i=(n=Xe(n,vo))._getSettings(),a=`${e}:${t}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&ir("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=De.MOCK_USER;else{l=B0(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new $(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new De(d)}n._authCredentials=new fw(new pf(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new un(this.firestore,e,this._query)}}class Be{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Be(this.firestore,e,this._key)}}class Zt extends un{constructor(e,t,r){super(e,t,lo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Be(this.firestore,null,new H(e))}withConverter(e){return new Zt(this.firestore,e,this._path)}}function Xn(n,e,...t){if(n=qe(n),mp("collection","path",e),n instanceof vo){const r=ce.fromString(e,...t);return Rh(r),new Zt(n,null,r)}{if(!(n instanceof Be||n instanceof Zt))throw new $(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ce.fromString(e,...t));return Rh(r),new Zt(n.firestore,null,r)}}function Oi(n,e,...t){if(n=qe(n),arguments.length===1&&(e=mf.newId()),mp("doc","path",e),n instanceof vo){const r=ce.fromString(e,...t);return Ch(r),new Be(n,null,new H(r))}{if(!(n instanceof Be||n instanceof Zt))throw new $(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ce.fromString(e,...t));return Ch(r),new Be(n.firestore,n instanceof Zt?n.converter:null,new H(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Xf(this,"async_queue_retry"),this.fu=()=>{const r=ia();r&&U("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=ia();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=ia();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new kt;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!yr(e))throw e;U("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw Ot("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const s=kl.createAndSchedule(this,e,t,r,i=>this.Su(i));return this.du.push(s),s}pu(){this.Au&&K()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function Sh(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(n,["next","error","complete"])}class an extends vo{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Ph,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ph(e),this._firestoreClient=void 0,await e}}}function nT(n,e){const t=typeof n=="object"?n:sf(),r=typeof n=="string"?n:"(default)",s=hl(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=U0("firestore");i&&tT(s,...i)}return s}function wo(n){if(n._terminated)throw new $(j.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||rT(n),n._firestoreClient}function rT(n){var e,t,r;const s=n._freezeSettings(),i=function(l,c,d,f){return new Sw(l,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,pp(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new QE(n._authCredentials,n._appCheckCredentials,n._queue,i,n._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hr(Ae.fromBase64String(e))}catch(t){throw new $(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new hr(Ae.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ie(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=/^__.*__$/;class iT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Fn(e,this.data,this.fieldMask,t,this.fieldTransforms):new ws(e,this.data,t,this.fieldTransforms)}}function yp(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}class Ul{constructor(e,t,r,s,i,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Fu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Ul(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.xu({path:r,Nu:!1});return s.Lu(e),s}Bu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.xu({path:r,Nu:!1});return s.Fu(),s}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Li(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(yp(this.Mu)&&sT.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class oT{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||mo(e)}$u(e,t,r,s=!1){return new Ul({Mu:e,methodName:t,Ku:r,path:Ie.emptyPath(),Nu:!1,Qu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $l(n){const e=n._freezeSettings(),t=mo(n._databaseId);return new oT(n._databaseId,!!e.ignoreUndefinedProperties,t)}function _p(n,e,t,r,s,i={}){const a=n.$u(i.merge||i.mergeFields?2:0,e,t,s);Ep("Data must be an object, but it was:",a,r);const l=vp(r,a);let c,d;if(i.merge)c=new it(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const v=lT(e,m,t);if(!a.contains(v))throw new $(j.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);uT(f,v)||f.push(v)}c=new it(f),d=a.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=a.fieldTransforms;return new iT(new Ye(l),c,d)}function aT(n,e,t,r=!1){return Bl(t,n.$u(r?4:3,e))}function Bl(n,e){if(wp(n=qe(n)))return Ep("Unsupported field value:",e,n),vp(n,e);if(n instanceof gp)return function(r,s){if(!yp(s.Mu))throw s.qu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.qu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=Bl(l,s.ku(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(n,e)}return function(r,s){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Zw(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ye.fromDate(r);return{timestampValue:ki(s.serializer,i)}}if(r instanceof ye){const i=new ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ki(s.serializer,i)}}if(r instanceof Ml)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hr)return{bytesValue:$f(s.serializer,r._byteString)};if(r instanceof Be){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.qu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:El(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Fl)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw l.qu("VectorValues must only contain numeric values.");return yl(l.serializer,c)})}}}}}}(r,s);throw s.qu(`Unsupported field value: ${_o(r)}`)}(n,e)}function vp(n,e){const t={};return gf(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vn(n,(r,s)=>{const i=Bl(s,e.Ou(r));i!=null&&(t[r]=i)}),{mapValue:{fields:t}}}function wp(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ye||n instanceof Ml||n instanceof hr||n instanceof Be||n instanceof gp||n instanceof Fl)}function Ep(n,e,t){if(!wp(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=_o(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function lT(n,e,t){if((e=qe(e))instanceof Vl)return e._internalPath;if(typeof e=="string")return Tp(n,e);throw Li("Field path arguments must be of type string or ",n,!1,void 0,t)}const cT=new RegExp("[~\\*/\\[\\]]");function Tp(n,e,t){if(e.search(cT)>=0)throw Li(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vl(...e.split("."))._internalPath}catch{throw Li(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Li(n,e,t,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new $(j.INVALID_ARGUMENT,l+n+c)}function uT(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class hT extends bp{data(){return super.data()}}function zl(n,e){return typeof e=="string"?Tp(n,e):e instanceof Vl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new $(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ql{}class Ip extends ql{}function dT(n,e,...t){let r=[];e instanceof ql&&r.push(e),r=r.concat(t),function(i){const a=i.filter(c=>c instanceof Wl).length,l=i.filter(c=>c instanceof Hl).length;if(a>1||a>0&&l>0)throw new $(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Hl extends Ip{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Hl(e,t,r)}_apply(e){const t=this._parse(e);return Ap(e._query,t),new un(e.firestore,e.converter,Va(e._query,t))}_parse(e){const t=$l(e.firestore);return function(i,a,l,c,d,f,m){let v;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new $(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Dh(m,f);const T=[];for(const C of m)T.push(Nh(c,i,C));v={arrayValue:{values:T}}}else v=Nh(c,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Dh(m,f),v=aT(l,a,m,f==="in"||f==="not-in");return ve.create(d,f,v)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Wl extends ql{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wl(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:lt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)Ap(a,c),a=Va(a,c)}(e._query,t),new un(e.firestore,e.converter,Va(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Kl extends Ip{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Kl(e,t)}_apply(e){const t=function(s,i,a){if(s.startAt!==null)throw new $(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ls(i,a)}(e._query,this._field,this._direction);return new un(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new _r(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function fT(n,e="asc"){const t=e,r=zl("orderBy",n);return Kl._create(r,t)}function Nh(n,e,t){if(typeof(t=qe(t))=="string"){if(t==="")throw new $(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!If(e)&&t.indexOf("/")!==-1)throw new $(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ce.fromString(t));if(!H.isDocumentKey(r))throw new $(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ju(n,new H(r))}if(t instanceof Be)return Ju(n,t._key);throw new $(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_o(t)}.`)}function Dh(n,e){if(!Array.isArray(n)||n.length===0)throw new $(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ap(n,e){const t=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new $(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class pT{convertValue(e,t="none"){switch(sn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Vn(e,(s,i)=>{r[s]=this.convertValue(i,t)}),r}convertVectorValue(e){var t,r,s;const i=(s=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>ge(a.doubleValue));return new Fl(i)}convertGeoPoint(e){return new Ml(ge(e.latitude),ge(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ao(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(is(e));default:return null}}convertTimestamp(e){const t=nn(e);return new ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ce.fromString(e);se(Kf(r));const s=new os(r.get(1),r.get(3)),i=new H(r.popFirst(5));return s.isEqual(t)||Ot(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rp extends bp{constructor(e,t,r,s,i,a){super(e,t,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ii(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(zl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ii extends Rp{data(e={}){return super.data(e)}}class kp{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new qr(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ii(this._firestore,this._userDataWriter,r.key,r,new qr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new ii(s._firestore,s._userDataWriter,l.doc.key,l.doc,new qr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new ii(s._firestore,s._userDataWriter,l.doc.key,l.doc,new qr(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:mT(l.type),doc:c,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mT(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(n){n=Xe(n,Be);const e=Xe(n.firestore,an);return JE(wo(e),n._key).then(t=>Pp(e,n,t))}class Gl extends pT{constructor(e){super(),this.firestore=e}convertBytes(e){return new hr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,t)}}function Oh(n){n=Xe(n,un);const e=Xe(n.firestore,an),t=wo(e),r=new Gl(e);return xp(n._query),ZE(t,n._query).then(s=>new kp(e,r,n,s))}function yT(n,e,t){n=Xe(n,Be);const r=Xe(n.firestore,an),s=Cp(n.converter,e);return Yl(r,[_p($l(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,at.none())])}function _T(n){return Yl(Xe(n.firestore,an),[new _l(n._key,at.none())])}function Ql(n,e){const t=Xe(n.firestore,an),r=Oi(n),s=Cp(n.converter,e);return Yl(t,[_p($l(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,at.exists(!1))]).then(()=>r)}function vT(n,...e){var t,r,s;n=qe(n);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Sh(e[a])||(i=e[a],a++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Sh(e[a])){const m=e[a];e[a]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[a+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[a+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let c,d,f;if(n instanceof Be)d=Xe(n.firestore,an),f=lo(n._key.path),c={next:m=>{e[a]&&e[a](Pp(d,n,m))},error:e[a+1],complete:e[a+2]};else{const m=Xe(n,un);d=Xe(m.firestore,an),f=m._query;const v=new Gl(d);c={next:T=>{e[a]&&e[a](new kp(d,v,m,T))},error:e[a+1],complete:e[a+2]},xp(n._query)}return function(v,T,C,P){const R=new jl(P),V=new Ol(T,R,C);return v.asyncQueue.enqueueAndForget(async()=>Sl(await Di(v),V)),()=>{R.eu(),v.asyncQueue.enqueueAndForget(async()=>Nl(await Di(v),V))}}(wo(d),f,l,c)}function Yl(n,e){return function(r,s){const i=new kt;return r.asyncQueue.enqueueAndForget(async()=>UE(await XE(r),s,i)),i.promise}(wo(n),e)}function Pp(n,e,t){const r=t.docs.get(e._key),s=new Gl(n);return new Rp(n,s,e._key,r,new qr(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){mr=s})(pr),sr(new Nn("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new an(new pw(r.getProvider("auth-internal")),new _w(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new $(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new os(d.options.projectId,f)}(a,s),a);return i=Object.assign({useFetchStreams:t},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Jt(Wu,"4.7.5",e),Jt(Wu,"4.7.5","esm2017")})();var wT="firebase",ET="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt(wT,ET,"app");function Xl(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function Sp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TT=Sp,Np=new _s("auth","Firebase",Sp());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji=new cl("@firebase/auth");function bT(n,...e){ji.logLevel<=J.WARN&&ji.warn(`Auth (${pr}): ${n}`,...e)}function oi(n,...e){ji.logLevel<=J.ERROR&&ji.error(`Auth (${pr}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(n,...e){throw Jl(n,...e)}function mt(n,...e){return Jl(n,...e)}function Dp(n,e,t){const r=Object.assign(Object.assign({},TT()),{[e]:t});return new _s("auth","Firebase",r).create(e,{appName:n.name})}function Pt(n){return Dp(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jl(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Np.create(n,...e)}function W(n,e,...t){if(!n)throw Jl(e,...t)}function xt(n){const e="INTERNAL ASSERTION FAILED: "+n;throw oi(e),new Error(e)}function jt(n,e){n||xt(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function xT(){return Lh()==="http:"||Lh()==="https:"}function Lh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xT()||W0()||"connection"in navigator)?navigator.onLine:!0}function AT(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,t){this.shortDelay=e,this.longDelay=t,jt(t>e,"Short delay should be less than long delay!"),this.isMobile=z0()||K0()}get(){return IT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(n,e){jt(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=new xs(3e4,6e4);function hn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function dn(n,e,t,r,s={}){return Lp(n,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=vs(Object.assign({key:n.config.apiKey},a)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const d=Object.assign({method:e,headers:c},i);return H0()||(d.referrerPolicy="no-referrer"),Op.fetch()(jp(n,n.config.apiHost,t,l),d)})}async function Lp(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},CT),e);try{const s=new PT(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Js(n,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Js(n,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Js(n,"email-already-in-use",a);if(c==="USER_DISABLED")throw Js(n,"user-disabled",a);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Dp(n,f,d);ct(n,f)}}catch(s){if(s instanceof Vt)throw s;ct(n,"network-request-failed",{message:String(s)})}}async function Is(n,e,t,r,s={}){const i=await dn(n,e,t,r,s);return"mfaPendingCredential"in i&&ct(n,"multi-factor-auth-required",{_serverResponse:i}),i}function jp(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?Zl(n.config,s):`${n.config.apiScheme}://${s}`}function kT(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(mt(this.auth,"network-request-failed")),RT.get())})}}function Js(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=mt(n,e,r);return s.customData._tokenResponse=t,s}function jh(n){return n!==void 0&&n.enterprise!==void 0}class ST{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return kT(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function NT(n,e){return dn(n,"GET","/v2/recaptchaConfig",hn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DT(n,e){return dn(n,"POST","/v1/accounts:delete",e)}async function Vp(n,e){return dn(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OT(n,e=!1){const t=qe(n),r=await t.getIdToken(e),s=ec(r);W(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Xr(aa(s.auth_time)),issuedAtTime:Xr(aa(s.iat)),expirationTime:Xr(aa(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function aa(n){return Number(n)*1e3}function ec(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return oi("JWT malformed, contained fewer than 3 sections"),null;try{const s=Xd(t);return s?JSON.parse(s):(oi("Failed to decode base64 JWT payload"),null)}catch(s){return oi("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Vh(n){const e=ec(n);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hs(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Vt&&LT(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function LT({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xr(this.lastLoginAt),this.creationTime=Xr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vi(n){var e;const t=n.auth,r=await n.getIdToken(),s=await hs(n,Vp(t,{idToken:r}));W(s==null?void 0:s.users.length,t,"internal-error");const i=s.users[0];n._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Mp(i.providerUserInfo):[],l=MT(n.providerData,a),c=n.isAnonymous,d=!(n.email&&i.passwordHash)&&!(l!=null&&l.length),f=c?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Ga(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(n,m)}async function VT(n){const e=qe(n);await Vi(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MT(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Mp(n){return n.map(e=>{var{providerId:t}=e,r=Xl(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FT(n,e){const t=await Lp(n,{},async()=>{const r=vs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,a=jp(n,s,"/v1/token",`key=${i}`),l=await n._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Op.fetch()(a,{method:"POST",headers:l,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function UT(n,e){return dn(n,"POST","/v2/accounts:revokeToken",hn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){W(e.length!==0,"internal-error");const t=Vh(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:i}=await FT(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:i}=t,a=new er;return r&&(W(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(W(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(W(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new er,this.toJSON())}_performRefresh(){return xt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(n,e){W(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class It{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,i=Xl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ga(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await hs(this,this.stsTokenManager.getToken(this.auth,e));return W(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return OT(this,e)}reload(){return VT(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new It(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Vi(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dt(this.auth.app))return Promise.reject(Pt(this.auth));const e=await this.getIdToken();return await hs(this,DT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,i,a,l,c,d,f;const m=(r=t.displayName)!==null&&r!==void 0?r:void 0,v=(s=t.email)!==null&&s!==void 0?s:void 0,T=(i=t.phoneNumber)!==null&&i!==void 0?i:void 0,C=(a=t.photoURL)!==null&&a!==void 0?a:void 0,P=(l=t.tenantId)!==null&&l!==void 0?l:void 0,R=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,V=(d=t.createdAt)!==null&&d!==void 0?d:void 0,N=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:S,emailVerified:O,isAnonymous:B,providerData:z,stsTokenManager:E}=t;W(S&&E,e,"internal-error");const _=er.fromJSON(this.name,E);W(typeof S=="string",e,"internal-error"),Bt(m,e.name),Bt(v,e.name),W(typeof O=="boolean",e,"internal-error"),W(typeof B=="boolean",e,"internal-error"),Bt(T,e.name),Bt(C,e.name),Bt(P,e.name),Bt(R,e.name),Bt(V,e.name),Bt(N,e.name);const w=new It({uid:S,auth:e,email:v,emailVerified:O,displayName:m,isAnonymous:B,photoURL:C,phoneNumber:T,tenantId:P,stsTokenManager:_,createdAt:V,lastLoginAt:N});return z&&Array.isArray(z)&&(w.providerData=z.map(I=>Object.assign({},I))),R&&(w._redirectEventId=R),w}static async _fromIdTokenResponse(e,t,r=!1){const s=new er;s.updateFromServerResponse(t);const i=new It({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Vi(i),i}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];W(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Mp(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new er;l.updateFromIdToken(r);const c=new It({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Ga(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new Map;function At(n){jt(n instanceof Function,"Expected a class definition");let e=Mh.get(n);return e?(jt(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Mh.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Fp.type="NONE";const Fh=Fp;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(n,e,t){return`firebase:${n}:${e}:${t}`}class tr{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ai(this.userKey,s.apiKey,i),this.fullPersistenceKey=ai("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?It._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new tr(At(Fh),e,r);const s=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||At(Fh);const a=ai(r,e.config.apiKey,e.name);let l=null;for(const d of t)try{const f=await d._get(a);if(f){const m=It._fromJSON(e,f);d!==i&&(l=m),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new tr(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(t.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new tr(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zp(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Up(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Hp(e))return"Blackberry";if(Wp(e))return"Webos";if($p(e))return"Safari";if((e.includes("chrome/")||Bp(e))&&!e.includes("edge/"))return"Chrome";if(qp(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Up(n=Le()){return/firefox\//i.test(n)}function $p(n=Le()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Bp(n=Le()){return/crios\//i.test(n)}function zp(n=Le()){return/iemobile/i.test(n)}function qp(n=Le()){return/android/i.test(n)}function Hp(n=Le()){return/blackberry/i.test(n)}function Wp(n=Le()){return/webos/i.test(n)}function tc(n=Le()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $T(n=Le()){var e;return tc(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function BT(){return G0()&&document.documentMode===10}function Kp(n=Le()){return tc(n)||qp(n)||Wp(n)||Hp(n)||/windows phone/i.test(n)||zp(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(n,e=[]){let t;switch(n){case"Browser":t=Uh(Le());break;case"Worker":t=`${Uh(Le())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pr}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qT(n,e={}){return dn(n,"GET","/v2/passwordPolicy",hn(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=6;class WT{constructor(e){var t,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:HT,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,i,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $h(this),this.idTokenSubscription=new $h(this),this.beforeStateQueue=new zT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Np,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=At(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await tr.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Vp(this,{idToken:e}),r=await It._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(dt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vi(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dt(this.app))return Promise.reject(Pt(this));const t=e?qe(e):null;return t&&W(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dt(this.app)?Promise.reject(Pt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dt(this.app)?Promise.reject(Pt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(At(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qT(this),t=new WT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _s("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await UT(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&At(e)||this._popupRedirectResolver;W(t,this,"argument-error"),this.redirectPersistenceManager=await tr.create(this,[At(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(t);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&bT(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function $n(n){return qe(n)}class $h{constructor(e){this.auth=e,this.observer=null,this.addObserver=nv(t=>this.observer=t)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eo={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GT(n){Eo=n}function Qp(n){return Eo.loadJS(n)}function QT(){return Eo.recaptchaEnterpriseScript}function YT(){return Eo.gapiScript}function XT(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class JT{constructor(){this.enterprise=new ZT}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ZT{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const eb="recaptcha-enterprise",Yp="NO_RECAPTCHA";class tb{constructor(e){this.type=eb,this.auth=$n(e)}async verify(e="verify",t=!1){async function r(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{NT(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new ST(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,a,l){const c=window.grecaptcha;jh(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(Yp)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JT().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(l=>{if(!t&&jh(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=QT();c.length!==0&&(c+=l),Qp(c).then(()=>{s(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function Bh(n,e,t,r=!1,s=!1){const i=new tb(n);let a;if(s)a=Yp;else try{a=await i.verify(t)}catch{a=await i.verify(t,!0)}const l=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Qa(n,e,t,r,s){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Bh(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Bh(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(n,e){const t=hl(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(bi(i,e??{}))return s;ct(s,"already-initialized")}return t.initialize({options:e})}function rb(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(At);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sb(n,e,t){const r=$n(n);W(r._canInitEmulator,r,"emulator-config-failed"),W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Xp(e),{host:a,port:l}=ib(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${a}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),ob()}function Xp(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ib(n){const e=Xp(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:zh(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:zh(a)}}}function zh(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ob(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xt("not implemented")}_getIdTokenResponse(e){return xt("not implemented")}_linkToIdToken(e,t){return xt("not implemented")}_getReauthenticationResolver(e){return xt("not implemented")}}async function ab(n,e){return dn(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lb(n,e){return Is(n,"POST","/v1/accounts:signInWithPassword",hn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cb(n,e){return Is(n,"POST","/v1/accounts:signInWithEmailLink",hn(n,e))}async function ub(n,e){return Is(n,"POST","/v1/accounts:signInWithEmailLink",hn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends nc{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new ds(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new ds(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qa(e,t,"signInWithPassword",lb);case"emailLink":return cb(e,{email:this._email,oobCode:this._password});default:ct(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qa(e,r,"signUpPassword",ab);case"emailLink":return ub(e,{idToken:t,email:this._email,oobCode:this._password});default:ct(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nr(n,e){return Is(n,"POST","/v1/accounts:signInWithIdp",hn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="http://localhost";class On extends nc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new On(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ct("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,i=Xl(t,["providerId","signInMethod"]);if(!r||!s)return null;const a=new On(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return nr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,nr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nr(e,t)}buildRequest(){const e={requestUri:hb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vs(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fb(n){const e=Fr(Ur(n)).link,t=e?Fr(Ur(e)).deep_link_id:null,r=Fr(Ur(n)).deep_link_id;return(r?Fr(Ur(r)).link:null)||r||t||e||n}class rc{constructor(e){var t,r,s,i,a,l;const c=Fr(Ur(e)),d=(t=c.apiKey)!==null&&t!==void 0?t:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,m=db((s=c.mode)!==null&&s!==void 0?s:null);W(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const t=fb(e);try{return new rc(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(){this.providerId=wr.PROVIDER_ID}static credential(e,t){return ds._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=rc.parseLink(t);return W(r,"argument-error"),ds._fromEmailAndCode(e,r.code,r.tenantId)}}wr.PROVIDER_ID="password";wr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Jp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt extends As{constructor(){super("facebook.com")}static credential(e){return On._fromParams({providerId:qt.PROVIDER_ID,signInMethod:qt.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qt.credentialFromTaggedObject(e)}static credentialFromError(e){return qt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qt.credential(e.oauthAccessToken)}catch{return null}}}qt.FACEBOOK_SIGN_IN_METHOD="facebook.com";qt.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht extends As{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return On._fromParams({providerId:Ht.PROVIDER_ID,signInMethod:Ht.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ht.credentialFromTaggedObject(e)}static credentialFromError(e){return Ht.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ht.credential(t,r)}catch{return null}}}Ht.GOOGLE_SIGN_IN_METHOD="google.com";Ht.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt extends As{constructor(){super("github.com")}static credential(e){return On._fromParams({providerId:Wt.PROVIDER_ID,signInMethod:Wt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wt.credentialFromTaggedObject(e)}static credentialFromError(e){return Wt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wt.credential(e.oauthAccessToken)}catch{return null}}}Wt.GITHUB_SIGN_IN_METHOD="github.com";Wt.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt extends As{constructor(){super("twitter.com")}static credential(e,t){return On._fromParams({providerId:Kt.PROVIDER_ID,signInMethod:Kt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Kt.credentialFromTaggedObject(e)}static credentialFromError(e){return Kt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Kt.credential(t,r)}catch{return null}}}Kt.TWITTER_SIGN_IN_METHOD="twitter.com";Kt.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pb(n,e){return Is(n,"POST","/v1/accounts:signUp",hn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const i=await It._fromIdTokenResponse(e,r,s),a=qh(r);return new Ln({user:i,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=qh(r);return new Ln({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function qh(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Vt{constructor(e,t,r,s){var i;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Mi.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Mi(e,t,r,s)}}function Zp(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Mi._fromErrorAndOperation(n,i,e,r):i})}async function mb(n,e,t=!1){const r=await hs(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ln._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gb(n,e,t=!1){const{auth:r}=n;if(dt(r.app))return Promise.reject(Pt(r));const s="reauthenticate";try{const i=await hs(n,Zp(r,s,e,n),t);W(i.idToken,r,"internal-error");const a=ec(i.idToken);W(a,r,"internal-error");const{sub:l}=a;return W(n.uid===l,r,"user-mismatch"),Ln._forOperation(n,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ct(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function em(n,e,t=!1){if(dt(n.app))return Promise.reject(Pt(n));const r="signIn",s=await Zp(n,r,e),i=await Ln._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}async function yb(n,e){return em($n(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tm(n){const e=$n(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _b(n,e,t){if(dt(n.app))return Promise.reject(Pt(n));const r=$n(n),a=await Qa(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pb).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&tm(n),c}),l=await Ln._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function vb(n,e,t){return dt(n.app)?Promise.reject(Pt(n)):yb(qe(n),wr.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tm(n),r})}function wb(n,e,t,r){return qe(n).onIdTokenChanged(e,t,r)}function Eb(n,e,t){return qe(n).beforeAuthStateChanged(e,t)}const Fi="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fi,"1"),this.storage.removeItem(Fi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=1e3,bb=10;class rm extends nm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Kp(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);BT()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,bb):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Tb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rm.type="LOCAL";const xb=rm;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends nm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}sm.type="SESSION";const im=sm;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new To(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:i}=t.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async d=>d(t.origin,i)),c=await Ib(l);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}To.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const d=sc("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const v=m;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(v.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(){return window}function Cb(n){gt().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(){return typeof gt().WorkerGlobalScope<"u"&&typeof gt().importScripts=="function"}async function Rb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kb(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Pb(){return om()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="firebaseLocalStorageDb",Sb=1,Ui="firebaseLocalStorage",lm="fbase_key";class Cs{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function bo(n,e){return n.transaction([Ui],e?"readwrite":"readonly").objectStore(Ui)}function Nb(){const n=indexedDB.deleteDatabase(am);return new Cs(n).toPromise()}function Ya(){const n=indexedDB.open(am,Sb);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ui,{keyPath:lm})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ui)?e(r):(r.close(),await Nb(),e(await Ya()))})})}async function Hh(n,e,t){const r=bo(n,!0).put({[lm]:e,value:t});return new Cs(r).toPromise()}async function Db(n,e){const t=bo(n,!1).get(e),r=await new Cs(t).toPromise();return r===void 0?null:r.value}function Wh(n,e){const t=bo(n,!0).delete(e);return new Cs(t).toPromise()}const Ob=800,Lb=3;class cm{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ya(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Lb)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return om()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=To._getInstance(Pb()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Rb(),!this.activeServiceWorker)return;this.sender=new Ab(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ya();return await Hh(e,Fi,"1"),await Wh(e,Fi),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Hh(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Db(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Wh(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=bo(s,!1).getAll();return new Cs(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ob)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cm.type="LOCAL";const jb=cm;new xs(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(n,e){return e?At(e):(W(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends nc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Mb(n){return em(n.auth,new ic(n),n.bypassAuthState)}function Fb(n){const{auth:e,user:t}=n;return W(t,e,"internal-error"),gb(t,new ic(n),n.bypassAuthState)}async function Ub(n){const{auth:e,user:t}=n;return W(t,e,"internal-error"),mb(t,new ic(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Mb;case"linkViaPopup":case"linkViaRedirect":return Ub;case"reauthViaPopup":case"reauthViaRedirect":return Fb;default:ct(this.auth,"internal-error")}}resolve(e){jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=new xs(2e3,1e4);class Jn extends um{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Jn.currentPopupAction&&Jn.currentPopupAction.cancel(),Jn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return W(e,this.auth,"internal-error"),e}async onExecution(){jt(this.filter.length===1,"Popup operations only handle one event");const e=sc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$b.get())};e()}}Jn.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="pendingRedirect",li=new Map;class zb extends um{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=li.get(this.auth._key());if(!e){try{const r=await qb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}li.set(this.auth._key(),e)}return this.bypassAuthState||li.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qb(n,e){const t=Kb(e),r=Wb(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function Hb(n,e){li.set(n._key(),e)}function Wb(n){return At(n._redirectPersistence)}function Kb(n){return ai(Bb,n.config.apiKey,n.name)}async function Gb(n,e,t=!1){if(dt(n.app))return Promise.reject(Pt(n));const r=$n(n),s=Vb(r,e),a=await new zb(r,s,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=10*60*1e3;class Yb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Xb(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!hm(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(mt(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Qb&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kh(e))}saveEventToCache(e){this.cachedEventUids.add(Kh(e)),this.lastProcessedEventTime=Date.now()}}function Kh(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function hm({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Xb(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hm(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jb(n,e={}){return dn(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ex=/^https?/;async function tx(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Jb(n);for(const t of e)try{if(nx(t))return}catch{}ct(n,"unauthorized-domain")}function nx(n){const e=Ka(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!ex.test(t))return!1;if(Zb.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new xs(3e4,6e4);function Gh(){const n=gt().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function sx(n){return new Promise((e,t)=>{var r,s,i;function a(){Gh(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gh(),t(mt(n,"network-request-failed"))},timeout:rx.get()})}if(!((s=(r=gt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=gt().gapi)===null||i===void 0)&&i.load)a();else{const l=XT("iframefcb");return gt()[l]=()=>{gapi.load?a():t(mt(n,"network-request-failed"))},Qp(`${YT()}?onload=${l}`).catch(c=>t(c))}}).catch(e=>{throw ci=null,e})}let ci=null;function ix(n){return ci=ci||sx(n),ci}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=new xs(5e3,15e3),ax="__/auth/iframe",lx="emulator/auth/iframe",cx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ux=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hx(n){const e=n.config;W(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Zl(e,lx):`https://${n.config.authDomain}/${ax}`,r={apiKey:e.apiKey,appName:n.name,v:pr},s=ux.get(n.config.apiHost);s&&(r.eid=s);const i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${vs(r).slice(1)}`}async function dx(n){const e=await ix(n),t=gt().gapi;return W(t,n,"internal-error"),e.open({where:document.body,url:hx(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cx,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=mt(n,"network-request-failed"),l=gt().setTimeout(()=>{i(a)},ox.get());function c(){gt().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},px=500,mx=600,gx="_blank",yx="http://localhost";class Qh{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _x(n,e,t,r=px,s=mx){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},fx),{width:r.toString(),height:s.toString(),top:i,left:a}),d=Le().toLowerCase();t&&(l=Bp(d)?gx:t),Up(d)&&(e=e||yx,c.scrollbars="yes");const f=Object.entries(c).reduce((v,[T,C])=>`${v}${T}=${C},`,"");if($T(d)&&l!=="_self")return vx(e||"",l),new Qh(null);const m=window.open(e||"",l,f);W(m,n,"popup-blocked");try{m.focus()}catch{}return new Qh(m)}function vx(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="__/auth/handler",Ex="emulator/auth/handler",Tx=encodeURIComponent("fac");async function Yh(n,e,t,r,s,i){W(n.config.authDomain,n,"auth-domain-config-required"),W(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:pr,eventId:s};if(e instanceof Jp){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",tv(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))a[f]=m}if(e instanceof As){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);const l=a;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await n._getAppCheckToken(),d=c?`#${Tx}=${encodeURIComponent(c)}`:"";return`${bx(n)}?${vs(l).slice(1)}${d}`}function bx({config:n}){return n.emulator?Zl(n,Ex):`https://${n.authDomain}/${wx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="webStorageSupport";class xx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=im,this._completeRedirectFn=Gb,this._overrideRedirectResult=Hb}async _openPopup(e,t,r,s){var i;jt((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await Yh(e,t,r,Ka(),s);return _x(e,a,sc())}async _openRedirect(e,t,r,s){await this._originValidation(e);const i=await Yh(e,t,r,Ka(),s);return Cb(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(jt(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await dx(e),r=new Yb(e);return t.register("authEvent",s=>(W(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(la,{type:la},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[la];a!==void 0&&t(!!a),ct(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=tx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Kp()||$p()||tc()}}const Ix=xx;var Xh="@firebase/auth",Jh="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Rx(n){sr(new Nn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;W(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gp(n)},d=new KT(r,s,i,c);return rb(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),sr(new Nn("auth-internal",e=>{const t=$n(e.getProvider("auth").getImmediate());return(r=>new Ax(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jt(Xh,Jh,Cx(n)),Jt(Xh,Jh,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=5*60,Px=ef("authIdTokenMaxAge")||kx;let Zh=null;const Sx=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Px)return;const s=t==null?void 0:t.token;Zh!==s&&(Zh=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Nx(n=sf()){const e=hl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=nb(n,{popupRedirectResolver:Ix,persistence:[jb,xb,im]}),r=ef("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=Sx(i.toString());Eb(t,a,()=>a(t.currentUser)),wb(t,l=>a(l))}}const s=Jd("auth");return s&&sb(t,`http://${s}`),t}function Dx(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}GT({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const i=mt("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",Dx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Rx("Browser");var Wn={};const Ox={apiKey:Wn.REACT_APP_API_KEY,authDomain:Wn.REACT_APP_AUTH_DOMAIN,projectId:Wn.REACT_APP_PROJECT_ID,storageBucket:Wn.REACT_APP_STORAGE_BUCKET,messagingSenderId:Wn.REACT_APP_MESSAGING_SENDER_ID,appId:Wn.REACT_APP_APP_ID},dm=rf(Ox),Tt=nT(dm),fm=Nx(dm);function Lx(){const n=b.useContext(Ce),{mode:e}=n,t=Bi(),r=fs(N=>N.cart);console.log(r);const s=N=>{t(W_(N)),Y.success("Delete cart")};b.useEffect(()=>{localStorage.setItem("cart",JSON.stringify(r))},[r]);const[i,a]=b.useState(0);b.useEffect(()=>{let N=0;r.forEach(S=>{N=N+parseInt(S.price)}),a(N),console.log(N)},[r]);const l=parseInt(100),c=l+i,[d,f]=b.useState(""),[m,v]=b.useState(""),[T,C]=b.useState(""),[P,R]=b.useState(""),V=async()=>{if(d===""||m==""||T==""||P=="")return Y.error("All fields are required",{position:"top-center",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"});const N={name:d,address:m,pincode:T,phoneNumber:P,date:new Date().toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric"})};var S={key:" ",key_secret:" ",amount:parseInt(c*100),currency:"INR",order_receipt:"order_rcptid_"+d,name:"UrbanCart",description:"for testing purpose",handler:function(B){console.log(B),Y.success("Payment Successful");const z=B.razorpay_payment_id,E={cartItems:r,addressInfo:N,date:new Date().toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric"}),email:JSON.parse(localStorage.getItem("user")).user.email,userid:JSON.parse(localStorage.getItem("user")).user.uid,paymentId:z};try{const _=Xn(Tt,"order");Ql(_,E)}catch(_){console.log(_)}},theme:{color:"#3399cc"}},O=new window.Razorpay(S);O.open(),console.log(O)};return h.jsx(fr,{children:h.jsxs("div",{className:"h-screen bg-gray-100 pt-5 mb-[60%] ",style:{backgroundColor:e==="dark"?"#282c34":"",color:e==="dark"?"white":""},children:[h.jsx("h1",{className:"mb-10 text-center text-2xl font-bold",children:"Cart Items"}),h.jsxs("div",{className:"mx-auto max-w-5xl justify-center px-6 md:flex md:space-x-6 xl:px-0 ",children:[h.jsx("div",{className:"rounded-lg md:w-2/3 ",children:r.map((N,S)=>{const{title:O,price:B,description:z,imageUrl:E}=N;return h.jsxs("div",{className:"justify-between mb-6 rounded-lg border  drop-shadow-xl bg-white p-6  sm:flex  sm:justify-start",style:{backgroundColor:e==="dark"?"rgb(32 33 34)":"",color:e==="dark"?"white":""},children:[h.jsx("img",{src:E,alt:"product-image",className:"w-full rounded-lg sm:w-40"}),h.jsxs("div",{className:"sm:ml-4 sm:flex sm:w-full sm:justify-between",children:[h.jsxs("div",{className:"mt-5 sm:mt-0",children:[h.jsx("h2",{className:"text-lg font-bold text-gray-900",style:{color:e==="dark"?"white":""},children:O}),h.jsx("h2",{className:"text-sm  text-gray-900",style:{color:e==="dark"?"white":""},children:z}),h.jsxs("p",{className:"mt-1 text-xs font-semibold text-gray-700",style:{color:e==="dark"?"white":""},children:["₹",B]})]}),h.jsx("div",{onClick:()=>s(N),className:"mt-4 flex justify-between sm:space-y-6 sm:mt-0 sm:block sm:space-x-6",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})]})]})})}),h.jsxs("div",{className:"mt-6 h-full rounded-lg border bg-white p-6 shadow-md md:mt-0 md:w-1/3",style:{backgroundColor:e==="dark"?"rgb(32 33 34)":"",color:e==="dark"?"white":""},children:[h.jsxs("div",{className:"mb-2 flex justify-between",children:[h.jsx("p",{className:"text-gray-700",style:{color:e==="dark"?"white":""},children:"Subtotal"}),h.jsxs("p",{className:"text-gray-700",style:{color:e==="dark"?"white":""},children:["₹",i]})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("p",{className:"text-gray-700",style:{color:e==="dark"?"white":""},children:"Shipping"}),h.jsxs("p",{className:"text-gray-700",style:{color:e==="dark"?"white":""},children:["₹",l]})]}),h.jsx("hr",{className:"my-4"}),h.jsxs("div",{className:"flex justify-between mb-3",children:[h.jsx("p",{className:"text-lg font-bold",style:{color:e==="dark"?"white":""},children:"Total"}),h.jsx("div",{className:!0,children:h.jsxs("p",{className:"mb-1 text-lg font-bold",style:{color:e==="dark"?"white":""},children:["₹",c]})})]}),h.jsx(N0,{name:d,address:m,pincode:T,phoneNumber:P,setName:f,setAddress:v,setPincode:C,setPhoneNumber:R,buyNow:V})]})]})]})})}function jx(n){return ln({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M504.717 320H211.572l6.545 32h268.418c15.401 0 26.816 14.301 23.403 29.319l-5.517 24.276C523.112 414.668 536 433.828 536 456c0 31.202-25.519 56.444-56.824 55.994-29.823-.429-54.35-24.631-55.155-54.447-.44-16.287 6.085-31.049 16.803-41.548H231.176C241.553 426.165 248 440.326 248 456c0 31.813-26.528 57.431-58.67 55.938-28.54-1.325-51.751-24.385-53.251-52.917-1.158-22.034 10.436-41.455 28.051-51.586L93.883 64H24C10.745 64 0 53.255 0 40V24C0 10.745 10.745 0 24 0h102.529c11.401 0 21.228 8.021 23.513 19.19L159.208 64H551.99c15.401 0 26.816 14.301 23.403 29.319l-47.273 208C525.637 312.246 515.923 320 504.717 320zM408 168h-48v-40c0-8.837-7.163-16-16-16h-16c-8.837 0-16 7.163-16 16v40h-48c-8.837 0-16 7.163-16 16v16c0 8.837 7.163 16 16 16h48v40c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-40h48c8.837 0 16-7.163 16-16v-16c0-8.837-7.163-16-16-16z"},child:[]}]})(n)}function Zs(n){return ln({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"},child:[]}]})(n)}function Vx(n){return ln({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}function oc(n){return e=>!!e.type&&e.type.tabsRole===n}const xo=oc("Tab"),ac=oc("TabList"),lc=oc("TabPanel");function Mx(n){return xo(n)||ac(n)||lc(n)}function Xa(n,e){return b.Children.map(n,t=>t===null?null:Mx(t)?e(t):t.props&&t.props.children&&typeof t.props.children=="object"?b.cloneElement(t,{...t.props,children:Xa(t.props.children,e)}):t)}function pm(n,e){return b.Children.forEach(n,t=>{t!==null&&(xo(t)||lc(t)?e(t):t.props&&t.props.children&&typeof t.props.children=="object"&&(ac(t)&&e(t),pm(t.props.children,e)))})}function mm(n){let e=0;return pm(n,t=>{xo(t)&&e++}),e}function gm(n){return n&&"getAttribute"in n}function ed(n){return gm(n)&&n.getAttribute("data-rttab")}function vn(n){return gm(n)&&n.getAttribute("aria-disabled")==="true"}let $i;function Fx(n){const e=n||(typeof window<"u"?window:void 0);try{$i=!!(typeof e<"u"&&e.document&&e.document.activeElement)}catch{$i=!1}}const Ux={className:"react-tabs",focus:!1},ym=n=>{let e=b.useRef([]),t=b.useRef([]);const r=b.useRef();function s(y,q){if(y<0||y>=d())return;const{onSelect:X,selectedIndex:Re}=n;X(y,Re,q)}function i(y){const q=d();for(let X=y+1;X<q;X++)if(!vn(f(X)))return X;for(let X=0;X<y;X++)if(!vn(f(X)))return X;return y}function a(y){let q=y;for(;q--;)if(!vn(f(q)))return q;for(q=d();q-- >y;)if(!vn(f(q)))return q;return y}function l(){const y=d();for(let q=0;q<y;q++)if(!vn(f(q)))return q;return null}function c(){let y=d();for(;y--;)if(!vn(f(y)))return y;return null}function d(){const{children:y}=n;return mm(y)}function f(y){return e.current[`tabs-${y}`]}function m(){let y=0;const{children:q,disabledTabClassName:X,focus:Re,forceRenderTabPanel:ie,selectedIndex:ae,selectedTabClassName:ue,selectedTabPanelClassName:ut,environment:de}=n;t.current=t.current||[];let je=t.current.length-d();const ne=b.useId();for(;je++<0;)t.current.push(`${ne}${t.current.length}`);return Xa(q,Ze=>{let Ve=Ze;if(ac(Ze)){let Qe=0,et=!1;$i==null&&Fx(de);const vt=de||(typeof window<"u"?window:void 0);$i&&vt&&(et=M.Children.toArray(Ze.props.children).filter(xo).some((ht,Mt)=>vt.document.activeElement===f(Mt))),Ve=b.cloneElement(Ze,{children:Xa(Ze.props.children,ht=>{const Mt=`tabs-${Qe}`,fn=ae===Qe,pn={tabRef:Er=>{e.current[Mt]=Er},id:t.current[Qe],selected:fn,focus:fn&&(Re||et)};return ue&&(pn.selectedClassName=ue),X&&(pn.disabledClassName=X),Qe++,b.cloneElement(ht,pn)})})}else if(lc(Ze)){const Qe={id:t.current[y],selected:ae===y};ie&&(Qe.forceRender=ie),ut&&(Qe.selectedClassName=ut),y++,Ve=b.cloneElement(Ze,Qe)}return Ve})}function v(y){const{direction:q,disableUpDownKeys:X,disableLeftRightKeys:Re}=n;if(C(y.target)){let{selectedIndex:ie}=n,ae=!1,ue=!1;(y.code==="Space"||y.keyCode===32||y.code==="Enter"||y.keyCode===13)&&(ae=!0,ue=!1,T(y)),!Re&&(y.keyCode===37||y.code==="ArrowLeft")||!X&&(y.keyCode===38||y.code==="ArrowUp")?(q==="rtl"?ie=i(ie):ie=a(ie),ae=!0,ue=!0):!Re&&(y.keyCode===39||y.code==="ArrowRight")||!X&&(y.keyCode===40||y.code==="ArrowDown")?(q==="rtl"?ie=a(ie):ie=i(ie),ae=!0,ue=!0):y.keyCode===35||y.code==="End"?(ie=c(),ae=!0,ue=!0):(y.keyCode===36||y.code==="Home")&&(ie=l(),ae=!0,ue=!0),ae&&y.preventDefault(),ue&&s(ie,y)}}function T(y){let q=y.target;do if(C(q)){if(vn(q))return;const X=[].slice.call(q.parentNode.children).filter(ed).indexOf(q);s(X,y);return}while((q=q.parentNode)!=null)}function C(y){if(!ed(y))return!1;let q=y.parentElement;do{if(q===r.current)return!0;if(q.getAttribute("data-rttabs"))break;q=q.parentElement}while(q);return!1}const{children:P,className:R,disabledTabClassName:V,domRef:N,focus:S,forceRenderTabPanel:O,onSelect:B,selectedIndex:z,selectedTabClassName:E,selectedTabPanelClassName:_,environment:w,disableUpDownKeys:I,disableLeftRightKeys:x,...A}={...Ux,...n};return M.createElement("div",Object.assign({},A,{className:ot(R),onClick:T,onKeyDown:v,ref:y=>{r.current=y,N&&N(y)},"data-rttabs":!0}),m())};ym.propTypes={};const $x=0,ui=1,Bx={defaultFocus:!1,focusTabOnClick:!0,forceRenderTabPanel:!1,selectedIndex:null,defaultIndex:null,environment:null,disableUpDownKeys:!1,disableLeftRightKeys:!1},zx=n=>n.selectedIndex===null?ui:$x,cc=n=>{const{children:e,defaultFocus:t,defaultIndex:r,focusTabOnClick:s,onSelect:i,...a}={...Bx,...n},[l,c]=b.useState(t),[d]=b.useState(zx(a)),[f,m]=b.useState(d===ui?r||0:null);if(b.useEffect(()=>{c(!1)},[]),d===ui){const C=mm(e);b.useEffect(()=>{if(f!=null){const P=Math.max(0,C-1);m(Math.min(f,P))}},[C])}const v=(C,P,R)=>{typeof i=="function"&&i(C,P,R)===!1||(s&&c(!0),d===ui&&m(C))};let T={...n,...a};return T.focus=l,T.onSelect=v,f!=null&&(T.selectedIndex=f),delete T.defaultFocus,delete T.defaultIndex,delete T.focusTabOnClick,M.createElement(ym,T,e)};cc.propTypes={};cc.tabsRole="Tabs";const qx={className:"react-tabs__tab-list"},uc=n=>{const{children:e,className:t,...r}={...qx,...n};return M.createElement("ul",Object.assign({},r,{className:ot(t),role:"tablist"}),e)};uc.tabsRole="TabList";uc.propTypes={};const ca="react-tabs__tab",Hx={className:ca,disabledClassName:`${ca}--disabled`,focus:!1,id:null,selected:!1,selectedClassName:`${ca}--selected`},Jr=n=>{let e=b.useRef();const{children:t,className:r,disabled:s,disabledClassName:i,focus:a,id:l,selected:c,selectedClassName:d,tabIndex:f,tabRef:m,...v}={...Hx,...n};return b.useEffect(()=>{c&&a&&e.current.focus()},[c,a]),M.createElement("li",Object.assign({},v,{className:ot(r,{[d]:c,[i]:s}),ref:T=>{e.current=T,m&&m(T)},role:"tab",id:`tab${l}`,"aria-selected":c?"true":"false","aria-disabled":s?"true":"false","aria-controls":`panel${l}`,tabIndex:f||(c?"0":null),"data-rttab":!0}),t)};Jr.propTypes={};Jr.tabsRole="Tab";const td="react-tabs__tab-panel",Wx={className:td,forceRender:!1,selectedClassName:`${td}--selected`},Zr=n=>{const{children:e,className:t,forceRender:r,id:s,selected:i,selectedClassName:a,...l}={...Wx,...n};return M.createElement("div",Object.assign({},l,{className:ot(t,{[a]:i}),role:"tabpanel",id:`panel${s}`,"aria-labelledby":`tab${s}`}),r||i?e:null)};Zr.tabsRole="TabPanel";Zr.propTypes={};function Kx(n){return ln({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 10h-2V8h2v2zm0-4h-2V1h2v5zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03L21 4.96 19.25 4l-3.7 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"},child:[]}]})(n)}function Gx(n){return ln({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M832 312H696v-16c0-101.6-82.4-184-184-184s-184 82.4-184 184v16H192c-17.7 0-32 14.3-32 32v536c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V344c0-17.7-14.3-32-32-32zm-208 0H400v-16c0-61.9 50.1-112 112-112s112 50.1 112 112v16z"},child:[]}]})(n)}function Qx(){const n=b.useContext(Ce),{mode:e,product:t,edithandle:r,deleteProduct:s,order:i,user:a}=n;b.useState(!1);const l=()=>{window.location.href="/Addproducts"};return h.jsx(h.Fragment,{children:h.jsx("div",{className:"container mx-auto",children:h.jsx("div",{className:"tab container mx-auto ",children:h.jsxs(cc,{defaultIndex:0,className:" ",children:[h.jsxs(uc,{className:"md:flex md:space-x-8 bg-  grid grid-cols-2 text-center gap-4   md:justify-center mb-10 ",children:[h.jsx(Jr,{children:h.jsxs("button",{type:"button",className:"font-medium border-b-2 hover:shadow-purple-700 border-purple-500 text-purple-500 rounded-lg text-xl shadow-[inset_0_0_8px_rgba(0,0,0,0.6)]  px-5 py-1.5 text-center bg-[#605d5d12] ",children:[h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx(Kx,{}),"Products"]})," "]})}),h.jsx(Jr,{children:h.jsx("button",{type:"button",className:"font-medium border-b-2 border-pink-500 bg-[#605d5d12] text-pink-500  hover:shadow-pink-700  rounded-lg text-xl shadow-[inset_0_0_8px_rgba(0,0,0,0.6)]    px-5 py-1.5 text-center ",children:h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx(Gx,{})," Order"]})})}),h.jsx(Jr,{children:h.jsx("button",{type:"button",className:"font-medium border-b-2 border-green-500 bg-[#605d5d12] text-green-500 rounded-lg text-xl  hover:shadow-green-700 shadow-[inset_0_0_8px_rgba(0,0,0,0.6)]   px-5 py-1.5 text-center ",children:h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx(Vx,{})," Users"]})})})]}),h.jsx(Zr,{children:h.jsxs("div",{className:"  px-4 md:px-0 mb-16",children:[h.jsx("h1",{className:" text-center mb-5 text-3xl font-semibold underline",style:{color:e==="dark"?"white":""},children:"Product Details"}),h.jsx("div",{className:" flex justify-end",children:h.jsxs("button",{onClick:l,type:"button",className:"focus:outline-none text-white bg-pink-600 shadow-[inset_0_0_10px_rgba(0,0,0,0.6)] border hover:bg-pink-700 outline-0 font-medium rounded-lg text-sm px-5 py-2.5 mb-2",style:{backgroundColor:e==="dark"?"rgb(46 49 55)":"",color:e==="dark"?"white":""},children:[" ",h.jsxs("div",{className:"flex gap-2 items-center",children:["Add Product ",h.jsx(jx,{size:20})]})]})}),h.jsx("div",{className:"relative overflow-x-auto ",children:h.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400  ",children:[h.jsx("thead",{className:"text-xs border border-gray-600 text-black uppercase bg-gray-200 shadow-[inset_0_0_8px_rgba(0,0,0,0.6)]",style:{backgroundColor:e==="dark"?"rgb(46 49 55)":"",color:e==="dark"?"white":""},children:h.jsxs("tr",{children:[h.jsx("th",{scope:"col",className:"px-6 py-3",children:"S.No"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Image"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Title"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Price"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Category"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),t.map((c,d)=>{const{title:f,price:m,imageUrl:v,category:T,description:C,date:P}=c;return h.jsx("tbody",{className:"",children:h.jsxs("tr",{className:"bg-gray-50 border-b  dark:border-gray-700",style:{backgroundColor:e==="dark"?"rgb(46 49 55)":"",color:e==="dark"?"white":""},children:[h.jsxs("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:[d+1,"."]}),h.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-black whitespace-nowrap",children:h.jsx("img",{className:"w-16",src:v,alt:"img"})}),h.jsx("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:f}),h.jsxs("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:["₹",m]}),h.jsx("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:T}),h.jsx("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:P}),h.jsx("td",{className:"px-6 py-4",children:h.jsx("div",{className:" flex gap-2",children:h.jsxs("div",{className:" flex gap-2 cursor-pointer text-black ",style:{color:e==="dark"?"white":""},children:[h.jsx("div",{onClick:()=>s(c),children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})}),h.jsx(he,{to:"/updateproduct",children:h.jsx("div",{onClick:()=>r(c),children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})})})})]})})})]})})})]})})]})}),h.jsx(Zr,{children:h.jsxs("div",{className:"relative overflow-x-auto mb-16",children:[h.jsx("h1",{className:" text-center mb-5 text-3xl font-semibold underline",style:{color:e==="dark"?"white":""},children:"Order Details"}),i.map((c,d)=>h.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[h.jsx("thead",{className:"text-xs text-black uppercase bg-gray-200 ",style:{backgroundColor:e==="dark"?"rgb(46 49 55)":"",color:e==="dark"?"white":""},children:h.jsxs("tr",{children:[h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Payment Id"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Image"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Title"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Price"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Category"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Name"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Address"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Pincode"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Phone Number"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Email"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date"})]})}),c.cartItems.map((f,m)=>{const{title:v,description:T,category:C,imageUrl:P,price:R}=f;return h.jsx("tbody",{children:h.jsxs("tr",{className:"bg-gray-50 border-b  dark:border-gray-700",style:{backgroundColor:e==="dark"?"rgb(46 49 55)":"",color:e==="dark"?"white":""},children:[h.jsx("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:c.paymentId}),h.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-black whitespace-nowrap",children:h.jsx("img",{className:"w-16",src:P,alt:"img"})}),h.jsx("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:v}),h.jsxs("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:["₹",R]}),h.jsx("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:C}),h.jsx("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:c.addressInfo.name}),h.jsx("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:c.addressInfo.address}),h.jsx("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:c.addressInfo.pincode}),h.jsx("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:c.addressInfo.phoneNumber}),h.jsx("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:c.email}),h.jsx("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:c.date})]})})})]}))]})}),h.jsx(Zr,{children:h.jsxs("div",{className:"relative overflow-x-auto mb-10",children:[h.jsx("h1",{className:" text-center mb-5 text-3xl font-semibold underline",style:{color:e==="dark"?"white":""},children:"User Details"}),h.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[h.jsx("thead",{className:"text-xs text-black uppercase bg-gray-200 ",style:{backgroundColor:e==="dark"?"rgb(46 49 55)":"",color:e==="dark"?"white":""},children:h.jsxs("tr",{children:[h.jsx("th",{scope:"col",className:"px-6 py-3",children:"S.No"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Name"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Email"}),h.jsx("th",{scope:"col",className:"px-6 py-3",children:"Uid"})]})}),a.map((c,d)=>{const{name:f,uid:m,email:v,date:T}=c;return h.jsx("tbody",{children:h.jsxs("tr",{className:"bg-gray-50 border-b  dark:border-gray-700",style:{backgroundColor:e==="dark"?"rgb(46 49 55)":"",color:e==="dark"?"white":""},children:[h.jsxs("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:[d+1,"."]}),h.jsx("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:f}),h.jsx("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:v}),h.jsx("td",{className:"px-6 py-4 text-black ",style:{color:e==="dark"?"white":""},children:m})]})})})]})]})})]})})})})}function Yx(){const n=b.useContext(Ce),{mode:e}=n;return h.jsx(fr,{children:h.jsxs("section",{className:"text-gray-600 body-font mt-10 mb-10",children:[h.jsx("div",{className:"container px-5 mx-auto mb-10",children:h.jsxs("div",{className:"flex flex-wrap -m-4 text-center",children:[h.jsx("div",{className:"p-4 md:w-1/4 sm:w-1/2 w-full",children:h.jsxs("div",{className:" border-2 hover:shadow-purple-600 shadow-[inset_0_0_10px_rgba(0,0,0,0.6)] bg-gray-100 border-gray-300    px-4 py-3 rounded-xl",style:{backgroundColor:e==="dark"?"rgb(46 49 55)":"",color:e==="dark"?"white":""},children:[h.jsx("div",{className:"text-purple-500 w-12 h-12 mb-3 inline-block",viewBox:"0 0 24 24",children:h.jsx(Zs,{size:50})}),h.jsx("h2",{className:"title-font font-medium text-3xl text-black fonts1",style:{color:e==="dark"?"white":""},children:"10"}),h.jsx("p",{className:" text-purple-500  font-bold",style:{color:e==="dark"?"white":""},children:"Total Products"})]})}),h.jsx("div",{className:"p-4 md:w-1/4 sm:w-1/2 w-full",children:h.jsxs("div",{className:" border-2 hover:shadow-purple-600 shadow-[inset_0_0_10px_rgba(0,0,0,0.6)] bg-gray-100 border-gray-300    px-4 py-3 rounded-xl",style:{backgroundColor:e==="dark"?"rgb(46 49 55)":"",color:e==="dark"?"white":""},children:[h.jsx("div",{className:"text-purple-500 w-12 h-12 mb-3 inline-block",viewBox:"0 0 24 24",children:h.jsx(Zs,{size:50})}),h.jsx("h2",{className:"title-font font-medium text-3xl text-black fonts1",style:{color:e==="dark"?"white":""},children:"10"}),h.jsx("p",{className:" text-purple-500  font-bold",style:{color:e==="dark"?"white":""},children:"Total Orders"})]})}),h.jsx("div",{className:"p-4 md:w-1/4 sm:w-1/2 w-full",children:h.jsxs("div",{className:" border-2 hover:shadow-purple-600 shadow-[inset_0_0_10px_rgba(0,0,0,0.6)] bg-gray-100 border-gray-300    px-4 py-3 rounded-xl",style:{backgroundColor:e==="dark"?"rgb(46 49 55)":"",color:e==="dark"?"white":""},children:[h.jsx("div",{className:"text-purple-500 w-12 h-12 mb-3 inline-block",viewBox:"0 0 24 24",children:h.jsx(Zs,{size:50})}),h.jsx("h2",{className:"title-font font-medium text-3xl text-black fonts1",style:{color:e==="dark"?"white":""},children:"20"}),h.jsx("p",{className:" text-purple-500  font-bold",style:{color:e==="dark"?"white":""},children:"Total Users"})]})}),h.jsx("div",{className:"p-4 md:w-1/4 sm:w-1/2 w-full",children:h.jsxs("div",{className:" border-2 hover:shadow-purple-600 shadow-[inset_0_0_10px_rgba(0,0,0,0.6)] bg-gray-100 border-gray-300    px-4 py-3 rounded-xl",style:{backgroundColor:e==="dark"?"rgb(46 49 55)":"",color:e==="dark"?"white":""},children:[h.jsx("div",{className:"text-purple-500 w-12 h-12 mb-3 inline-block",viewBox:"0 0 24 24",children:h.jsx(Zs,{size:50})}),h.jsx("h2",{className:"title-font font-medium text-3xl text-black fonts1",style:{color:e==="dark"?"white":""},children:"20"}),h.jsx("p",{className:" text-purple-500  font-bold",style:{color:e==="dark"?"white":""},children:"Total Products"})]})})]})}),h.jsx(Qx,{})]})})}const Xx=()=>h.jsx("div",{children:"No page"});function Jx(n){const[e,t]=b.useState("light"),r=()=>{e==="light"?(t("dark"),document.body.style.backgroundColor="rgb(17, 24, 39)"):(t("light"),document.body.style.backgroundColor="white")},[s,i]=b.useState(!1),[a,l]=b.useState({title:null,price:null,imageUrl:null,category:null,description:null,time:ye.now(),date:new Date().toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric"})}),c=async()=>{if(a.title==null||a.price==null||a.imageUrl==null||a.category==null||a.description==null)return Y.error("all fields are required");i(!0);try{const x=Xn(Tt,"products");await Ql(x,a),Y.success("Add product successfully"),setTimeout(()=>{window.location.href="/Dashboard"},800),m(),i(!1)}catch(x){console.log(x),i(!1)}},[d,f]=b.useState([]),m=async()=>{i(!0);try{const x=dT(Xn(Tt,"products"),fT("time")),A=vT(x,y=>{let q=[];y.forEach(X=>{q.push({...X.data(),id:X.id})}),f(q),i(!1)});return()=>A}catch(x){console.log(x),i(!1)}};b.useEffect(()=>{m()},[]);const v=x=>{l(x)},T=async()=>{i(!0);try{await yT(Oi(Tt,"products",a.id),a),Y.success("Product Updated successfully"),setTimeout(()=>{window.location.href="/dashboard"},800),m(),i(!1)}catch(x){console.log(x),i(!1)}},C=async x=>{i(!0);try{await _T(Oi(Tt,"products",x.id)),Y.success("Product Deleted successfully"),m(),i(!1)}catch(A){console.log(A),i(!1)}},[P,R]=b.useState([]),V=async()=>{i(!0);try{const x=await Oh(Xn(Tt,"order")),A=[];x.forEach(y=>{A.push(y.data()),i(!1)}),R(A),console.log(A),i(!1)}catch(x){console.log(x),i(!1)}},[N,S]=b.useState([]),O=async()=>{i(!0);try{const x=await Oh(Xn(Tt,"users")),A=[];x.forEach(y=>{A.push(y.data()),i(!1)}),S(A),console.log(A),i(!1)}catch(x){console.log(x),i(!1)}};b.useEffect(()=>{V(),O()},[]);const[B,z]=b.useState(""),[E,_]=b.useState(""),[w,I]=b.useState("");return h.jsx(Ce.Provider,{value:{mode:e,toggleMode:r,loading:s,setLoading:i,products:a,setProducts:l,addProduct:c,product:d,edithandle:v,updateProduct:T,deleteProduct:C,order:P,user:N,searchkey:B,setSearchkey:z,filterType:E,setFilterType:_,filterPrice:w,setFilterPrice:I},children:n.children})}function Zx(){const n=b.useContext(Ce),{loading:e,setLoading:t}=n,[r,s]=b.useState(""),[i,a]=b.useState(""),l=Ym(),c=async()=>{t(!0);try{const d=await vb(fm,r,i);Y.success("Login successful",{position:"top-right",autoClose:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),localStorage.setItem("user",JSON.stringify(d)),l("/"),t(!1)}catch(d){console.log(d),t(e)}};return h.jsxs("div",{className:" flex justify-center items-center h-screen",children:[e&&h.jsx(ll,{}),h.jsxs("div",{className:" bg-gray-800 px-10 py-10 rounded-xl ",children:[h.jsx("div",{className:"",children:h.jsx("h1",{className:"text-center text-white text-xl mb-4 font-bold",children:"Login"})}),h.jsx("div",{children:h.jsx("input",{type:"email",value:r,onChange:d=>s(d.target.value),name:"email",className:" bg-gray-600 mb-4 px-2 py-2 w-full lg:w-[20em] rounded-lg text-white placeholder:text-gray-200 outline-none",placeholder:"Email"})}),h.jsx("div",{children:h.jsx("input",{type:"password",value:i,onChange:d=>a(d.target.value),className:" bg-gray-600 mb-4 px-2 py-2 w-full lg:w-[20em] rounded-lg text-white placeholder:text-gray-200 outline-none",placeholder:"Password"})}),h.jsx("div",{className:" flex justify-center mb-3",children:h.jsx("button",{onClick:c,className:" bg-yellow-500 w-full text-black font-bold  px-2 py-2 rounded-lg",children:"Login"})}),h.jsx("div",{children:h.jsxs("h2",{className:"text-white",children:["Don't have an account"," ",h.jsx(he,{className:" text-yellow-500 font-bold",to:"/signup",children:"Signup"})]})})]})]})}function eI(){const[n,e]=b.useState(""),[t,r]=b.useState(""),[s,i]=b.useState(""),a=b.useContext(Ce),{loading:l,setLoading:c}=a,d=async()=>{if(c(!0),n===""||t===""||s==="")return Y.error("All fields are required");try{const f=await _b(fm,t,s),m={name:n,uid:f.user.uid,email:f.user.email,time:ye.now()},v=Xn(Tt,"users");await Ql(v,m),Y.success("Signup Succesfully"),e(""),r(""),i(""),c(!1)}catch(f){console.log(f),c(!1)}};return h.jsxs("div",{className:" flex justify-center items-center h-screen",children:[l&&h.jsx(ll,{}),h.jsxs("div",{className:" bg-gray-800 px-10 py-10 rounded-xl ",children:[h.jsx("div",{className:"",children:h.jsx("h1",{className:"text-center text-white text-xl mb-4 font-bold",children:"Signup"})}),h.jsx("div",{children:h.jsx("input",{type:"text",value:n,onChange:f=>e(f.target.value),name:"name",className:" bg-gray-600 mb-4 px-2 py-2 w-full lg:w-[20em] rounded-lg text-white placeholder:text-gray-200 outline-none",placeholder:"Name"})}),h.jsx("div",{children:h.jsx("input",{type:"email",value:t,onChange:f=>r(f.target.value),name:"email",className:" bg-gray-600 mb-4 px-2 py-2 w-full lg:w-[20em] rounded-lg text-white placeholder:text-gray-200 outline-none",placeholder:"Email"})}),h.jsx("div",{children:h.jsx("input",{type:"password",value:s,onChange:f=>i(f.target.value),className:" bg-gray-600 mb-4 px-2 py-2 w-full lg:w-[20em] rounded-lg text-white placeholder:text-gray-200 outline-none",placeholder:"Password"})}),h.jsx("div",{className:" flex justify-center mb-3",children:h.jsx("button",{onClick:d,className:" bg-red-500 w-full text-white font-bold  px-2 py-2 rounded-lg",children:"Signup"})}),h.jsx("div",{children:h.jsxs("h2",{className:"text-white",children:["Have an account"," ",h.jsx(he,{className:" text-red-500 font-bold",to:"/login",children:"Login"})]})})]})]})}function tI(){const n=b.useContext(Ce),{loading:e,setLoading:t}=n,[r,s]=b.useState(""),i=Xm(),a=async()=>{t(!0);try{const f=await gT(Oi(Tt,"products",i.id));s(f.data()),t(!1)}catch(f){console.log(f),t(!1)}};b.useEffect(()=>{a()},[]);const l=Bi(),c=fs(f=>f.cart),d=f=>{l(al(f)),Y.success("add to cart")};return b.useEffect(()=>{localStorage.setItem("cart",JSON.stringify(c))},[c]),h.jsx(fr,{children:h.jsx("section",{className:"text-gray-600 body-font overflow-hidden",children:h.jsx("div",{className:"container px-5 py-10 mx-auto",children:r&&h.jsxs("div",{className:"lg:w-4/5 mx-auto flex flex-wrap",children:[h.jsx("img",{alt:"ecommerce",className:"lg:w-1/3 w-full lg:h-auto  object-cover object-center rounded",src:r.imageUrl}),h.jsxs("div",{className:"lg:w-1/2 w-full lg:pl-10 lg:py-6 mt-6 lg:mt-0",children:[h.jsx("h2",{className:"text-sm title-font text-gray-500 tracking-widest",children:"BRAND NAME"}),h.jsx("h1",{className:"text-gray-900 text-3xl title-font font-medium mb-1",children:r.title}),h.jsxs("div",{className:"flex mb-4",children:[h.jsxs("span",{className:"flex items-center",children:[h.jsx("svg",{fill:"currentColor",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"w-4 h-4 text-indigo-500",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),h.jsx("svg",{fill:"currentColor",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"w-4 h-4 text-indigo-500",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),h.jsx("svg",{fill:"currentColor",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"w-4 h-4 text-indigo-500",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),h.jsx("svg",{fill:"currentColor",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"w-4 h-4 text-indigo-500",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),h.jsx("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"w-4 h-4 text-indigo-500",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),h.jsx("span",{className:"text-gray-600 ml-3",children:"4 Reviews"})]}),h.jsxs("span",{className:"flex ml-3 pl-3 py-2 border-l-2 border-gray-200 space-x-2s",children:[h.jsx("a",{className:"text-gray-500",children:h.jsx("svg",{fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"w-5 h-5",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"})})}),h.jsx("a",{className:"text-gray-500",children:h.jsx("svg",{fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"w-5 h-5",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"})})}),h.jsx("a",{className:"text-gray-500",children:h.jsx("svg",{fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"w-5 h-5",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z"})})})]})]}),h.jsx("p",{className:"leading-relaxed border-b-2 mb-5 pb-5",children:r.description}),h.jsxs("div",{className:"flex",children:[h.jsxs("span",{className:"title-font font-medium text-2xl text-gray-900",children:["₹",r.price]}),h.jsx("button",{onClick:()=>d(r),className:"flex ml-auto text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded",children:"Add To Cart"}),h.jsx("button",{className:"rounded-full w-10 h-10 bg-gray-200 p-0 border-0 inline-flex items-center justify-center text-gray-500 ml-4",children:h.jsx("svg",{fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,className:"w-5 h-5",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"})})})]})]})]})})})})}function nI(){const n=b.useContext(Ce),{products:e,setProducts:t,addProduct:r}=n;return h.jsx("div",{children:h.jsx("div",{className:"flex justify-center items-center h-screen",children:h.jsxs("div",{className:" bg-gray-800 px-10 py-10 rounded-xl ",children:[h.jsx("div",{className:"",children:h.jsx("h1",{className:"text-center text-white text-xl mb-4 font-bold",children:"Add Product"})}),h.jsx("div",{children:h.jsx("input",{type:"text",value:e.title,onChange:s=>t({...e,title:s.target.value}),name:"title",className:" bg-gray-600 mb-4 px-2 py-2 w-full lg:w-[20em] rounded-lg text-white placeholder:text-gray-200 outline-none",placeholder:"Product title"})}),h.jsx("div",{children:h.jsx("input",{type:"text",value:e.price,onChange:s=>t({...e,price:s.target.value}),name:"price",className:" bg-gray-600 mb-4 px-2 py-2 w-full lg:w-[20em] rounded-lg text-white placeholder:text-gray-200 outline-none",placeholder:"Product price"})}),h.jsx("div",{children:h.jsx("input",{type:"text",value:e.imageUrl,onChange:s=>t({...e,imageUrl:s.target.value}),name:"imageurl",className:" bg-gray-600 mb-4 px-2 py-2 w-full lg:w-[20em] rounded-lg text-white placeholder:text-gray-200 outline-none",placeholder:"Product imageUrl"})}),h.jsx("div",{children:h.jsx("input",{type:"text",value:e.category,onChange:s=>t({...e,category:s.target.value}),name:"category",className:" bg-gray-600 mb-4 px-2 py-2 w-full lg:w-[20em] rounded-lg text-white placeholder:text-gray-200 outline-none",placeholder:"Product category"})}),h.jsx("div",{children:h.jsx("textarea",{cols:"30",rows:"10",name:"title",value:e.description,onChange:s=>t({...e,description:s.target.value}),className:" bg-gray-600 mb-4 px-2 py-2 w-full lg:w-[20em] rounded-lg text-white placeholder:text-gray-200 outline-none",placeholder:"Product desc"})}),h.jsx("div",{className:" flex justify-center mb-3",children:h.jsx("button",{onClick:r,className:" bg-yellow-500 w-full text-black font-bold  px-2 py-2 rounded-lg",children:"Add Product"})})]})})})}function rI(){const n=b.useContext(Ce),{products:e,setProducts:t,updateProduct:r}=n;return h.jsx("div",{children:h.jsx("div",{className:" flex justify-center items-center h-screen",children:h.jsxs("div",{className:" bg-gray-800 px-10 py-10 rounded-xl ",children:[h.jsx("div",{className:"",children:h.jsx("h1",{className:"text-center text-white text-xl mb-4 font-bold",children:"Update Product"})}),h.jsx("div",{children:h.jsx("input",{type:"text",value:e.title,onChange:s=>t({...e,title:s.target.value}),name:"title",className:" bg-gray-600 mb-4 px-2 py-2 w-full lg:w-[20em] rounded-lg text-white placeholder:text-gray-200 outline-none",placeholder:"Product title"})}),h.jsx("div",{children:h.jsx("input",{type:"text",value:e.price,onChange:s=>t({...e,price:s.target.value}),name:"price",className:" bg-gray-600 mb-4 px-2 py-2 w-full lg:w-[20em] rounded-lg text-white placeholder:text-gray-200 outline-none",placeholder:"Product price"})}),h.jsx("div",{children:h.jsx("input",{type:"text",value:e.imageUrl,onChange:s=>t({...e,imageUrl:s.target.value}),name:"imageurl",className:" bg-gray-600 mb-4 px-2 py-2 w-full lg:w-[20em] rounded-lg text-white placeholder:text-gray-200 outline-none",placeholder:"Product imageUrl"})}),h.jsx("div",{children:h.jsx("input",{type:"text",value:e.category,onChange:s=>t({...e,category:s.target.value}),name:"category",className:" bg-gray-600 mb-4 px-2 py-2 w-full lg:w-[20em] rounded-lg text-white placeholder:text-gray-200 outline-none",placeholder:"Product category"})}),h.jsx("div",{children:h.jsx("textarea",{cols:"30",rows:"10",name:"title",value:e.description,onChange:s=>t({...e,description:s.target.value}),className:" bg-gray-600 mb-4 px-2 py-2 w-full lg:w-[20em] rounded-lg text-white placeholder:text-gray-200 outline-none",placeholder:"Product desc"})}),h.jsx("div",{className:" flex justify-center mb-3",children:h.jsx("button",{onClick:r,className:" bg-yellow-500 w-full text-black font-bold  px-2 py-2 rounded-lg",children:"Update Product"})})]})})})}function sI(){const n=b.useContext(Ce),{mode:e,product:t,searchkey:r,setSearchkey:s,filterType:i,setFilterType:a,filterPrice:l,setFilterPrice:c}=n,d=Bi(),f=fs(v=>v.cart);console.log(f);const m=v=>{d(al(v)),toast.success("add to cart")};return b.useEffect(()=>{localStorage.setItem("cart",JSON.stringify(f))},[f]),b.useEffect(()=>{window.scrollTo(0,0)},[]),h.jsxs(fr,{children:[h.jsx(Pd,{}),h.jsx("section",{className:"text-gray-600 body-font",children:h.jsxs("div",{className:"container px-5 py-8 md:py-16 mx-auto",children:[h.jsxs("div",{class:"lg:w-1/2 w-full mb-6 lg:mb-10",children:[h.jsx("h1",{class:"sm:text-3xl text-2xl font-medium title-font mb-2 text-gray-900",style:{color:e==="dark"?"white":""},children:"Our Latest Collection"}),h.jsx("div",{class:"h-1 w-20 bg-pink-600 rounded"})]}),h.jsx("div",{className:"flex flex-wrap -m-4",children:t.filter(v=>v.title.toLowerCase().includes(r)).filter(v=>v.category.toLowerCase().includes(i)).filter(v=>v.price.includes(l)).map((v,T)=>{const{title:C,price:P,description:R,imageUrl:V,id:N}=v;return h.jsx("div",{onClick:()=>window.location.href=`/productinfo/${N}`,className:"p-4 md:w-1/4  drop-shadow-lg ",children:h.jsxs("div",{className:"h-full border-2 hover:shadow-gray-100 hover:shadow-2xl transition-shadow duration-300 ease-in-out    border-gray-200 border-opacity-60 rounded-2xl overflow-hidden",style:{backgroundColor:e==="dark"?"rgb(46 49 55)":"",color:e==="dark"?"white":""},children:[h.jsx("div",{className:"flex justify-center cursor-pointer",children:h.jsx("img",{className:" rounded-2xl w-full h-80 p-2 hover:scale-110 transition-scale-110  duration-300 ease-in-out",src:V,alt:"blog"})}),h.jsxs("div",{className:"p-5 border-t-2",children:[h.jsx("h2",{className:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1",style:{color:e==="dark"?"white":""},children:"UrbanCart"}),h.jsx("h1",{className:"title-font text-lg font-medium text-gray-900 mb-3",style:{color:e==="dark"?"white":""},children:C}),h.jsxs("p",{className:"leading-relaxed mb-3",style:{color:e==="dark"?"white":""},children:["₹",P]}),h.jsx("div",{className:" flex justify-center",children:h.jsx("button",{type:"button",onClick:()=>m(v),className:"focus:outline-none text-white bg-pink-600 hover:bg-pink-700 focus:ring-4 focus:ring-purple-300 font-medium rounded-lg text-sm w-full  py-2",children:"Add To Cart"})})]})]})},T)})})]})})]})}function iI(){return h.jsx(Jx,{children:h.jsxs(Jm,{children:[h.jsxs(Zm,{children:[h.jsx(nt,{path:"/",element:h.jsx(P0,{})}),h.jsx(nt,{path:"/allproducts",element:h.jsx(sI,{})}),h.jsx(nt,{path:"/order",element:h.jsx(oI,{children:h.jsx(S0,{})})}),h.jsx(nt,{path:"/cart",element:h.jsx(Lx,{})}),h.jsx(nt,{path:"/dashboard",element:h.jsx(ua,{children:h.jsx(Yx,{})})}),h.jsx(nt,{path:"/login",element:h.jsx(Zx,{})}),h.jsx(nt,{path:"/signup",element:h.jsx(eI,{})}),h.jsx(nt,{path:"/Productinfo/:id",element:h.jsx(tI,{})}),h.jsx(nt,{path:"/Addproducts",element:h.jsx(ua,{children:h.jsx(nI,{})})}),h.jsx(nt,{path:"/UpdateProduct",element:h.jsx(ua,{children:h.jsx(rI,{})})}),h.jsx(nt,{path:"/*",element:h.jsx(Xx,{})})]}),h.jsx(R0,{})]})})}const oI=({children:n})=>localStorage.getItem("user")?n:h.jsx(nd,{to:"/login"}),ua=({children:n})=>JSON.parse(localStorage.getItem("user")).user.email===" "?n:h.jsx(nd,{to:"/login"}),aI=N_({reducer:{cart:K_},devTools:!0});sg.createRoot(document.getElementById("root")).render(h.jsx(M.StrictMode,{children:h.jsx(eg,{store:aI,children:h.jsx(iI,{})})}));
